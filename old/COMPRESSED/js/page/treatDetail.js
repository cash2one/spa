!function(){function e(e,t,a,s){if(e){var i=[],r="";t=t===!0,a=Math.abs(a||4),s=Math.abs(s||1),e=e.split(""),t&&(e=e.reverse());for(var c=s;c>0;c--)r+=" ";return e.forEach(function(e,t){i.push(e),(t+1)%a==0&&i.push(r)}),t&&i.reverse(),i.join("")}}var t=$("#treatCode"),a=$("#treatMoney"),s=$("#visFriend"),i=$("#treatTel"),r=$("#callPhone"),c=$("#treatStatus"),o=$("#treatTime"),n=$("#useMoney"),l=$("#useTime"),u=$("#cancelTime"),C=$("#sureBtn"),d=$(".cancel-btn"),p=$(".sure-btn"),h=$("#cancelTreat"),f=$("#useItem"),T=$("#cancelItem"),x=$.param("detailId")||$.getUrlParam("detailId")||"",m=$.param("backAccount");return""==x?($.tipShow("参数不对。"),$.pageCancel()):("true"==m&&$("#title>div:nth-of-type(2)").Click(function(e){e.stopImmediatePropagation(),history.go(-2)}),$.ajax({url:"../api/v2/finacial/account/payforother/detail",isReplaceUrl:!0,type:"post",data:{detailId:x},success:function(m){if("200"==m.statusCode){switch(m=m.respData,t.Text(e(m.authorizeCode)),a.Text((m.amount/100).toFixed(2)),"Y"==m.open?s.Text("朋友可见"):s.Text("朋友不可见"),i.Text(e(m.telephone,!0)),r.Attr("href","tel:"+m.telephone),o.Text(m.createDate),m.status){case"NOT_USERD":c.Text("未使用"),C.ClassClear("hide");break;case"CANCLED":c.Text("已取消"),u.Text(m.cancelDate),T.ClassClear("hide"),C.Class("hide");break;case"USED":c.Text("已使用"),l.Text(m.usedDate),n.Text((m.usedAmount/100).toFixed(2)),f.ClassClear("hide"),C.Class("hide")}C.Click(function(){h.Class("active")}),d.Click(function(){h.ClassClear("active")}),p.Click(function(){var e=$(p[0].parentNode);e.Class("processing"),$.ajax({url:"../api/v2/finacial/account/payforother/cancel",isReplaceUrl:!0,type:"post",data:{detailId:x},success:function(t){e.ClassClear("processing"),"200"==t.statusCode?($.sessionStorage("treat_records_change_status",JSON.stringify({id:x,status:"CANCLED"})),c.Text("已取消"),h.ClassClear("active"),C.Class("hide"),T.ClassClear("hide"),u.Text($.commonDateFormat(new Date))):$.tipShow(t.msg||"取消授权失败")},error:function(t){e.ClassClear("processing"),$.tipShow(t||"出错")}})})}else $.tipShow(m.msg||"查询数据失败")}}),void $.pageSwitch())}();