!function(){function e(){i[0]&&i[1]?n.ClassClear("disabled"):n.Class("disabled")}var a=$("#moneyInput"),t=$("#inputPlaceholder"),n=$("#sureBtn"),c=$("#telPhone"),l=($("#explain"),$("#records"),$("#isVisible")),s="",i=[0,0],u="",o=$.param("accountId")||$.getUrlParam("accountId")||"";return""==o?($.tipShow("参数不正确"),$.pageCancel()):(setTimeout(function(){var e=($.$.winHeight-$("#content>div")[0].offsetHeight)/$.$.scale/16;e>0&&setTimeout(function(){$(".btn-area").CSS({"margin-top":e+"rem"})},0)},0),a.Event("focus",function(){t.Class("hide")}),a.Event("blur",function(){""==a.Value()&&t.ClassClear("hide")}),a.Event("input",function(){if(""==a[0].value)s.length>1?(a[0].value=s,i[0]=1,e()):(s="",i[0]=0,e());else{i[0]=1,e();var t=a[0].value.match(/\./g);t&&a[0].value.match(/\./g).length>1&&(a[0].value=a[0].value.substring(0,a[0].value.length-1)),/^([1-9][0-9]*)$/g.test(a[0].value)?s=a[0].value:a[0].value=s}}),c.Verify("tel",function(a){a?i[1]=1:i[1]=0,e()}),l.Event("click",function(e,a){l.ClassHave("checked")?l.ClassClear("checked"):l.Class("checked")}),$.ajax({url:"../api/v2/finacial/account/"+o,isReplaceUrl:!0,type:"post",success:function(e){"200"==e.statusCode?(e=e.respData,u=e.clubId,$("#balanceSpan").Text((e.amount/100).toFixed(2)),n.Event("click",function(){n.ClassHave("disabled")||(n.ClassHave("processing")?$.tipShow("正在授权，请稍候..."):(n.Class("processing"),n.Text("授权中..."),$.ajax({url:"../api/v2/finacial/account/payforother/auth",isReplaceUrl:!0,type:"post",data:{accountId:o,amount:100*parseFloat(a.Value()),open:l.ClassHave("checked")?"Y":"N",telephone:c.Value()},success:function(e){n.ClassClear("processing"),n.Text("确认授权"),"200"!=e.statusCode?$.tipShow(e.msg||"授权失败。"):$.page("treatDetail&backAccount=true&detailId="+e.respData)},error:function(e){$.tipShow(e||"系统错误")}})))})):$.tipShow(e.msg||"查询数据失败")}}),$("#explain").Click(function(){$.page("treatExplain")}),$("#records").Click(function(){$.page("treatRecords&clubId="+u)}),void $.pageSwitch())}();