!function(t,e){function i(t,e){var i=t,s=e;return n.transform3d?"translate3d("+i+"px, "+s+"px, 0)":"translate("+i+"px, "+s+"px)"}function s(t,e){return n.touch?t.changedTouches[0][e]:t[e]}function o(){}var n={transform3d:"WebKitCSSMatrix"in t&&"m11"in new WebKitCSSMatrix,touch:"ontouchstart"in t};o.prototype={init:function(t){t=t||{},this.imgWrap=t.imgWrap,this.img=null,this.hideScanImgWrap=!1,this.buffMove=3,this.finger=!1,this.closeCallback=t.closeCallback,this._destroy();var e=this;this.imgWrap.addEventListener("click",function(){e.showImgTime&&(new Date).getTime()-e.showImgTime<500||"show"==e.imgWrap.className&&e.close()})},close:function(){this.imgWrap.className="hide",this.hideScanImgWrap=!0,this._destroy(),this.img.ontouchstart=null,this.img.ontouchmove=null,this.img.ontouchend=null,e.removeEventListener("touchmove",this.eventStop,!1),this.closeCallback&&this.closeCallback(this.img,this.loadImgStyle)},showImg:function(t){this.img=t,this.imgWrap.appendChild(this.img),this.loadImgStyle=this.img.style.cssText;var i=document.documentElement.clientWidth||window.innerWidth,s=this.img.getAttribute("w"),o=this.img.getAttribute("h"),n=i/s,r=o*n,a=this;this.img.style.height=r+"px",this.img.style.width=i+"px",this.img.style.marginTop="-"+r/2+"px",e.addEventListener("touchmove",a.eventStop,!1),this.imgBaseWidth=i,this.imgBaseHeight=r,this.addEventStart({wrapX:a.imgWrap.offsetWidth,wrapY:a.imgWrap.offsetHeight,mapX:i,mapY:r}),this.hideScanImgWrap=!1,this.lastTapTime=null,this.closeTimeOut=null,this.imgWrap.className="show",this.showImgTime=(new Date).getTime(),this.img.ontouchstart=function(t){a._touchStart(t)},this.img.ontouchmove=function(t){a._touchMove(t)},this.img.ontouchend=function(t){a._touchEnd(t)}},addEventStart:function(t){t=t||{},this.wrapX=t.wrapX||0,this.wrapY=t.wrapY||0,this.mapX=t.mapX||0,this.mapY=t.mapY||0,this.width=this.mapX-this.wrapX,this.height=this.mapY-this.wrapY},_destroy:function(){this.distX=0,this.distY=0,this.newX=0,this.newY=0},_changeData:function(){this.mapX=this.img.offsetWidth,this.mapY=this.img.offsetHeight,this.width=this.mapX-this.wrapX,this.height=this.mapY-this.wrapY},_touchStart:function(t){t.preventDefault();var e=t.targetTouches.length;this._changeData(),1==e?(this.basePageX=s(t,"pageX"),this.basePageY=s(t,"pageY"),this.finger=!1):(this.finger=!0,this.startFingerDist=this.getTouchDist(t).dist,this.startFingerX=this.getTouchDist(t).x,this.startFingerY=this.getTouchDist(t).y)},_touchMove:function(t){t.preventDefault(),t.stopPropagation();var e=t.targetTouches.length;1!=e||this.finger||this._move(t),e>=2&&this._zoom(t)},_touchEnd:function(t){var e=s(t,"pageX"),i=s(t,"pageY"),o=this;return this.basePageX&&this.basePageY&&e==this.basePageX&&i==this.basePageY?o.imgWrap.click():(this._changeData(),this.finger&&(this.distX=-this.imgNewX,this.distY=-this.imgNewY),this.distX>0?this.newX=0:this.distX<=0&&this.distX>=-this.width?(this.newX=this.distX,this.newY=this.distY):this.distX<-this.width&&(this.newX=-this.width),void this.reset())},_move:function(t){var e=s(t,"pageX"),i=s(t,"pageY");this.distX=e-this.basePageX+this.newX,this.distY=i-this.basePageY+this.newY,this.distX>0?this.moveX=Math.round(this.distX/this.buffMove):this.distX<=0&&this.distX>=-this.width?this.moveX=this.distX:this.distX<-this.width&&(this.moveX=-this.width+Math.round((this.distX+this.width)/this.buffMove)),this.movePos(),this.finger=!1},_zoom:function(t){var e=this.getTouchDist(t).dist,i=e/this.startFingerDist;this.zoomImg(i),this.finger=!0},zoomImg:function(t){},movePos:function(){if(this.height<0)if(this.img.offsetWidth==this.imgBaseWidth)this.moveY=Math.round(this.distY/this.buffMove);else{var t=Math.round((this.img.offsetHeight-this.imgBaseHeight)/2);this.moveY=-t+Math.round((this.distY+t)/this.buffMove)}else{var e=Math.round((this.wrapY-this.imgBaseHeight)/2),i=this.img.offsetHeight-this.wrapY+Math.round(this.wrapY-this.imgBaseHeight)/2;this.distY>=-e?this.moveY=Math.round((this.distY+e)/this.buffMove)-e:this.distY<=-i?this.moveY=Math.round((this.distY+i)/this.buffMove)-i:this.moveY=this.distY}this.refresh(this.moveX,this.moveY,"0s","ease")},reset:function(){var t=".2s";if(this.height<0)this.newY=-Math.round(this.img.offsetHeight-this.imgBaseHeight)/2;else{var e=Math.round((this.wrapY-this.imgBaseHeight)/2),i=this.img.offsetHeight-this.wrapY+Math.round(this.wrapY-this.imgBaseHeight)/2;this.distY>=-e?this.newY=-e:this.distY<=-i?this.newY=-i:this.newY=this.distY}this.refresh(this.newX,this.newY,t,"ease-in-out")},refresh:function(t,e,s,o){this.img.style.webkitTransitionProperty="-webkit-transform",this.img.style.webkitTransitionDuration=s,this.img.style.webkitTransitionTimingFunction=o,this.img.style.webkitTransform=i(t,e)},getTouchDist:function(t){var i=t.touches[0].pageX,s=t.touches[0].pageY-e.body.scrollTop,o=t.touches[1].pageX,n=t.touches[1].pageY-e.body.scrollTop,r=0,a=0;if(i&&o)return r=i<=o?(o-i)/2+i:(i-o)/2+o,a=s<=n?(n-s)/2+s:(s-n)/2+n,{dist:Math.round(Math.sqrt(Math.pow(i-o,2)+Math.pow(s-n,2))),x:Math.round(r),y:Math.round(a)}},eventStop:function(t){t.preventDefault(),t.stopPropagation()}},t.ImgScan=o}(window,document),function(t,e,i){function s(t,i){this.wrapper="string"==typeof t?e.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var s in i)this.options[s]=i[s];this.translateZ=this.options.HWCompositing&&a.hasPerspective?" translateZ(0)":"",this.options.useTransition=a.hasTransition&&this.options.useTransition,this.options.useTransform=a.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?a.ease[this.options.bounceEasing]||a.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function o(t,i,s){var o=e.createElement("div"),n=e.createElement("div");return s===!0&&(o.style.cssText="position:absolute;z-index:9999",n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),n.className="iScrollIndicator","h"==t?(s===!0&&(o.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",n.style.height="100%"),o.className="iScrollHorizontalScrollbar"):(s===!0&&(o.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",n.style.width="100%"),o.className="iScrollVerticalScrollbar"),o.style.cssText+=";overflow:hidden",i||(o.style.pointerEvents="none"),o.appendChild(n),o}function n(i,s){this.wrapper="string"==typeof s.el?e.querySelector(s.el):s.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=i,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var o in s)this.options[o]=s[o];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(a.addEvent(this.indicator,"touchstart",this),a.addEvent(t,"touchend",this)),this.options.disablePointer||(a.addEvent(this.indicator,a.prefixPointerEvent("pointerdown"),this),a.addEvent(t,a.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(a.addEvent(this.indicator,"mousedown",this),a.addEvent(t,"mouseup",this))),this.options.fade&&(this.wrapperStyle[a.style.transform]=this.scroller.translateZ,this.wrapperStyle[a.style.transitionDuration]=a.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var r=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)},a=function(){function s(t){return r!==!1&&(""===r?t:r+t.charAt(0).toUpperCase()+t.substr(1))}var o={},n=e.createElement("div").style,r=function(){for(var t,e=["t","webkitT","MozT","msT","OT"],i=0,s=e.length;i<s;i++)if(t=e[i]+"ransform",t in n)return e[i].substr(0,e[i].length-1);return!1}();o.getTime=Date.now||function(){return(new Date).getTime()},o.extend=function(t,e){for(var i in e)t[i]=e[i]},o.addEvent=function(t,e,i,s){t.addEventListener(e,i,!!s)},o.removeEvent=function(t,e,i,s){t.removeEventListener(e,i,!!s)},o.prefixPointerEvent=function(e){return t.MSPointerEvent?"MSPointer"+e.charAt(9).toUpperCase()+e.substr(10):e},o.momentum=function(t,e,s,o,n,r){var a,h,c=t-e,l=i.abs(c)/s;return r=void 0===r?6e-4:r,a=t+l*l/(2*r)*(c<0?-1:1),h=l/r,a<o?(a=n?o-n/2.5*(l/8):o,c=i.abs(a-t),h=c/l):a>0&&(a=n?n/2.5*(l/8):0,c=i.abs(t)+a,h=c/l),{destination:i.round(a),duration:h}};var a=s("transform");return o.extend(o,{hasTransform:a!==!1,hasPerspective:s("perspective")in n,hasTouch:"ontouchstart"in t,hasPointer:t.PointerEvent||t.MSPointerEvent,hasTransition:s("transition")in n}),o.isBadAndroid=/Android /.test(t.navigator.appVersion)&&!/Chrome\/\d/.test(t.navigator.appVersion),o.extend(o.style={},{transform:a,transitionTimingFunction:s("transitionTimingFunction"),transitionDuration:s("transitionDuration"),transitionDelay:s("transitionDelay"),transformOrigin:s("transformOrigin")}),o.hasClass=function(t,e){var i=new RegExp("(^|\\s)"+e+"(\\s|$)");return i.test(t.className)},o.addClass=function(t,e){if(!o.hasClass(t,e)){var i=t.className.split(" ");i.push(e),t.className=i.join(" ")}},o.removeClass=function(t,e){if(o.hasClass(t,e)){var i=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(i," ")}},o.offset=function(t){for(var e=-t.offsetLeft,i=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,i-=t.offsetTop;return{left:e,top:i}},o.preventDefaultException=function(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1},o.extend(o.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),o.extend(o.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return i.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var e=4;return(t-=1)*t*((e+1)*t+e)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var e=.22,s=.4;return 0===t?0:1==t?1:s*i.pow(2,-10*t)*i.sin((t-e/4)*(2*i.PI)/e)+1}}}),o.tap=function(t,i){var s=e.createEvent("Event");s.initEvent(i,!0,!0),s.pageX=t.pageX,s.pageY=t.pageY,t.target.dispatchEvent(s)},o.click=function(t){var i,s=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(s.tagName)||(i=e.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,t.view,1,s.screenX,s.screenY,s.clientX,s.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),i._constructed=!0,s.dispatchEvent(i))},o}();s.prototype={version:"5.1.3",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if((1==a.eventType[t.type]||0===t.button)&&this.enabled&&(!this.initiated||a.eventType[t.type]===this.initiated)){!this.options.preventDefault||a.isBadAndroid||a.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var e,s=t.touches?t.touches[0]:t;this.initiated=a.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=a.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,e=this.getComputedPosition(),this._translate(i.round(e.x),i.round(e.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=s.pageX,this.pointY=s.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&a.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,s,o,n,r=t.touches?t.touches[0]:t,h=r.pageX-this.pointX,c=r.pageY-this.pointY,l=a.getTime();if(this.pointX=r.pageX,this.pointY=r.pageY,this.distX+=h,this.distY+=c,o=i.abs(this.distX),n=i.abs(this.distY),!(l-this.endTime>300&&o<10&&n<10)){if(this.directionLocked||this.options.freeScroll||(o>n+this.options.directionLockThreshold?this.directionLocked="h":n>=o+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);c=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);h=0}h=this.hasHorizontalScroll?h:0,c=this.hasVerticalScroll?c:0,e=this.x+h,s=this.y+c,(e>0||e<this.maxScrollX)&&(e=this.options.bounce?this.x+h/3:e>0?0:this.maxScrollX),(s>0||s<this.maxScrollY)&&(s=this.options.bounce?this.y+c/3:s>0?0:this.maxScrollY),this.directionX=h>0?-1:h<0?1:0,this.directionY=c>0?-1:c<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(e,s),l-this.startTime>300&&(this.startTime=l,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(t){if(this.enabled&&a.eventType[t.type]===this.initiated){this.options.preventDefault&&!a.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var e,s,o=(t.changedTouches?t.changedTouches[0]:t,a.getTime()-this.startTime),n=i.round(this.x),r=i.round(this.y),h=i.abs(n-this.startX),c=i.abs(r-this.startY),l=0,p="";if(this.isInTransition=0,this.initiated=0,this.endTime=a.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(n,r),!this.moved)return this.options.tap&&a.tap(t,this.options.tap),this.options.click&&a.click(t),void this._execEvent("scrollCancel");if(this._events.flick&&o<200&&h<100&&c<100)return void this._execEvent("flick");if(this.options.momentum&&o<300&&(e=this.hasHorizontalScroll?a.momentum(this.x,this.startX,o,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:n,duration:0},s=this.hasVerticalScroll?a.momentum(this.y,this.startY,o,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:r,duration:0},n=e.destination,r=s.destination,l=i.max(e.duration,s.duration),this.isInTransition=1),this.options.snap){var d=this._nearestSnap(n,r);this.currentPage=d,l=this.options.snapSpeed||i.max(i.max(i.min(i.abs(n-d.x),1e3),i.min(i.abs(r-d.y),1e3)),300),n=d.x,r=d.y,this.directionX=0,this.directionY=0,p=this.options.bounceEasing}return n!=this.x||r!=this.y?((n>0||n<this.maxScrollX||r>0||r<this.maxScrollY)&&(p=a.ease.quadratic),void this.scrollTo(n,r,l,p)):void this._execEvent("scrollEnd")}}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var e=this.x,i=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),(e!=this.x||i!=this.y)&&(this.scrollTo(e,i,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=a.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var i=this._events[t].indexOf(e);i>-1&&this._events[t].splice(i,1)}},_execEvent:function(t){if(this._events[t]){var e=0,i=this._events[t].length;if(i)for(;e<i;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,i,s){t=this.x+t,e=this.y+e,i=i||0,this.scrollTo(t,e,i,s)},scrollTo:function(t,e,i,s){s=s||a.ease.circular,this.isInTransition=this.options.useTransition&&i>0,!i||this.options.useTransition&&s.style?(this._transitionTimingFunction(s.style),this._transitionTime(i),this._translate(t,e)):this._animate(t,e,i,s.fn)},scrollToElement:function(t,e,s,o,n){if(t=t.nodeType?t:this.scroller.querySelector(t)){var r=a.offset(t);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top,s===!0&&(s=i.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),o===!0&&(o=i.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),r.left-=s||0,r.top-=o||0,r.left=r.left>0?0:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=r.top>0?0:r.top<this.maxScrollY?this.maxScrollY:r.top,e=void 0===e||null===e||"auto"===e?i.max(i.abs(this.x-r.left),i.abs(this.y-r.top)):e,this.scrollTo(r.left,r.top,e,n)}},_transitionTime:function(t){if(t=t||0,this.scrollerStyle[a.style.transitionDuration]=t+"ms",!t&&a.isBadAndroid&&(this.scrollerStyle[a.style.transitionDuration]="0.001s"),this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTime(t)},_transitionTimingFunction:function(t){if(this.scrollerStyle[a.style.transitionTimingFunction]=t,this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTimingFunction(t)},_translate:function(t,e){if(this.options.useTransform?this.scrollerStyle[a.style.transform]="translate("+t+"px,"+e+"px)"+this.translateZ:(t=i.round(t),e=i.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e,this.indicators)for(var s=this.indicators.length;s--;)this.indicators[s].updatePosition()},_initEvents:function(e){var i=e?a.removeEvent:a.addEvent,s=this.options.bindToWrapper?this.wrapper:t;i(t,"orientationchange",this),i(t,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(s,"mousemove",this),i(s,"mousecancel",this),i(s,"mouseup",this)),a.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,a.prefixPointerEvent("pointerdown"),this),i(s,a.prefixPointerEvent("pointermove"),this),i(s,a.prefixPointerEvent("pointercancel"),this),i(s,a.prefixPointerEvent("pointerup"),this)),a.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(s,"touchmove",this),i(s,"touchcancel",this),i(s,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var e,i,s=t.getComputedStyle(this.scroller,null);return this.options.useTransform?(s=s[a.style.transform].split(")")[0].split(", "),e=+(s[12]||s[4]),i=+(s[13]||s[5])):(e=+s.left.replace(/[^-\d.]/g,""),i=+s.top.replace(/[^-\d.]/g,"")),{x:e,y:i}},_initIndicators:function(){function t(t){for(var e=a.indicators.length;e--;)t.call(a.indicators[e])}var e,i=this.options.interactiveScrollbars,s="string"!=typeof this.options.scrollbars,r=[],a=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(e={el:o("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:s,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(e.el),r.push(e)),this.options.scrollX&&(e={el:o("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:s,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(e.el),r.push(e))),this.options.indicators&&(r=r.concat(this.options.indicators));for(var h=r.length;h--;)this.indicators.push(new n(this,r[h]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){t(function(){this.fade()})}),this.on("scrollCancel",function(){t(function(){this.fade()})}),this.on("scrollStart",function(){t(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){t(function(){this.fade(1,!0)})})),this.on("refresh",function(){t(function(){this.refresh()})}),this.on("destroy",function(){t(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){a.addEvent(this.wrapper,"wheel",this),a.addEvent(this.wrapper,"mousewheel",this),a.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){a.removeEvent(this.wrapper,"wheel",this),a.removeEvent(this.wrapper,"mousewheel",this),a.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(t){if(this.enabled){t.preventDefault(),t.stopPropagation();var e,s,o,n,r=this;if(void 0===this.wheelTimeout&&r._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){r._execEvent("scrollEnd"),r.wheelTimeout=void 0},400),"deltaX"in t)1===t.deltaMode?(e=-t.deltaX*this.options.mouseWheelSpeed,s=-t.deltaY*this.options.mouseWheelSpeed):(e=-t.deltaX,s=-t.deltaY);else if("wheelDeltaX"in t)e=t.wheelDeltaX/120*this.options.mouseWheelSpeed,s=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)e=s=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;e=s=-t.detail/3*this.options.mouseWheelSpeed}if(e*=this.options.invertWheelDirection,s*=this.options.invertWheelDirection,this.hasVerticalScroll||(e=s,s=0),this.options.snap)return o=this.currentPage.pageX,n=this.currentPage.pageY,e>0?o--:e<0&&o++,s>0?n--:s<0&&n++,void this.goToPage(o,n);o=this.x+i.round(this.hasHorizontalScroll?e:0),n=this.y+i.round(this.hasVerticalScroll?s:0),o>0?o=0:o<this.maxScrollX&&(o=this.maxScrollX),n>0?n=0:n<this.maxScrollY&&(n=this.maxScrollY),this.scrollTo(o,n,0),this.options.probeType>1&&this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,e,s,o,n,r,a=0,h=0,c=0,l=this.options.snapStepX||this.wrapperWidth,p=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(s=i.round(l/2),o=i.round(p/2);c>-this.scrollerWidth;){for(this.pages[a]=[],t=0,n=0;n>-this.scrollerHeight;)this.pages[a][t]={x:i.max(c,this.maxScrollX),y:i.max(n,this.maxScrollY),width:l,height:p,cx:c-s,cy:n-o},n-=p,t++;c-=l,a++}else for(r=this.options.snap,t=r.length,e=-1;a<t;a++)(0===a||r[a].offsetLeft<=r[a-1].offsetLeft)&&(h=0,e++),this.pages[h]||(this.pages[h]=[]),c=i.max(-r[a].offsetLeft,this.maxScrollX),n=i.max(-r[a].offsetTop,this.maxScrollY),s=c-i.round(r[a].offsetWidth/2),o=n-i.round(r[a].offsetHeight/2),this.pages[h][e]={x:c,y:n,width:r[a].offsetWidth,height:r[a].offsetHeight,cx:s,cy:o},c>this.maxScrollX&&h++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,e){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var s=0,o=this.pages.length,n=0;if(i.abs(t-this.absStartX)<this.snapThresholdX&&i.abs(e-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY);s<o;s++)if(t>=this.pages[s][0].cx){t=this.pages[s][0].x;break}for(o=this.pages[s].length;n<o;n++)if(e>=this.pages[0][n].cy){e=this.pages[0][n].y;break}return s==this.currentPage.pageX&&(s+=this.directionX,s<0?s=0:s>=this.pages.length&&(s=this.pages.length-1),t=this.pages[s][0].x),n==this.currentPage.pageY&&(n+=this.directionY,n<0?n=0:n>=this.pages[0].length&&(n=this.pages[0].length-1),e=this.pages[0][n].y),{x:t,y:e,pageX:s,pageY:n}},goToPage:function(t,e,s,o){o=o||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:t<0&&(t=0),e>=this.pages[t].length?e=this.pages[t].length-1:e<0&&(e=0);var n=this.pages[t][e].x,r=this.pages[t][e].y;s=void 0===s?this.options.snapSpeed||i.max(i.max(i.min(i.abs(n-this.x),1e3),i.min(i.abs(r-this.y),1e3)),300):s,this.currentPage={x:n,y:r,pageX:t,pageY:e},this.scrollTo(n,r,s,o)},next:function(t,e){var i=this.currentPage.pageX,s=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,s++),this.goToPage(i,s,t,e)},prev:function(t,e){var i=this.currentPage.pageX,s=this.currentPage.pageY;i--,i<0&&this.hasVerticalScroll&&(i=0,s--),this.goToPage(i,s,t,e)},_initKeys:function(e){var i,s={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(i in this.options.keyBindings)"string"==typeof this.options.keyBindings[i]&&(this.options.keyBindings[i]=this.options.keyBindings[i].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(i in s)this.options.keyBindings[i]=this.options.keyBindings[i]||s[i];a.addEvent(t,"keydown",this),this.on("destroy",function(){a.removeEvent(t,"keydown",this)})},_key:function(t){if(this.enabled){var e,s=this.options.snap,o=s?this.currentPage.pageX:this.x,n=s?this.currentPage.pageY:this.y,r=a.getTime(),h=this.keyTime||0,c=.25;switch(this.options.useTransition&&this.isInTransition&&(e=this.getComputedPosition(),this._translate(i.round(e.x),i.round(e.y)),this.isInTransition=!1),this.keyAcceleration=r-h<200?i.min(this.keyAcceleration+c,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?o+=s?1:this.wrapperWidth:n+=s?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?o-=s?1:this.wrapperWidth:n-=s?1:this.wrapperHeight;break;case this.options.keyBindings.end:o=s?this.pages.length-1:this.maxScrollX,n=s?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:o=0,n=0;break;case this.options.keyBindings.left:o+=s?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:n+=s?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:o-=s?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:n-=s?1:5+this.keyAcceleration>>0;break;default:return}if(s)return void this.goToPage(o,n);o>0?(o=0,this.keyAcceleration=0):o<this.maxScrollX&&(o=this.maxScrollX,this.keyAcceleration=0),n>0?(n=0,this.keyAcceleration=0):n<this.maxScrollY&&(n=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(o,n,0),this.keyTime=r}},_animate:function(t,e,i,s){function o(){var d,m,u,g=a.getTime();return g>=p?(n.isAnimating=!1,n._translate(t,e),void(n.resetPosition(n.options.bounceTime)||n._execEvent("scrollEnd"))):(g=(g-l)/i,u=s(g),d=(t-h)*u+h,m=(e-c)*u+c,n._translate(d,m),n.isAnimating&&r(o),void(3==n.options.probeType&&n._execEvent("scroll")))}var n=this,h=this.x,c=this.y,l=a.getTime(),p=l+i;this.isAnimating=!0,o()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}}},n.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},destroy:function(){this.options.interactive&&(a.removeEvent(this.indicator,"touchstart",this),a.removeEvent(this.indicator,a.prefixPointerEvent("pointerdown"),this),a.removeEvent(this.indicator,"mousedown",this),a.removeEvent(t,"touchmove",this),a.removeEvent(t,a.prefixPointerEvent("pointermove"),this),a.removeEvent(t,"mousemove",this),a.removeEvent(t,"touchend",this),a.removeEvent(t,a.prefixPointerEvent("pointerup"),this),a.removeEvent(t,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(e){var i=e.touches?e.touches[0]:e;e.preventDefault(),e.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=i.pageX,this.lastPointY=i.pageY,this.startTime=a.getTime(),this.options.disableTouch||a.addEvent(t,"touchmove",this),this.options.disablePointer||a.addEvent(t,a.prefixPointerEvent("pointermove"),this),this.options.disableMouse||a.addEvent(t,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(t){var e,i,s,o,n=t.touches?t.touches[0]:t,r=a.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,e=n.pageX-this.lastPointX,this.lastPointX=n.pageX,i=n.pageY-this.lastPointY,this.lastPointY=n.pageY,s=this.x+e,o=this.y+i,this._pos(s,o),1==this.scroller.options.probeType&&r-this.startTime>300?(this.startTime=r,
this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),t.preventDefault(),t.stopPropagation()},_end:function(e){if(this.initiated){if(this.initiated=!1,e.preventDefault(),e.stopPropagation(),a.removeEvent(t,"touchmove",this),a.removeEvent(t,a.prefixPointerEvent("pointermove"),this),a.removeEvent(t,"mousemove",this),this.scroller.options.snap){var s=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),o=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.scroller.x-s.x),1e3),i.min(i.abs(this.scroller.y-s.y),1e3)),300);this.scroller.x==s.x&&this.scroller.y==s.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=s,this.scroller.scrollTo(s.x,s.y,o,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(t){t=t||0,this.indicatorStyle[a.style.transitionDuration]=t+"ms",!t&&a.isBadAndroid&&(this.indicatorStyle[a.style.transitionDuration]="0.001s")},transitionTimingFunction:function(t){this.indicatorStyle[a.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(a.addClass(this.wrapper,"iScrollBothScrollbars"),a.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(a.removeClass(this.wrapper,"iScrollBothScrollbars"),a.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=i.max(i.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=i.max(i.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var t=this.options.listenX&&i.round(this.sizeRatioX*this.scroller.x)||0,e=this.options.listenY&&i.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(t<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=i.max(this.indicatorWidth+t,8),this.indicatorStyle.width=this.width+"px"),t=this.minBoundaryX):t>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=i.max(this.indicatorWidth-(t-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",t=this.maxPosX+this.indicatorWidth-this.width):t=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),e<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=i.max(this.indicatorHeight+3*e,8),this.indicatorStyle.height=this.height+"px"),e=this.minBoundaryY):e>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=i.max(this.indicatorHeight-3*(e-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",e=this.maxPosY+this.indicatorHeight-this.height):e=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=t,this.y=e,this.scroller.options.useTransform?this.indicatorStyle[a.style.transform]="translate("+t+"px,"+e+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=e+"px")},_pos:function(t,e){t<0?t=0:t>this.maxPosX&&(t=this.maxPosX),e<0?e=0:e>this.maxPosY&&(e=this.maxPosY),t=this.options.listenX?i.round(t/this.sizeRatioX):this.scroller.x,e=this.options.listenY?i.round(e/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,e)},fade:function(t,e){if(!e||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=t?250:500,s=t?0:300;t=t?"1":"0",this.wrapperStyle[a.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(t){this.wrapperStyle.opacity=t,this.visible=+t}.bind(this,t),s)}}},s.utils=a,"undefined"!=typeof module&&module.exports?module.exports=s:t.IScroll=s}(window,document,Math),function(window,undefined){if("undefined"==typeof Strophe)throw"need Strophe";var Easemob=Easemob||{};Easemob.im=Easemob.im||{},Easemob.im.version="1.1.1";var https="https:"===location.protocol;window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,Strophe.Websocket.prototype._closeSocket=function(){var t=this;t.socket?setTimeout(function(){try{t.socket.close()}catch(e){}},0):t.socket=null};var Utils=function(){var t=function(){try{return new window.XMLHttpRequest}catch(t){return!1}},e=function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(t){return!1}};window.XDomainRequest&&(XDomainRequest.prototype.oldsend=XDomainRequest.prototype.send,XDomainRequest.prototype.send=function(){XDomainRequest.prototype.oldsend.apply(this,arguments),this.readyState=2}),Strophe.Request.prototype._newXHR=function(){var t=Utils.xmlrequest(!0);return t.overrideMimeType&&t.overrideMimeType("text/xml"),t.onreadystatechange=this.func.stropheBind(null,this),t};var i=function(i){i=i||!0;var s=t()||e();if("withCredentials"in s)return s;if(!i)return s;if("undefined"==typeof window.XDomainRequest)return s;var o=new XDomainRequest;return o.readyState=0,o.status=100,o.onreadystatechange=EMPTYFN,o.onload=function(){o.readyState=4,o.status=200;var t=new ActiveXObject("Microsoft.XMLDOM");t.async="false",t.loadXML(o.responseText),o.responseXML=t,o.response=o.responseText,o.onreadystatechange()},o.ontimeout=o.onerror=function(){o.readyState=4,o.status=500,o.onreadystatechange()},o},s=function(){if("ActiveXObject"in window)try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(t){return 0}else if(navigator.plugins&&navigator.plugins.length>0)return navigator.plugins["Shockwave Flash"];return 0}(),o=i(),n="undefined"!=typeof FormData,r="undefined"!=typeof Blob,a=o.setRequestHeader||!1,h=o.overrideMimeType||!1,c=a&&n,l=c||s,p=a&&(r||h);return{hasFormData:n,hasBlob:r,isCanSetRequestHeader:a,hasOverrideMimeType:h,isCanUploadFileAsync:c,isCanUploadFile:l,isCanDownLoadFile:p,isSupportWss:function(){var t=[/MQQBrowser[\/]5([.]\d+)?\sTBS/];if(!window.WebSocket)return!1;for(var e=window.navigator.userAgent,i=0,s=t.length;i<s;i++)if(t[i].test(e))return!1;return!0}(),stringify:function(t){if("undefined"!=typeof JSON&&JSON.stringify)return JSON.stringify(t);var e="",i=[],s=function(t){var o=!1;"[object Array]"===Object.prototype.toString.call(t)?(i.push("]","["),o=!0):"[object Object]"===Object.prototype.toString.call(t)&&i.push("}","{");for(var n in t)"[object Null]"===Object.prototype.toString.call(t[n])?t[n]="null":"[object Undefined]"===Object.prototype.toString.call(t[n])&&(t[n]="undefined"),e+=t[n]&&"object"==typeof t[n]?","+(o?"":'"'+n+'":'+(o?'"':""))+s(t[n]):',"'+(o?"":n+'":"')+t[n]+'"';return""!=e&&(e=e.slice(1)),i.pop()+e+i.pop()};return s(t)},registerUser:function(t){var e=t.orgName||"",i=t.appName||"",s=t.appKey||"";if(!e&&!i&&s){var o=s.split("#");2===o.length&&(e=o[0],i=o[1])}if(!e&&!i)return void t.error({type:EASEMOB_IM_RESISTERUSER_ERROR,msg:"没有指定开发者信息"});var n=t.https||n,r=t.apiUrl||(n?"https":"http")+"://a1.easemob.com",a=r+"/"+e+"/"+i+"/users",h={username:t.username,password:t.password,nickname:t.nickname||""},c=Utils.stringify(h),t={url:a,dataType:"json",data:c,success:t.success||EMPTYFN,error:t.error||EMPTYFN};return Utils.ajax(t)},login2UserGrid:function(t){t=t||{};var e=t.appKey||"",i=e.split("#");if(2!==i.length)return a({type:EASEMOB_IM_CONNCTION_OPEN_USERGRID_ERROR,msg:"请指定正确的开发者信息(appKey)"}),!1;var s=i[0],o=i[1];if(!s)return a({type:EASEMOB_IM_CONNCTION_OPEN_USERGRID_ERROR,msg:"请指定正确的开发者信息(appKey)"}),!1;if(!o)return a({type:EASEMOB_IM_CONNCTION_OPEN_USERGRID_ERROR,msg:"请指定正确的开发者信息(appKey)"}),!1;var n=n||t.https,r=t.success||EMPTYFN,a=t.error||EMPTYFN,h=t.user||"",c=t.pwd||"",l=t.apiUrl||(n?"https":"http")+"://a1.easemob.com",p={grant_type:"password",username:h,password:c},d=Utils.stringify(p),t={url:l+"/"+s+"/"+o+"/token",dataType:"json",data:d,success:r||EMPTYFN,error:a||EMPTYFN};return Utils.ajax(t)},getFileUrl:function(t){var e={url:"",filename:"",filetype:"",data:""},i=document.getElementById(t);if(!Utils.isCanUploadFileAsync||!i)return e;if(window.URL.createObjectURL){var s=i.files;if(s.length>0){var o=s.item(0);e.data=o,e.url=window.URL.createObjectURL(o),e.filename=o.name||""}}else{var o=document.getElementById(t).value;e.url=o;var n=o.lastIndexOf("/"),r=o.lastIndexOf("\\"),a=Math.max(n,r);a<0?e.filename=o:e.filename=o.substring(a+1)}var h=e.filename.lastIndexOf(".");return h!=-1&&(e.filetype=e.filename.substring(h+1).toLowerCase()),e},getFileSizeFn:function(t){var e=document.getElementById(t),i=0;if(e)if(e.files)e.files.length>0&&(i=e.files[0].size);else if(e.select&&"ActiveXObject"in window){e.select();var s=new ActiveXObject("Scripting.FileSystemObject"),e=s.GetFile(e.value);i=e.Size}return i},hasFlash:s,trim:function(t){return t="string"==typeof t?t:"",t.trim?t.trim():t.replace(/^\s|\s$/g,"")},parseEmotions:function(t){if("undefined"==typeof Easemob.im.EMOTIONS||"undefined"==typeof Easemob.im.EMOTIONS.map)return t;var e=Easemob.im.EMOTIONS;t=t.replace(/&amp;/g,"&"),t=t.replace(/&#39;/g,"'"),t=t.replace(/&lt;/g,"<");for(var i in e.map)if(e.map.hasOwnProperty(i))for(;t.indexOf(i)>-1;)t=t.replace(i,'<img class="em-emotion" src="'+e.path+e.map[i]+'" alt="表情">');return t},parseLink:function(t){var e=/(https?\:\/\/|www\.)([a-zA-Z0-9-]+(\.[a-zA-Z0-9]+)+)(\:[0-9]{2,4})?\/?((\.[:_0-9a-zA-Z-]+)|[:_0-9a-zA-Z-]*\/?)*\??[:_#@*&%0-9a-zA-Z-\/=]*/gm,i=t.match(e),s=i&&i[0]?i[0]:"";if(i&&i.length){var o=/^https?:\/\//.test(s);t=t.replace(e,"<a href='"+(o?s:"//"+s)+"' target='_blank'>"+s+"</a>")}return t},parseJSON:function(t){if(window.JSON&&window.JSON.parse)return window.JSON.parse(t+"");var e,i=null,s=Utils.trim(t+"");return s&&!Utils.trim(s.replace(/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g,function(t,s,o,n){return e&&s&&(i=0),0===i?t:(e=o||s,i+=!n-!o,"")}))?Function("return "+s)():Function("Invalid JSON: "+t)()},parseUploadResponse:function(t){return t.indexOf("callback")>-1?t.slice(9,-1):t},parseDownloadResponse:function(t){return t&&t.type&&"application/json"===t.type||0>Object.prototype.toString.call(t).indexOf("Blob")?this.url+"?token=":window.URL.createObjectURL(t)},uploadFile:function(t){t=t||{},t.onFileUploadProgress=t.onFileUploadProgress||EMPTYFN,t.onFileUploadComplete=t.onFileUploadComplete||EMPTYFN,t.onFileUploadError=t.onFileUploadError||EMPTYFN,t.onFileUploadCanceled=t.onFileUploadCanceled||EMPTYFN;var e=t.accessToken||this.context.accessToken;if(!e)return void t.onFileUploadError({type:EASEMOB_IM_UPLOADFILE_NO_LOGIN,msg:"用户未登录到usergrid服务器,无法使用文件上传功能",id:t.id});if(orgName=t.orgName||this.context.orgName||"",appName=t.appName||this.context.appName||"",appKey=t.appKey||this.context.appKey||"",!orgName&&!appName&&appKey){var i=appKey.split("#");2==i.length&&(orgName=i[0],appName=i[1])}if(!orgName&&!appName)return void t.onFileUploadError({type:EASEMOB_IM_UPLOADFILE_ERROR,msg:"没有指定开发者信息",id:t.id});var s=t.apiUrl||"http://a1.easemob.com",o=s+"/"+orgName+"/"+appName+"/chatfiles";if(!Utils.isCanUploadFileAsync)return void(Utils.hasFlash&&"function"==typeof t.flashUpload?t.flashUpload&&t.flashUpload(o,t):this.onError({type:EASEMOB_IM_UPLOADFILE_BROWSER_ERROR,msg:"当前浏览器不支持异步上传！"}));var n=t.file.data?t.file.data.size:undefined;if(n>EASEMOB_IM_FILESIZE_LIMIT)return void t.onFileUploadError({type:EASEMOB_IM_UPLOADFILE_ERROR,msg:"上传文件超过服务器大小限制（10M）",id:t.id});if(n<=0)return void t.onFileUploadError({type:EASEMOB_IM_UPLOADFILE_ERROR,msg:"上传文件大小为0",id:t.id});var r=Utils.xmlrequest(),a=function(e){t.onFileUploadError({type:EASEMOB_IM_UPLOADFILE_ERROR,msg:"上传文件失败",id:t.id,xhr:r})};r.upload&&r.upload.addEventListener("progress",t.onFileUploadProgress,!1),r.addEventListener?(r.addEventListener("abort",t.onFileUploadCanceled,!1),r.addEventListener("load",function(e){try{var i=Utils.parseJSON(r.responseText);t.onFileUploadComplete(i)}catch(e){t.onFileUploadError({type:EASEMOB_IM_UPLOADFILE_ERROR,msg:"上传文件失败,服务端返回值值不正确",data:r.responseText,id:t.id,xhr:r})}},!1),r.addEventListener("error",a,!1)):r.onreadystatechange&&(r.onreadystatechange=function(){if(4===r.readyState)if(200===ajax.status)try{var e=Utils.parseJSON(r.responseText);t.onFileUploadComplete(e)}catch(i){t.onFileUploadError({type:EASEMOB_IM_UPLOADFILE_ERROR,msg:"上传文件失败,服务端返回值不正确",data:r.responseText,id:t.id,xhr:r})}else t.onFileUploadError({type:EASEMOB_IM_UPLOADFILE_ERROR,msg:"上传文件失败,服务端返回异常",data:r.responseText,id:t.id,xhr:r});else r.abort(),t.onFileUploadCanceled()}),r.open("POST",o),r.setRequestHeader("restrict-access","true"),r.setRequestHeader("Accept","*/*"),r.setRequestHeader("Authorization","Bearer "+e);var h=new FormData;h.append("file",t.file.data),r.send(h)},downloadFn:function(t){t.onFileDownloadComplete=t.onFileDownloadComplete||EMPTYFN,t.onFileDownloadError=t.onFileDownloadError||EMPTYFN;var e=t.accessToken||"";if(!e)return void t.onFileDownloadError({type:EASEMOB_IM_DOWNLOADFILE_NO_LOGIN,msg:"用户未登录到usergrid服务器,无法使用文件下载功能",id:t.id});var i=function(e){t.onFileDownloadError({type:EASEMOB_IM_DOWNLOADFILE_ERROR,msg:"下载文件失败",id:t.id,xhr:s})};if(!Utils.isCanDownLoadFile)return void t.onFileDownloadComplete();var s=Utils.xmlrequest();"addEventListener"in s?(s.addEventListener("load",function(e){t.onFileDownloadComplete(s.response,s)},!1),s.addEventListener("error",i,!1)):"onreadystatechange"in s&&(s.onreadystatechange=function(){4===s.readyState?200===ajax.status?t.onFileDownloadComplete(s.response,s):t.onFileDownloadError({type:EASEMOB_IM_DOWNLOADFILE_ERROR,msg:"下载文件失败,服务端返回异常",id:t.id,xhr:s}):(s.abort(),t.onFileDownloadError({type:EASEMOB_IM_DOWNLOADFILE_ERROR,msg:"错误的下载状态,退出下载",id:t.id,xhr:s}))});var o=t.method||"GET",n=t.responseType||"blob",r=t.mimeType||"text/plain; charset=x-user-defined";s.open(o,t.url),"undefined"!=typeof Blob?s.responseType=n:s.overrideMimeType(r);var a={"X-Requested-With":"XMLHttpRequest",Accept:"application/octet-stream","share-secret":t.secret,Authorization:"Bearer "+e},h=t.headers||{};for(var c in h)a[c]=h[c];for(var c in a)a[c]&&s.setRequestHeader(c,a[c]);s.send(null)},parseTextMessage:function(t,e){if("string"!=typeof t)return void conn.onError({type:EASEMOB_IM_MESSAGE_REC_TEXT_ERROR,msg:"不合法的消息内容格式，请检查发送消息内容！"});if("[object Object]"!==Object.prototype.toString.call(e))return{isemotion:!1,body:[{type:"txt",data:t}]};var i=t,s=[],o=/\[[^[\]]{2,3}\]/gm,n=i.match(o);if(!n||n.length<1)return{isemotion:!1,body:[{type:"txt",data:t}]};for(var r=!1,a=0;a<n.length;a++){var h=i.substring(0,i.indexOf(n[a])),c=Easemob.im.EMOTIONS.map[n[a]];if(h&&s.push({type:"txt",data:h}),c){var l=Easemob.im.EMOTIONS.map?Easemob.im.EMOTIONS.path+c:null;l?(r=!0,s.push({type:"emotion",data:l})):s.push({type:"txt",data:n[a]});var p=i.indexOf(n[a])+n[a].length;i=i.substring(p)}else s.push({type:"txt",data:n[a]})}return i&&s.push({type:"txt",data:i}),r?{isemotion:r,body:s}:{isemotion:!1,body:[{type:"txt",data:t}]}},xmlrequest:i,ajax:function(t){var e=t.dataType||"text",i=t.success||EMPTYFN,s=t.error||EMPTYFN,o=Utils.xmlrequest();if(o.onreadystatechange=function(){if(4===o.readyState){var t=o.status||0;if(200===t){if("text"===e)return void i(o.responseText,o);if("json"===e){try{var n=Utils.parseJSON(o.responseText);i(n,o)}catch(r){s(o.responseText,o,"错误的数据,无法转换为json")}return}return"xml"===e?void(o.responseXML&&o.responseXML.documentElement?i(o.responseXML.documentElement,o):s(o.responseText,o,"浏览器不支持ajax返回xml对象")):void i(o.response||o.responseText,o)}if("json"===e){try{var n=Utils.parseJSON(o.responseText);s(n,o,"服务器返回错误信息")}catch(r){s(o.responseText,o,"服务器返回错误信息")}return}return"xml"===e?void(o.responseXML&&o.responseXML.documentElement?s(o.responseXML.documentElement,o,"服务器返回错误信息"):s(o.responseText,o,"服务器返回错误信息")):void s(o.responseText,o,"服务器返回错误信息")}0===o.readyState&&s(o.responseText,o,"服务器异常")},t.responseType){if(!o.responseType)return s("",o,"当前浏览器不支持设置响应类型"),null;o.responseType=t.responseType}if(t.mimeType){if(!Utils.hasOverrideMimeType)return s("",o,"当前浏览器不支持设置mimeType"),null;o.overrideMimeType(t.mimeType)}var n=t.type||"POST",r=t.data||null,a="";if("get"===n.toLowerCase()&&r){for(var h in r)r.hasOwnProperty(h)&&(a+=h+"="+r[h]+"&");a=a?a.slice(0,-1):a,t.url+=(t.url.indexOf("?")>0?"&":"?")+(a?a+"&":a)+"_v="+(new Date).getTime(),r=null,a=null}if(o.open(n,t.url),Utils.isCanSetRequestHeader){var c=t.headers||{};for(var l in c)c.hasOwnProperty(l)&&o.setRequestHeader(l,c[l])}return o.send(r),o}}}(),EmMessage=function(t,e){return!this instanceof EmMessage?new EmMessage(t):(this._msg={},"function"==typeof EmMessage[t]&&(EmMessage[t].prototype.setGroup=this.setGroup,this._msg=new EmMessage[t](e)),this._msg)};EmMessage.prototype.setGroup=function(t){this.body.group=t};var _msgHash={},Message=function(t){return!this instanceof Message?new Message(t,conn):void(this.msg=t)};Message.prototype.send=function(t){var e=this,i=function(e){e.ext=e.ext||{},e.ext.weichat=e.ext.weichat||{},e.ext.weichat.originType=e.ext.weichat.originType||"webim";var s={from:t.context.userId||"",to:e.to,bodies:[e.body],ext:e.ext||{}},o=Utils.stringify(s),n=$msg({type:e.group||"chat",to:e.toJid,id:e.id,xmlns:"jabber:client"}).c("body").t(o);e.roomType&&n.up().c("roomtype",{xmlns:"easemob:x:roomtype",type:"chatroom"}),t.retry&&setTimeout(function(){_msgHash[e.id]&&("undefined"==typeof _msgHash[e.id].timeout&&(_msgHash[e.id].timeout=2),0===_msgHash[e.id].timeout?(_msgHash[e.id].timeout=2,_msgHash[e.id].msg.fail instanceof Function&&_msgHash[e.id].msg.fail(e.id)):(_msgHash[e.id].timeout-=1,i(e)))},2e4),t.sendCommand(n.tree(),e.id)};if(e.msg.file){if(e.msg.body&&e.msg.body.url)return void i(e.msg);var s=e.msg.onFileUploadComplete,o=function(t){if(t.entities[0]["file-metadata"]){var o=t.entities[0]["file-metadata"]["content-length"];e.msg.file_length=o,e.msg.filetype=t.entities[0]["file-metadata"]["content-type"],o>204800&&(e.msg.thumbnail=!0)}e.msg.body={type:e.msg.type||"file",url:t.uri+"/"+t.entities[0].uuid,secret:t.entities[0]["share-secret"],filename:e.msg.file.filename||e.msg.filename,size:{width:e.msg.width||0,height:e.msg.height||0},length:e.msg.file_length||0,file_length:e.msg.file_length||0,filetype:e.msg.filetype},i(e.msg),s instanceof Function&&s(t,e.msg.id)};e.msg.onFileUploadComplete=o,Utils.uploadFile.call(t,e.msg)}else e.msg.body={type:"chat"===e.msg.type?"txt":e.msg.type,msg:e.msg.msg},"cmd"===e.msg.type?e.msg.body.action=e.msg.action:"loc"===e.msg.type&&(e.msg.body.addr=e.msg.addr,e.msg.body.lat=e.msg.lat,e.msg.body.lng=e.msg.lng),i(e.msg)};var Connection=function(){var _networkSt,_listenNetwork=function(t,e){window.addEventListener?(window.addEventListener("online",t),window.addEventListener("offline",e)):window.attachEvent&&(document.body?(document.body.attachEvent("onoffline",e),document.body.attachEvent("onoffline",e)):window.attachEvent("load",function(){document.body.attachEvent("onoffline",e),document.body.attachEvent("onoffline",e)}))},_parseRoomFn=function(t){var e=[],i=t.getElementsByTagName("item");if(i)for(var s=0;s<i.length;s++){var o=i[s],n=o.getAttribute("jid"),r=n.split("@")[0],a={jid:n,name:o.getAttribute("name"),roomId:r.split("_")[1]};e.push(a)}return e},_parseRoomOccupantsFn=function(t){var e=[],i=t.getElementsByTagName("item");if(i)for(var s=0;s<i.length;s++){var o=i[s],n={jid:o.getAttribute("jid"),name:o.getAttribute("name")};e.push(n)}return e},_parseResponseMessage=function(msginfo){var parseMsgData={errorMsg:!0,data:[]},msgBodies=msginfo.getElementsByTagName("body");if(msgBodies){for(var i=0;i<msgBodies.length;i++){var msgBody=msgBodies[i],childNodes=msgBody.childNodes;if(childNodes&&childNodes.length>0){var childNode=msgBody.childNodes[0];if(childNode.nodeType==Strophe.ElementType.TEXT){var jsondata=childNode.wholeText||childNode.nodeValue;jsondata=jsondata.replace("\n","<br>");try{var data=eval("("+jsondata+")");parseMsgData.errorMsg=!1,parseMsgData.data=[data]}catch(e){}}}}var delayTags=msginfo.getElementsByTagName("delay");if(delayTags&&delayTags.length>0){var delayTag=delayTags[0],delayMsgTime=delayTag.getAttribute("stamp");delayMsgTime&&(parseMsgData.delayTimeStamp=delayMsgTime)}}else{var childrens=msginfo.childNodes;if(childrens&&childrens.length>0){var child=msginfo.childNodes[0];if(child.nodeType==Strophe.ElementType.TEXT)try{var data=eval("("+child.nodeValue+")");parseMsgData.errorMsg=!1,parseMsgData.data=[data]}catch(e){}}}return parseMsgData},_parseNameFromJidFn=function(t,e){e=e||"";var i=t,s=i.indexOf("_");s!==-1&&(i=i.substring(s+1));var o=i.indexOf("@"+e);return o!==-1&&(i=i.substring(0,o)),i},_parseFriendFn=function(t){var e=[],i=t.getElementsByTagName("item");if(i)for(var s=0;s<i.length;s++){var o=i[s],n=o.getAttribute("jid");if(n){var r=o.getAttribute("subscription"),a={subscription:r,jid:n},h=o.getAttribute("ask");h&&(a.ask=h);var c=o.getAttribute("name");if(c)a.name=c;else{var l=_parseNameFromJidFn(n);a.name=l}var p=[];Strophe.forEachChild(o,"group",function(t){p.push(Strophe.getText(t))}),a.groups=p,e.push(a)}}return e},_dologin2IM=function(t,e){var i=t.access_token||"";if(""==i){var s=Utils.stringify(t);return void e.onError({type:EASEMOB_IM_CONNCTION_OPEN_USERGRID_ERROR,msg:"登录失败,"+s,data:t,xhr:xhr})}e.context.accessToken=t.access_token,e.context.accessTokenExpires=t.expires_in;var o=null;if(e.isOpening()&&e.context.stropheConn)o=e.context.stropheConn;else{if(e.isOpened()&&e.context.stropheConn)return;o=new Strophe.Connection(e.url,{inactivity:e.inactivity,maxRetries:e.maxRetries,pollingTime:e.pollingTime})}var n=function(t,i){_login2ImCallback(t,i,e)};e.context.stropheConn=o,e.route?o.connect(e.context.jid,"$t$"+i,n,e.wait,e.hold,e.route):o.connect(e.context.jid,"$t$"+i,n,e.wait,e.hold)},_parseMessageType=function(t){var e="normal",i=t.getElementsByTagName("received");if(i&&i.length>0&&"urn:xmpp:receipts"===i[0].namespaceURI)e="received";else{var s=t.getElementsByTagName("invite");s&&s.length>0&&(e="invite")}return e},_handleQueueMessage=function(t){for(var e in _msgHash)_msgHash.hasOwnProperty(e)&&_msgHash[e].send(t)},_login2ImCallback=function(t,e,i){if(t==Strophe.Status.CONNFAIL)i.onError({type:EASEMOB_IM_CONNCTION_SERVER_CLOSE_ERROR,msg:e,reconnect:!0});else if(t==Strophe.Status.ATTACHED||t==Strophe.Status.CONNECTED){var s=function(t){var e=_parseMessageType(t);return"received"===e?(i.handleReceivedMessage(t),!0):"invite"===e?(i.handleInviteMessage(t),!0):(i.handleMessage(t),!0)},o=function(t){return i.handlePresence(t),!0},n=function(t){return i.handlePing(t),!0},r=function(t){return i.handleIq(t),!0};i.addHandler(s,null,"message",null,null,null),i.addHandler(o,null,"presence",null,null,null),i.addHandler(n,"urn:xmpp:ping","iq","get",null,null),i.addHandler(r,"jabber:iq:roster","iq","set",null,null),i.context.status=STATUS_OPENED;var a=[EASEMOB_IM_MESSAGE_REC_TEXT,EASEMOB_IM_MESSAGE_REC_EMOTION];Utils.isCanDownLoadFile&&(a.push(EASEMOB_IM_MESSAGE_REC_PHOTO),a.push(EASEMOB_IM_MESSAGE_REC_AUDIO_FILE));var h=[EASEMOB_IM_MESSAGE_SED_TEXT];Utils.isCanUploadFile&&(h.push(EASEMOB_IM_MESSAGE_REC_PHOTO),h.push(EASEMOB_IM_MESSAGE_REC_AUDIO_FILE)),i.notifyVersion(),i.retry&&_handleQueueMessage(i),i.onOpened({canReceive:a,canSend:h,accessToken:i.context.accessToken}),i.heartBeat()}else t==Strophe.Status.DISCONNECTING?i.isOpened()&&(i.stopHeartBeat(),i.context.status=STATUS_CLOSING,i.onError({type:EASEMOB_IM_CONNCTION_SERVER_CLOSE_ERROR,msg:e,reconnect:!0})):t==Strophe.Status.DISCONNECTED?(i.context.status=STATUS_CLOSED,i.clear(),i.onClosed()):t==Strophe.Status.AUTHFAIL?(i.onError({type:EASEMOB_IM_CONNCTION_AUTH_ERROR,msg:"登录失败,请输入正确的用户名和密码"}),i.clear()):t==Strophe.Status.ERROR&&i.onError({type:EASEMOB_IM_CONNCTION_SERVER_ERROR,msg:e||"服务器异常"})},_getJid=function(t,e){var i=t.toJid||"";if(""===i){var s=e.context.appKey||"",o=s+"_"+t.to+"@"+e.domain;t.resource&&(o=o+"/"+t.resource),i=o}return i},_innerCheck=function(t,e){if(t=t||{},""==t.user)return e.onError({type:EASEMOB_IM_CONNCTION_USER_NOT_ASSIGN_ERROR,msg:"未指定用户"}),!1;var i=t.user||"",s=t.appKey||"",o=s.split("#");if(2!==o.length)return e.onError({type:EASEMOB_IM_CONNCTION_OPEN_ERROR,msg:"请指定正确的开发者信息(appKey)"}),!1;var n=o[0],r=o[1];if(!n)return e.onError({type:EASEMOB_IM_CONNCTION_OPEN_ERROR,msg:"请指定正确的开发者信息(appKey)"}),!1;if(!r)return e.onError({type:EASEMOB_IM_CONNCTION_OPEN_ERROR,msg:"请指定正确的开发者信息(appKey)"}),!1;var a=s+"_"+i.toLowerCase()+"@"+e.domain,h=t.resource||"webim";return e.multiResources&&(h+=i+(new Date).getTime()+Math.floor(1e6*Math.random().toFixed(6))),e.context.jid=a+"/"+h,e.context.userId=i,e.context.appKey=s,e.context.appName=r,e.context.orgName=n,!0},_getXmppUrl=function(t,e){if(/^(ws|http)s?:\/\/?/.test(t))return t;var i={prefix:"http",base:"://"+(t||"im-api.easemob.com"),suffix:"/http-bind/"};return e&&Utils.isSupportWss?(i.prefix="wss",i.suffix="/ws/"):e?i.prefix="https":window.WebSocket&&(i.prefix="ws",i.suffix="/ws/"),i.prefix+i.base+i.suffix},connection=function(t){if(!this instanceof Connection)return new Connection(t);var t=t||{};this.multiResources=t.multiResources||!1,this.wait=t.wait||30,this.retry=t.retry||!1,this.https=t.https||https,this.url=_getXmppUrl(t.url,this.https),this.hold=t.hold||1,this.route=t.route||null,this.domain=t.domain||"easemob.com",this.inactivity=t.inactivity||30,this.heartBeatWait=t.heartBeatWait||6e4,this.maxRetries=t.maxRetries||5,this.pollingTime=t.pollingTime||800,this.stropheConn=!1,this.context={status:STATUS_INIT}};return connection.prototype.listen=function(t){t.url&&(this.url=_getXmppUrl(t.url,this.https)),this.onOpened=t.onOpened||EMPTYFN,this.onClosed=t.onClosed||EMPTYFN,this.onTextMessage=t.onTextMessage||EMPTYFN,this.onEmotionMessage=t.onEmotionMessage||EMPTYFN,this.onPictureMessage=t.onPictureMessage||EMPTYFN,this.onAudioMessage=t.onAudioMessage||EMPTYFN,this.onVideoMessage=t.onVideoMessage||EMPTYFN,this.onFileMessage=t.onFileMessage||EMPTYFN,this.onLocationMessage=t.onLocationMessage||EMPTYFN,this.onCmdMessage=t.onCmdMessage||EMPTYFN,this.onPresence=t.onPresence||EMPTYFN,this.onRoster=t.onRoster||EMPTYFN,this.onError=t.onError||EMPTYFN,this.onReceivedMessage=t.onReceivedMessage||EMPTYFN,this.onInviteMessage=t.onInviteMessage||EMPTYFN,this.onOffline=t.onOffline||EMPTYFN,this.onOnline=t.onOnline||EMPTYFN,_listenNetwork(this.onOnline,this.onOffline)},connection.prototype.heartBeat=function(){var t=this;if(!t.heartBeatID){var e={to:t.domain,type:"normal"};t.heartBeatID=setInterval(function(){t.sendHeartBeatMessage(e)},t.heartBeatWait)}},connection.prototype.sendHeartBeatMessage=function(t){var e={},i=Utils.stringify(e),s=$msg({to:t.to,type:t.type,id:this.getUniqueId(),xmlns:"jabber:client"}).c("body").t(i);this.sendCommand(s.tree())},connection.prototype.stopHeartBeat=function(){this.heartBeatID=clearInterval(this.heartBeatID)},connection.prototype.sendReceiptsMessage=function(t){var e=$msg({from:this.context.jid||"",to:"easemob.com",id:t.id||""}).c("received",{xmlns:"urn:xmpp:receipts",id:t.id||""});this.sendCommand(e.tree())},connection.prototype.open=function(t){var e=_innerCheck(t,this);if(e){var i=this;if(!i.isOpening()&&!i.isOpened())if(t.accessToken)t.access_token=t.accessToken,_dologin2IM(t,i);else{var s=t.apiUrl||(this.https?"https":"http")+"://a1.easemob.com",o=this.context.userId,n=t.pwd||"",r=this.context.appName,a=this.context.orgName,h=t.success,c=t.error,l=function(t,e){h&&h(t),i.context.status=STATUS_DOLOGIN_IM,_dologin2IM(t,i)},p=function(t,e,s){c&&c(t,s),i.clear(),t.error&&t.error_description?i.onError({type:EASEMOB_IM_CONNCTION_OPEN_USERGRID_ERROR,msg:"登录失败,"+t.error_description,data:t,xhr:e}):i.onError({type:EASEMOB_IM_CONNCTION_OPEN_USERGRID_ERROR,msg:"登录失败",data:t,xhr:e})};this.context.status=STATUS_DOLOGIN_USERGRID;var d={grant_type:"password",username:o,password:n},m=Utils.stringify(d),t={url:s+"/"+a+"/"+r+"/token",dataType:"json",data:m,success:l||EMPTYFN,error:p||EMPTYFN};Utils.ajax(t)}}},connection.prototype.attach=function(t){var e=_innerCheck(t,this);if(e){t=t||{};var i=t.accessToken||"";if(""==i)return void this.onError({type:EASEMOB_IM_CONNCTION_ATTACH_USERGRID_ERROR,msg:"未指定用户的accessToken"});var s=t.sid||"";if(""===s)return void this.onError({type:EASEMOB_IM_CONNCTION_ATTACH_ERROR,msg:"未指定用户的会话信息"});var o=t.rid||"";if(""===o)return void this.onError({type:EASEMOB_IM_CONNCTION_ATTACH_ERROR,msg:"未指定用户的消息id"});var n=new Strophe.Connection(this.url,{inactivity:this.inactivity,maxRetries:this.maxRetries,pollingTime:this.pollingTime});this.context.accessToken=i,this.context.stropheConn=n,this.context.status=STATUS_DOLOGIN_IM;var r=this,a=function(t,e){_login2ImCallback(t,e,r)},h=this.context.jid,c=this.wait,l=this.hold,p=this.wind||5;n.attach(h,s,o,a,c,l,p)}},connection.prototype.close=function(){var t=this.context.status;t!=STATUS_INIT&&(this.isClosed()||this.isClosing()||(this.stopHeartBeat(),this.context.status=STATUS_CLOSING,this.context.stropheConn.disconnect()))},connection.prototype.addHandler=function(t,e,i,s,o,n,r){this.context.stropheConn.addHandler(t,e,i,s,o,n,r)},connection.prototype.notifyVersion=function(t,e){var i=(_getJid({},this),$iq({from:this.context.jid||"",to:this.domain,type:"result"}).c("query",{xmlns:"jabber:iq:version"}).c("name").t("easemob").up().c("version").t(Easemob.im.version).up().c("os").t("webim"));t=t||EMPTYFN,error=e||this.onError;var s=function(t){error({type:EASEMOB_IM_CONNCTION_NOTIFYVERSION_ERROR,msg:"发送版本信息给服务器时失败",data:t})};this.context.stropheConn.sendIQ(i.tree(),t,s)},connection.prototype.handlePresence=function(t){if(!this.isClosed()){var e=t.getAttribute("from")||"",i=t.getAttribute("to")||"",s=t.getAttribute("type")||"",o=t.getAttribute("presence_type")||"",n=_parseNameFromJidFn(e),r=_parseNameFromJidFn(i),a={from:n,to:r,fromJid:e,toJid:i,type:s,chatroom:!!t.getElementsByTagName("roomtype").length},h=t.getElementsByTagName("show");if(h&&h.length>0){var c=h[0];a.show=Strophe.getText(c)}var l=t.getElementsByTagName("status");if(l&&l.length>0){var p=l[0];a.status=Strophe.getText(p),a.code=p.getAttribute("code")}var d=t.getElementsByTagName("priority");if(d&&d.length>0){var m=d[0];a.priority=Strophe.getText(m)}var u=t.getElementsByTagName("error");if(u&&u.length>0){var u=u[0];a.error={code:u.getAttribute("code")}}var g=t.getElementsByTagName("destroy");if(g&&g.length>0){var g=g[0];a.destroy=!0;var f=g.getElementsByTagName("reason");f&&f.length>0&&(a.reason=Strophe.getText(f[0]))}if(a.chatroom){var E=e.slice(e.lastIndexOf("/")+1);E===this.context.userId&&(""!==a.type||a.code?"unavailable"!==o&&"unavailable"!==a.type||(a.status?110==a.code?a.type="leaveChatRoom":a.error&&406==a.error.code&&(a.type="joinChatRoomFailed"):a.type="leaveChatRoom"):a.type="joinChatRoomSuccess");
}else"unavailable"!==o&&"unavailable"!==s||(a.destroy?a.type="deleteGroupChat":307!=a.code&&321!=a.code||(a.type="leaveGroup"));this.onPresence(a,t)}},connection.prototype.handlePing=function(t){if(!this.isClosed()){var e=t.getAttribute("id"),i=t.getAttribute("from"),s=t.getAttribute("to"),o=$iq({from:s,to:i,id:e,type:"result"});this.sendCommand(o.tree())}},connection.prototype.handleIq=function(t){var e=t.getAttribute("id"),i=t.getAttribute("from")||"",s=(_parseNameFromJidFn(i),this.context.jid),o=(this.context.userId,$iq({type:"result",id:e,from:s}));this.sendCommand(o.tree());var n=t.getElementsByTagName("query");if(n&&n.length>0){var r=n[0],a=_parseFriendFn(r);this.onRoster(a)}return!0},connection.prototype.handleMessage=function(t){if(!this.isClosed()){var e=t.getAttribute("id")||"";this.sendReceiptsMessage({id:e});var i=_parseResponseMessage(t);if(i.errorMsg)return void this.handlePresence(t);var s=i.data;for(var o in s)if(s.hasOwnProperty(o)){var n=s[o];if(n.from&&n.to){var r=n.from.toLowerCase(),a=n.to.toLowerCase(),h=n.ext||{},c="",l=t.getElementsByTagName("roomtype");c=l.length?l[0].getAttribute("type")||"chat":t.getAttribute("type")||"chat";var p=n.bodies;if(p&&0!=p.length){var d=n.bodies[0],m=d.type;if("txt"===m){var u=d.msg,g=Utils.parseTextMessage(u,Easemob.im.EMOTIONS);g.isemotion?this.onEmotionMessage({id:e,type:c,from:r,to:a,delay:i.delayTimeStamp,data:g.body,ext:h}):this.onTextMessage({id:e,type:c,from:r,to:a,delay:i.delayTimeStamp,data:u,ext:h})}else if("img"===m){var f=0,E=0;d.size&&(f=d.size.width,E=d.size.height);var n={id:e,type:c,from:r,to:a,url:d.url,secret:d.secret,filename:d.filename,thumb:d.thumb,thumb_secret:d.thumb_secret,file_length:d.file_length||"",width:f,height:E,filetype:d.filetype||"",accessToken:this.context.accessToken||"",ext:h,delay:i.delayTimeStamp};this.onPictureMessage(n)}else"audio"===m?this.onAudioMessage({id:e,type:c,from:r,to:a,url:d.url,secret:d.secret,filename:d.filename,length:d.length||"",file_length:d.file_length||"",filetype:d.filetype||"",accessToken:this.context.accessToken||"",ext:h,delay:i.delayTimeStamp}):"file"===m?this.onFileMessage({id:e,type:c,from:r,to:a,url:d.url,secret:d.secret,filename:d.filename,file_length:d.file_length,accessToken:this.context.accessToken||"",ext:h,delay:i.delayTimeStamp}):"loc"===m?this.onLocationMessage({id:e,type:c,from:r,to:a,addr:d.addr,lat:d.lat,lng:d.lng,ext:h,delay:i.delayTimeStamp}):"video"===m?this.onVideoMessage({id:e,type:c,from:r,to:a,url:d.url,secret:d.secret,filename:d.filename,file_length:d.file_length,accessToken:this.context.accessToken||"",ext:h,delay:i.delayTimeStamp}):"cmd"===m&&this.onCmdMessage({id:e,from:r,to:a,action:d.action,ext:h,delay:i.delayTimeStamp})}}}}},connection.prototype.handleReceivedMessage=function(t){this.onReceivedMessage(t);var e,i,s=t.getElementsByTagName("received");s.length>0&&(e=s[0].childNodes&&s[0].childNodes.length>0?s[0].childNodes[0].nodeValue:s[0].innerHTML||s[0].innerText,i=s[0].getAttribute("mid")),_msgHash[e]&&(_msgHash[e].msg.success instanceof Function&&_msgHash[e].msg.success(e,i),delete _msgHash[e])},connection.prototype.handleInviteMessage=function(t){var e=null,i=t.getElementsByTagName("invite"),s=t.getAttribute("id")||"";if(this.sendReceiptsMessage({id:s}),i&&i.length>0){var o=i[0].getAttribute("from");e=_parseNameFromJidFn(o)}var n=t.getElementsByTagName("x"),r=null;if(n&&n.length>0)for(var a=0;a<n.length;a++)if("jabber:x:conference"===n[a].namespaceURI){var h=n[a].getAttribute("jid");r=_parseNameFromJidFn(h)}this.onInviteMessage({type:"invite",from:e,roomid:r})},connection.prototype.sendCommand=function(t,e){this.isOpened()?this.context.stropheConn.send(t):this.onError({type:EASEMOB_IM_CONNCTION_OPEN_ERROR,msg:"连接还未建立,请先登录或等待登录处理完毕",reconnect:!0})},connection.prototype.getUniqueId=function(t){var e=new Date,i=new Date(2010,1,1),s=e.getTime()-i.getTime(),o=parseInt(s).toString(16);return"string"==typeof t||"number"==typeof t?t+"_"+o:"WEBIM_"+o},connection.prototype.send=function(t){if("[object Object]"===Object.prototype.toString.call(t)){var e=this.context.appKey||"",i=e+"_"+t.to+"@"+this.domain;t.group&&(i=e+"_"+t.to+"@conference."+this.domain),t.resource&&(i=i+"/"+t.resource),t.toJid=i,t.id=t.id||this.getUniqueId(),_msgHash[t.id]=new Message(t),_msgHash[t.id].send(this)}else"string"==typeof t&&_msgHash[t]&&_msgHash[t].send(this)},connection.prototype.addRoster=function(t){var e=_getJid(t,this),i=t.name||"",s=t.groups||"",o=$iq({type:"set"});if(o.c("query",{xmlns:"jabber:iq:roster"}),o.c("item",{jid:e,name:i}),s)for(var n=0;n<s.length;n++)o.c("group").t(s[n]).up();var r=t.success||EMPTYFN,a=t.error||EMPTYFN;this.context.stropheConn.sendIQ(o.tree(),r,a)},connection.prototype.removeRoster=function(t){var e=_getJid(t,this),i=$iq({type:"set"}).c("query",{xmlns:"jabber:iq:roster"}).c("item",{jid:e,subscription:"remove"}),s=t.success||EMPTYFN,o=t.error||EMPTYFN;this.context.stropheConn.sendIQ(i,s,o)},connection.prototype.getRoster=function(t){var e=$iq({type:"get"}).c("query",{xmlns:"jabber:iq:roster"});t=t||{},suc=t.success||this.onRoster;var i=function(t){var e=[],i=t.getElementsByTagName("query");if(i&&i.length>0){var s=i[0];e=_parseFriendFn(s)}suc(e,t)};error=t.error||this.onError;var s=function(t){error({type:EASEMOB_IM_CONNCTION_GETROSTER_ERROR,msg:"获取联系人信息失败",data:t})};this.isOpened()?this.context.stropheConn.sendIQ(e.tree(),i,s):error({type:EASEMOB_IM_CONNCTION_OPEN_ERROR,msg:"连接还未建立,请先登录或等待登录处理完毕"})},connection.prototype.subscribe=function(t){var e=_getJid(t,this),i=$pres({to:e,type:"subscribe"});t.message&&i.c("status").t(t.message).up(),t.nick&&i.c("nick",{xmlns:"http://jabber.org/protocol/nick"}).t(t.nick),this.sendCommand(i.tree())},connection.prototype.subscribed=function(t){var e=_getJid(t,this),i=$pres({to:e,type:"subscribed"});t.message&&i.c("status").t(t.message).up(),this.sendCommand(i.tree())},connection.prototype.unsubscribe=function(t){var e=_getJid(t,this),i=$pres({to:e,type:"unsubscribe"});t.message&&i.c("status").t(t.message),this.sendCommand(i.tree())},connection.prototype.unsubscribed=function(t){var e=_getJid(t,this),i=$pres({to:e,type:"unsubscribed"});t.message&&i.c("status").t(t.message).up(),this.sendCommand(i.tree())},connection.prototype.createRoom=function(t){var e,i=t.success||EMPTYFN,s=t.error||EMPTYFN;return e=$iq({to:t.rooomName,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"submit"}),this.context.stropheConn.sendIQ(e.tree(),i,s)},connection.prototype.join=function(t){var e=this.context.appKey+"_"+t.roomId+"@conference."+this.domain,i=e+"/"+this.context.userId,s=t.success||EMPTYFN,o=t.error||EMPTYFN,n=function(t){o({type:EASEMOB_IM_CONNCTION_JOINROOM_ERROR,msg:"加入房间失败",data:t})},r=$pres({from:this.context.jid,to:i}).c("x",{xmlns:Strophe.NS.MUC});this.context.stropheConn.sendIQ(r.tree(),s,n)},connection.prototype.listRooms=function(t){var e=$iq({to:t.server||"conference."+this.domain,from:this.context.jid,type:"get"}).c("query",{xmlns:Strophe.NS.DISCO_ITEMS}),i=t.success||EMPTYFN,s=function(t){var e=[];e=_parseRoomFn(t),i(e)},o=t.error||EMPTYFN,n=function(t){o({type:EASEMOB_IM_CONNCTION_GETROOM_ERROR,msg:"获取群组列表失败",data:t})};this.context.stropheConn.sendIQ(e.tree(),s,n)},connection.prototype.queryRoomMember=function(t){var e=(this.domain,[]),i=$iq({to:this.context.appKey+"_"+t.roomId+"@conference."+this.domain,type:"get"}).c("query",{xmlns:Strophe.NS.MUC+"#admin"}).c("item",{affiliation:"member"}),s=t.success||EMPTYFN,o=function(t){var i=t.getElementsByTagName("item");if(i)for(var o=0;o<i.length;o++){var n=i[o],r={jid:n.getAttribute("jid"),affiliation:"member"};e.push(r)}s(e)},n=t.error||EMPTYFN,r=function(t){n({type:EASEMOB_IM_CONNCTION_GETROOMMEMBER_ERROR,msg:"获取群组成员列表失败",data:t})};this.context.stropheConn.sendIQ(i.tree(),o,r)},connection.prototype.queryRoomInfo=function(t){var e=this.domain,i=$iq({to:this.context.appKey+"_"+t.roomId+"@conference."+e,type:"get"}).c("query",{xmlns:Strophe.NS.DISCO_INFO}),s=t.success||EMPTYFN,o=[],n=function(t){var i=t.getElementsByTagName("field");if(i)for(var n=0;n<i.length;n++){var r=i[n];if("owner"===r.getAttribute("label")){var a={jid:(r.textContent||r.text)+"@"+e,affiliation:"owner"};o.push(a)}}s(o)},r=t.error||EMPTYFN,a=function(t){r({type:EASEMOB_IM_CONNCTION_GETROOMINFO_ERROR,msg:"获取群组信息失败",data:t})};this.context.stropheConn.sendIQ(i.tree(),n,a)},connection.prototype.queryRoomOccupants=function(t){var e=t.success||EMPTYFN,i=function(t){var i=[];i=_parseRoomOccupantsFn(t),e(i)},s=t.error||EMPTYFN,o=function(t){s({type:EASEMOB_IM_CONNCTION_GETROOMOCCUPANTS_ERROR,msg:"获取群组出席者列表失败",data:t})},n={xmlns:Strophe.NS.DISCO_ITEMS},r=$iq({from:this.context.jid,to:this.context.appKey+"_"+t.roomId+"@conference."+this.domain,type:"get"}).c("query",n);this.context.stropheConn.sendIQ(r.tree(),i,o)},connection.prototype.setUserSig=function(t){var e=$pres({xmlns:"jabber:client"});t=t||"",e.c("status").t(t),this.sendCommand(e.tree())},connection.prototype.setPresence=function(t,e){var i=$pres({xmlns:"jabber:client"});t&&(e?(i.c("show").t(t),i.up().c("status").t(e)):i.c("show").t(t)),this.sendCommand(i.tree())},connection.prototype.getPresence=function(){var t=$pres({xmlns:"jabber:client"});this.sendCommand(t.tree())},connection.prototype.ping=function(t){t=t||{};var e=_getJid(t,this),i=$iq({from:this.context.jid||"",to:e,type:"get"}).c("ping",{xmlns:"urn:xmpp:ping"});suc=t.success||EMPTYFN,error=t.error||this.onError;var s=function(t){error({type:EASEMOB_IM_CONNCTION_PING_ERROR,msg:"ping失败",data:t})};this.isOpened()?this.context.stropheConn.sendIQ(i.tree(),suc,s):error({type:EASEMOB_IM_CONNCTION_OPEN_ERROR,msg:"连接还未建立,请先登录或等待登录处理完毕"})},connection.prototype.isOpened=function(){return this.context.status==STATUS_OPENED},connection.prototype.isOpening=function(){var t=this.context.status;return t==STATUS_DOLOGIN_USERGRID||t==STATUS_DOLOGIN_IM},connection.prototype.isClosing=function(){return this.context.status==STATUS_CLOSING},connection.prototype.isClosed=function(){return this.context.status==STATUS_CLOSED},connection.prototype.clear=function(){var t=this.context.appKey;this.context={status:STATUS_INIT,appKey:t}},connection.prototype.getChatRooms=function(t){if(!Utils.isCanSetRequestHeader)return void e.onError({type:EASEMOB_IM_CONNCTION_AUTH_ERROR,msg:"当前浏览器不支持聊天室功能"});var e=this,i=t.accessToken||this.context.accessToken;if(i){var s=t.apiUrl||(this.https?"https":"http")+"://a1.easemob.com",o=this.context.appName,n=this.context.orgName;if(!o||!n)return void e.onError({type:EASEMOB_IM_CONNCTION_AUTH_ERROR,msg:"token无效",data:null});var r=function(e,i){"function"==typeof t.success&&t.success(e)},a=function(t,i,s){t.error&&t.error_description&&e.onError({type:EASEMOB_IM_LOAD_CHATROOM_ERROR,msg:"获取聊天室失败,"+t.error_description,data:t,xhr:i})},h={url:s+"/"+n+"/"+o+"/chatrooms",dataType:"json",type:"get",headers:{Authorization:"Bearer "+i},success:r||EMPTYFN,error:a||EMPTYFN};Utils.ajax(h)}else e.onError({type:EASEMOB_IM_CONNCTION_AUTH_ERROR,msg:"token无效",data:null})},connection.prototype.joinChatRoom=function(t){var e=this.context.appKey+"_"+t.roomId+"@conference."+this.domain,i=e+"/"+this.context.userId,s=t.success||EMPTYFN,o=t.error||EMPTYFN,n=function(t){o({type:EASEMOB_IM_CONNCTION_JOINROOM_ERROR,msg:"加入聊天室失败",data:t})},r=$pres({from:this.context.jid,to:i}).c("x",{xmlns:Strophe.NS.MUC+"#user"}).c("item",{affiliation:"member",role:"participant"}).up().up().c("roomtype",{xmlns:"easemob:x:roomtype",type:"chatroom"});this.context.stropheConn.sendIQ(r.tree(),s,n)},connection.prototype.quitChatRoom=function(t){var e=this.context.appKey+"_"+t.roomId+"@conference."+this.domain,i=e+"/"+this.context.userId,s=t.success||EMPTYFN,o=t.error||EMPTYFN,n=function(t){o({type:EASEMOB_IM_CONNCTION_JOINROOM_ERROR,msg:"退出房间失败",data:t})},r=$pres({from:this.context.jid,to:i,type:"unavailable"}).c("x",{xmlns:Strophe.NS.MUC+"#user"}).c("item",{affiliation:"none",role:"none"}).up().up().c("roomtype",{xmlns:"easemob:x:roomtype",type:"chatroom"});this.context.stropheConn.sendIQ(r.tree(),s,n)},connection}(),EMPTYFN=function(){};tempIndex=0,EASEMOB_IM_CONNCTION_USER_NOT_ASSIGN_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_OPEN_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_AUTH_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_OPEN_USERGRID_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_ATTACH_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_ATTACH_USERGRID_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_REOPEN_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_SERVER_CLOSE_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_SERVER_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_IQ_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_PING_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_NOTIFYVERSION_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_GETROSTER_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_CROSSDOMAIN_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_LISTENING_OUTOF_MAXRETRIES=tempIndex++,EASEMOB_IM_CONNCTION_RECEIVEMSG_CONTENTERROR=tempIndex++,EASEMOB_IM_CONNCTION_JOINROOM_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_GETROOM_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_GETROOMINFO_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_GETROOMMEMBER_ERROR=tempIndex++,EASEMOB_IM_CONNCTION_GETROOMOCCUPANTS_ERROR=tempIndex++,EASEMOB_IM_UPLOADFILE_BROWSER_ERROR=tempIndex++,EASEMOB_IM_UPLOADFILE_ERROR=tempIndex++,EASEMOB_IM_UPLOADFILE_NO_LOGIN=tempIndex++,EASEMOB_IM_UPLOADFILE_NO_FILE=tempIndex++,EASEMOB_IM_DOWNLOADFILE_ERROR=tempIndex++,EASEMOB_IM_DOWNLOADFILE_NO_LOGIN=tempIndex++,EASEMOB_IM_DOWNLOADFILE_BROWSER_ERROR=tempIndex++,EASEMOB_IM_RESISTERUSER_ERROR=tempIndex++,EASEMOB_IM_LOAD_CHATROOM_ERROR=tempIndex++,EASEMOB_IM_JOIN_CHATROOM_ERROR=tempIndex++,EASEMOB_IM_QUIT_CHATROOM_ERROR=tempIndex++,tempIndex=0,EASEMOB_IM_MESSAGE_REC_TEXT=tempIndex++,EASEMOB_IM_MESSAGE_REC_TEXT_ERROR=tempIndex++,EASEMOB_IM_MESSAGE_REC_EMOTION=tempIndex++,EASEMOB_IM_MESSAGE_REC_PHOTO=tempIndex++,EASEMOB_IM_MESSAGE_REC_AUDIO=tempIndex++,EASEMOB_IM_MESSAGE_REC_AUDIO_FILE=tempIndex++,EASEMOB_IM_MESSAGE_REC_VEDIO=tempIndex++,EASEMOB_IM_MESSAGE_REC_VEDIO_FILE=tempIndex++,EASEMOB_IM_MESSAGE_REC_FILE=tempIndex++,EASEMOB_IM_MESSAGE_SED_TEXT=tempIndex++,EASEMOB_IM_MESSAGE_SED_EMOTION=tempIndex++,EASEMOB_IM_MESSAGE_SED_PHOTO=tempIndex++,EASEMOB_IM_MESSAGE_SED_AUDIO=tempIndex++,EASEMOB_IM_MESSAGE_SED_AUDIO_FILE=tempIndex++,EASEMOB_IM_MESSAGE_SED_VEDIO=tempIndex++,EASEMOB_IM_MESSAGE_SED_VEDIO_FILE=tempIndex++,EASEMOB_IM_MESSAGE_SED_FILE=tempIndex++,EASEMOB_IM_FILESIZE_LIMIT=10485760,tempIndex=0;var STATUS_INIT=tempIndex++,STATUS_DOLOGIN_USERGRID=tempIndex++,STATUS_DOLOGIN_IM=tempIndex++,STATUS_OPENED=tempIndex++,STATUS_CLOSING=tempIndex++,STATUS_CLOSED=tempIndex++;delete tempIndex,Easemob.im.Connection=Connection,Easemob.im.EmMessage=EmMessage,Easemob.im.Helper=Easemob.im.Utils=Utils,window.Easemob=Easemob}(window,void 0);