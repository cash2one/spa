!function(t){function e(t){return"[object Object]"===Object.prototype.toString.call(t)}function n(t,a,o){function i(t){for(var a in t)t.hasOwnProperty(a)&&(e(t[a])?r[a]=n(r[a],t[a]):r[a]=t[a])}if(0==Object.keys(a).length)return t;var r,t=e(t)?t:{};return o=o!==!1,r=o?{}:t,o&&i(t),i(a),r}function a(t){function e(t){var e=t.getBoundingClientRect(),n=document.documentElement.clientTop,a=document.documentElement.clientLeft;return{top:e.top-n,right:e.right-a,bottom:e.bottom-n,left:e.left-a,width:e.width}}function a(t,e,n,a){var o=E.children[t],a=!1!==a,i=o&&o.style;i&&(i.webkitTransitionDuration=i.MozTransitionDuration=i.msTransitionDuration=i.OTransitionDuration=i.transitionDuration=n+"ms",i.webkitTransform="translate("+e+"px,0)translateZ(0)",i.msTransform=i.MozTransform=i.OTransform="translateX("+e+"px)",a||setTimeout(function(){i.webkitTransform="translate("+e+"px,0)"},n),T[t]=e)}function o(t){return(m.length+t%m.length)%m.length}function i(e,n){var i=m[o(e)],r=i.dataset.index-0,l=m[o(r-1)],s=l.dataset.index,d=T[r];return r-1>=0?(a(s,-t.oneEleWidth+parseFloat(w[r]||0),0),T[s]=d):(a(s,parseFloat(i.dataset.tx||0)-parseFloat(l.dataset.tx||0)-t.oneEleWidth+parseFloat(w[r]||0),0),T[s]=-t.oneEleWidth-parseFloat(l.dataset.tx||0)+d),s}function r(e,n){var i=m[o(e)],r=i.dataset.index-0,l=m[o(r+1)],s=l.dataset.index,d=T[r];return r+1<m.length?(a(s,t.oneEleWidth+parseFloat(w[r]||0),0),T[s]=d):(a(s,t.oneEleWidth+parseFloat(w[r]||0)+parseFloat(i.dataset.tx||0)+parseFloat(l.dataset.tx||0),0),T[s]=t.oneEleWidth+parseFloat(i.dataset.tx||0)+d),s}function l(e,n,r,l){var s=t.index+t.showEleCount-e+2,d=[];T[o(s)]=(m[o(s)].dataset.currentTx||0)-0+n,d[o(s)];for(var h=s,c=t.index-e;h>=c;h--)d.push(i(h,r));d.forEach(function(t,e){r>0&&e==d.length-1?a(t,T[t],0,l):a(t,T[t],r,l)})}function s(e,n,i,l){var s=e+t.index+t.showEleCount+1,d=t.index-1,h=[];T[o(d)]=(m[o(d)].dataset.currentTx||0)-0+n,h.push(o(d));for(var c=d,u=s;c<=u;c++)h.push(r(c,i));h.forEach(function(t){a(t,T[t],i,l)})}function d(t){u();var e=t.touches[0];x={x:e.clientX,y:e.clientY,time:+new Date},W=!0,p=void 0,v={},E.addEventListener("touchmove",h,!1),E.addEventListener("touchend",c,!1),E.addEventListener("touchcancel",c,!1)}function h(e){var a=e.touches[0];if(v={x:a.clientX-x.x,y:a.clientY-x.y},"undefined"==typeof p&&(p=!!(Math.abs(v.x)>Math.abs(v.y))),p){e.preventDefault(),g=Math.ceil(v.x/t.oneEleWidth);var o=Math.abs(g);v.x<0?s(o,v.x,0):l(o,v.x,0),W=!1}w=n({},T)}function c(e){if(p){b+=v.x;for(var n=0,a=m.length;n<a;n++)m[n].dataset.currentTx=T[n]||0;t.index=o(Math.ceil(-b/t.oneEleWidth)-1);var i=-m[t.index].dataset.tx-T[t.index];y=!0,v.x<0?Math.abs(i)>t.oneEleWidth/t.overlap?(i-=t.oneEleWidth,l(0,i,300,!1)):s(0,i,300,!1):l(0,i,300,!1),setTimeout(function(){y=!1},300),b+=i;for(var n=0,a=m.length;n<a;n++)m[n].dataset.currentTx=T[n]||0;t.index=o(Math.ceil(-b/t.oneEleWidth)),E.dataset.index=t.index,E.dataset.moveTotal=b,E.removeEventListener("touchmove",h,!1),E.removeEventListener("touchend",c,!1),E.removeEventListener("touchcancel",c,!1)}}function u(){if(y){for(var t=0,e=m.length;t<e;t++){var n=m[t].style;n.webkitTransitionDuration=n.MozTransitionDuration=n.msTransitionDuration=n.OTransitionDuration=n.transitionDuration="0ms"}y=!1}}function f(){}var x,v,E,p,m,g,T={},w={},W=!1,b=0,y=!1,F=new f;if(t=n({container:null,callback:function(){},transitionEnd:null,oneEleWidth:0,index:0,showEleCount:1,overlap:2},t),!t.container)throw new Error("ScrollHori 窗器不能为空。");if(1!=t.container.dataset.hasScroll&&(E=t.container,E.dataset.hasScroll=!0,!(t.container.children.length<t.showEleCount))){if(E.children.length<2*t.showEleCount+2){var D=E.innerHTML;E.children.length<3&&(D+=D),E.innerHTML+=D}m=E.children;var M=getComputedStyle(m[0]);t.oneEleWidth=t.oneEleWidth||(e(m[0]).width||m[0].offsetWidth||parseFloat(M.width))+parseFloat(M.marginLeft)+parseFloat(M.marginRight);for(var L=0,C=m.length;L<C;L++)m[L].dataset.tx=L*t.oneEleWidth,m[L].dataset.index=L;if("undefined"!=typeof E.dataset.index){for(var L=0,C=m.length;L<C;L++)T[L]=m[L].dataset.currentTx-0;t.index=E.dataset.index-0,b=E.dataset.moveTotal-0}else a(m.length-1,-m.length*t.oneEleWidth,0,!1),m[m.length-1].dataset.currentTx=-m.length*t.oneEleWidth,T[m.length-1]=-m.length*t.oneEleWidth;return w=n({},T),E.addEventListener("touchstart",d,!1),f.prototype.stopAnimation=u,F}}t.scrollHori=a}(window);