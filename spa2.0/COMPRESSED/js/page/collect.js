!function(){function e(e,f){r||(r=!0,v=e||v+1,g.ClassClear("none"),h.Class("none"),p=!1,$.ajax({url:"../api/v2/profile/user/favorite",isReplaceUrl:!0,data:{token:$.$.userToken,clubId:"9358"==$.$.visitChannel?"":$.$.clubID,page:v,pageSize:I},success:function(e){if("200"!=e.statusCode)return $.tipShow(e.msg||"数据请求失败！");if("9358"!=$.$.visitChannel){for(e=e.respData,c="",s=0,o=e.length;s<o;s++)d[e[s].techId]||(d[e[s].techId]=1,c+=t(e[s]));1==v?(n.Html(c),c?n.ClassClear("nullData"):(n.Class("nullData"),p=!0),D=u[0].scrollHeight):(n.Html(c,!0),""==c&&(p=!0,h.ClassClear("none")))}else{for(a={},s=0;s<e.respData.length;s++)d[e.respData[s].techId]||(d[e.respData[s].techId]=1,a[e.respData[s].clubId]||(a[e.respData[s].clubId]={clubName:e.respData[s].clubName,clubId:e.respData[s].clubId,list:[]}),a[e.respData[s].clubId].list.push(e.respData[s]));c="";var C,S,m,_=0,I="";for(C in a){if(m=!1,v>1&&0==_&&(S=$("#content>div>div:nth-of-type(2)>div>div:last-child"),S.Attr("hh")==a[C].clubId)){for(l=a[C].list,s=0;s<l.length;s++)I+=t(l[s]);S.Html(I,!0),m=!0}if(!m){for(c+="<div hh='"+a[C].clubId+"'><div class='header"+(1==v&&0==_?" first":"")+"'>"+a[C].clubName+"</div>",l=a[C].list,s=0;s<l.length;s++)c+=t(l[s]);c+="</div>"}_++}1==v?(u.Html(c),c?u.ClassClear("nullData"):(u.Class("nullData"),p=!0),D=u[0].scrollHeight):(u.Html(c,!0),""==c&&""==I&&(p=!0,h.ClassClear("none")))}i(),r=!1,g.Class("none"),f&&f()}}))}function t(e){return e.tags&&0!=e.tags.length||(e.tags=[{tagName:"(无)"}]),'<div class="item" hh="'+e.techId+'">                            <div>                                <div style="background-image: url(\''+(e.avatarUrl||$.$.defaultHeader)+'\')"></div>                                <div class="'+e.status+'">'+("free"==e.status?"闲":"忙")+"</div>                            </div>                            <div>                                <div>                                    <div><div>"+(e.techName||$.$.defaultTechName)+"</div>[<div>"+(e.serialNo||"")+'</div>]</div>                                    <div>                                        <div class="stars"><div style="width:'+e.star+'%"></div></div>                                        <div>'+(e.commentCount||0)+"评论</div>                                    </div>                                </div>                                <div>"+e.tags[0].tagName+"</div>                                <div>                                    <div>"+(e.description||"")+"</div>                                    <div>预约</div>                                </div>                            </div>                        </div>"}function i(){$("div#collect #content>div>div:nth-of-type(2)>div>div>div.item",!0).Event("click",function(e,t){$.sessionStorage("collect_data",u.Html()),$.sessionStorage("collect_page",v),$.sessionStorage("collect_page_height",D),$.sessionStorage("collect_end",p),$.sessionStorage("collect_ID",JSON.stringify(d)),$.sessionStorage("collect_top",f[0].scrollTop),$.page("technicianDetail&id="+t.getAttribute("hh"))},!0)}var s,a,l,o,n,c="",d=JSON.parse($.sessionStorage("collect_ID")||"{}"),r=!1,v=1,g=$("#loadTip"),h=$("#finishTip"),p="true"==($.sessionStorage("collect_end")||"false"),u=$("#content>div>div:nth-of-type(2)>div"),f=$("#content"),C=$.sessionStorage("collect_top"),S=$.sessionStorage("collect_page"),m=$.sessionStorage("collect_data"),_=-.5,D=$.sessionStorage("collect_page_height"),I=10;"9358"!=$.$.visitChannel&&(u.Html("<div></div>"),n=$("#content>div>div:nth-of-type(2)>div>div")),"9358"==$.$.visitChannel&&$("#content>div>div#title>div:nth-of-type(2)").Click(function(){$.page("personal",-1,!0)}),f.Event("scroll",function(t){!p&&f[0].scrollTop+f[0].clientHeight-(v+_-1)*D>=0&&e()}),m?(v=parseInt(S),u.Html(m),setTimeout(function(){f[0].scrollTop=C},1),i(),p&&h.ClassClear("none"),$.pageSwitch()):e(1,$.pageSwitch()),$.sessionStorageClear("collect_ID"),$.sessionStorageClear("collect_data"),$.sessionStorageClear("collect_end"),$.sessionStorageClear("collect_top"),$.sessionStorageClear("collect_page"),$.sessionStorageClear("collect_page_height")}();