!function(e,t){"function"==typeof define&&(define.amd||define.cmd)?define(function(){return t(e)}):t(e,!0)}(this,function(e,t){function n(t,n,a){e.WeixinJSBridge?WeixinJSBridge.invoke(t,i(n),function(e){o(t,e,a)}):l(t,a)}function a(t,n,a){e.WeixinJSBridge?WeixinJSBridge.on(t,function(e){a&&a.trigger&&a.trigger(e),o(t,e,n)}):a?l(t,a):l(t,n)}function i(e){return e=e||{},e.appId=E.appId,e.verifyAppId=E.appId,e.verifySignType="sha1",e.verifyTimestamp=E.timestamp+"",e.verifyNonceStr=E.nonceStr,e.verifySignature=E.signature,e}function r(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,"package":e["package"],paySign:e.paySign,signType:e.signType||"SHA1"}}function o(e,t,n){var a,i,r;switch(delete t.err_code,delete t.err_desc,delete t.err_detail,a=t.errMsg,a||(a=t.err_msg,delete t.err_msg,a=s(e,a),t.errMsg=a),n=n||{},n._complete&&(n._complete(t),delete n._complete),a=t.errMsg||"",E.debug&&!n.isInnerInvoke&&alert(JSON.stringify(t)),i=a.indexOf(":"),r=a.substring(i+1)){case"ok":n.success&&n.success(t);break;case"cancel":n.cancel&&n.cancel(t);break;default:n.fail&&n.fail(t)}n.complete&&n.complete(t)}function s(e,t){var n,a,i=e,r=g[i];return r&&(i=r),n="ok",t&&(a=t.indexOf(":"),n=t.substring(a+1),"confirm"==n&&(n="ok"),"failed"==n&&(n="fail"),-1!=n.indexOf("failed_")&&(n=n.substring(7)),-1!=n.indexOf("fail_")&&(n=n.substring(5)),n=n.replace(/_/g," "),n=n.toLowerCase(),("access denied"==n||"no permission to execute"==n)&&(n="permission denied"),"config"==i&&"function not exist"==n&&(n="ok"),""==n&&(n="fail")),t=i+":"+n}function c(e){var t,n,a,i;if(e){for(t=0,n=e.length;n>t;++t)a=e[t],i=p[a],i&&(e[t]=i);return e}}function l(e,t){if(!(!E.debug||t&&t.isInnerInvoke)){var n=g[e];n&&(e=n),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function u(){I||T||E.debug||"6.0.2">_||L.systemType<0||k||(k=!0,L.appId=E.appId,L.initTime=$.initEndTime-$.initStartTime,L.preVerifyTime=$.preVerifyEndTime-$.preVerifyStartTime,N.getNetworkType({isInnerInvoke:!0,success:function(e){var t,n;L.networkType=e.networkType,t="http://open.weixin.qq.com/sdk/report?v="+L.version+"&o="+L.isPreVerifyOk+"&s="+L.systemType+"&c="+L.clientVersion+"&a="+L.appId+"&n="+L.networkType+"&i="+L.initTime+"&p="+L.preVerifyTime+"&u="+L.url,n=new Image,n.src=t}}))}function d(){return(new Date).getTime()}function h(t){b&&(e.WeixinJSBridge?t():m.addEventListener&&m.addEventListener("WeixinJSBridgeReady",t,!1))}function f(){N.invoke||(N.invoke=function(t,n,a){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,i(n),a)},N.on=function(t,n){e.WeixinJSBridge&&WeixinJSBridge.on(t,n)})}var p,g,m,v,y,C,I,T,b,w,S,_,k,x,$,L,E,M,D,N;if(!e.jWeixin)return p={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest"},g=function(){var e,t={};for(e in p)t[p[e]]=e;return t}(),m=e.document,v=m.title,y=navigator.userAgent.toLowerCase(),C=navigator.platform.toLowerCase(),I=!(!C.match("mac")&&!C.match("win")),T=-1!=y.indexOf("wxdebugger"),b=-1!=y.indexOf("micromessenger"),w=-1!=y.indexOf("android"),S=-1!=y.indexOf("iphone")||-1!=y.indexOf("ipad"),_=function(){var e=y.match(/micromessenger\/(\d+\.\d+\.\d+)/)||y.match(/micromessenger\/(\d+\.\d+)/);return e?e[1]:""}(),k=!1,x=!1,$={initStartTime:d(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},L={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:S?1:w?2:-1,clientVersion:_,url:encodeURIComponent(location.href)},E={},M={_completes:[]},D={state:0,data:{}},h(function(){$.initEndTime=d()}),N={config:function(e){E=e,l("config",e);var t=E.check!==!1;h(function(){var e,a,i;if(t)n(p.config,{verifyJsApiList:c(E.jsApiList)},function(){M._complete=function(e){$.preVerifyEndTime=d(),D.state=1,D.data=e},M.success=function(){L.isPreVerifyOk=0},M.fail=function(e){M._fail?M._fail(e):D.state=-1};var e=M._completes;return e.push(function(){u()}),M.complete=function(){for(var t=0,n=e.length;n>t;++t)e[t]();M._completes=[]},M}()),$.preVerifyStartTime=d();else{for(D.state=1,e=M._completes,a=0,i=e.length;i>a;++a)e[a]();M._completes=[]}}),E.beta&&f()},ready:function(e){0!=D.state?e():(M._completes.push(e),!b&&E.debug&&e())},error:function(e){"6.0.2">_||x||(x=!0,-1==D.state?e(D.data):M._fail=e)},checkJsApi:function(e){var t=function(e){var t,n,a=e.checkResult;for(t in a)n=g[t],n&&(a[n]=a[t],delete a[t]);return e};n("checkJsApi",{jsApiList:c(e.jsApiList)},function(){return e._complete=function(e){if(w){var n=e.checkResult;n&&(e.checkResult=JSON.parse(n))}e=t(e)},e}())},onMenuShareTimeline:function(e){a(p.onMenuShareTimeline,{complete:function(){n("shareTimeline",{title:e.title||v,desc:e.title||v,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){console.log(e),a(p.onMenuShareAppMessage,{complete:function(){console.log({title:e.title||v,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""}),n("sendAppMessage",{title:e.title||v,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){a(p.onMenuShareQQ,{complete:function(){n("shareQQ",{title:e.title||v,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){a(p.onMenuShareWeibo,{complete:function(){n("shareWeiboApp",{title:e.title||v,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){a(p.onMenuShareQZone,{complete:function(){n("shareQZone",{title:e.title||v,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},startRecord:function(e){n("startRecord",{},e)},stopRecord:function(e){n("stopRecord",{},e)},onVoiceRecordEnd:function(e){a("onVoiceRecordEnd",e)},playVoice:function(e){n("playVoice",{localId:e.localId},e)},pauseVoice:function(e){n("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){n("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){a("onVoicePlayEnd",e)},uploadVoice:function(e){n("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){n("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){n("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){n("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},function(){return e._complete=function(e){if(w){var t=e.localIds;t&&(e.localIds=JSON.parse(t))}},e}())},previewImage:function(e){n(p.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){n("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){n("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getNetworkType:function(e){var t=function(e){var t,n,a,i=e.errMsg;if(e.errMsg="getNetworkType:ok",t=e.subtype,delete e.subtype,t)e.networkType=t;else switch(n=i.indexOf(":"),a=i.substring(n+1)){case"wifi":case"edge":case"wwan":e.networkType=a;break;default:e.errMsg="getNetworkType:fail"}return e};n("getNetworkType",{},function(){return e._complete=function(e){e=t(e)},e}())},openLocation:function(e){n("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)},getLocation:function(e){e=e||{},n(p.getLocation,{type:e.type||"wgs84"},function(){return e._complete=function(e){delete e.type},e}())},hideOptionMenu:function(e){n("hideOptionMenu",{},e)},showOptionMenu:function(e){n("showOptionMenu",{},e)},closeWindow:function(e){e=e||{},n("closeWindow",{},e)},hideMenuItems:function(e){n("hideMenuItems",{menuList:e.menuList},e)},showMenuItems:function(e){n("showMenuItems",{menuList:e.menuList},e)},hideAllNonBaseMenuItem:function(e){n("hideAllNonBaseMenuItem",{},e)},showAllNonBaseMenuItem:function(e){n("showAllNonBaseMenuItem",{},e)},scanQRCode:function(e){e=e||{},n("scanQRCode",{needResult:e.needResult||0,scanType:e.scanType||["qrCode","barCode"]},function(){return e._complete=function(e){var t,n;S&&(t=e.resultStr,t&&(n=JSON.parse(t),e.resultStr=n&&n.scan_code&&n.scan_code.scan_result))},e}())},openProductSpecificView:function(e){n(p.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)},addCard:function(e){var t,a,i,r,o=e.cardList,s=[];for(t=0,a=o.length;a>t;++t)i=o[t],r={card_id:i.cardId,card_ext:i.cardExt},s.push(r);n(p.addCard,{card_list:s},function(){return e._complete=function(e){var t,n,a,i=e.card_list;if(i){for(i=JSON.parse(i),t=0,n=i.length;n>t;++t)a=i[t],a.cardId=a.card_id,a.cardExt=a.card_ext,a.isSuccess=!!a.is_succ,delete a.card_id,delete a.card_ext,delete a.is_succ;e.cardList=i,delete e.card_list}},e}())},chooseCard:function(e){n("chooseCard",{app_id:E.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},function(){return e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e}())},openCard:function(e){var t,a,i,r,o=e.cardList,s=[];for(t=0,a=o.length;a>t;++t)i=o[t],r={card_id:i.cardId,code:i.code},s.push(r);n(p.openCard,{card_list:s},e)},chooseWXPay:function(e){n(p.chooseWXPay,r(e),e)}},t&&(e.wx=e.jWeixin=N),N});var QRCode;!function(){function e(e){this.mode=c.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,n=this.data.length;t<n;t++){var a=[],i=this.data.charCodeAt(t);i>65536?(a[0]=240|(1835008&i)>>>18,a[1]=128|(258048&i)>>>12,a[2]=128|(4032&i)>>>6,a[3]=128|63&i):i>2048?(a[0]=224|(61440&i)>>>12,a[1]=128|(4032&i)>>>6,a[2]=128|63&i):i>128?(a[0]=192|(1984&i)>>>6,a[1]=128|63&i):a[0]=i,this.parsedData.push(a)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function t(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function n(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var a=0;a<e.length-n;a++)this.num[a]=e[a+n]}function a(e,t){this.totalCount=e,this.dataCount=t}function i(){this.buffer=[],this.length=0}function r(){var e=!1,t=navigator.userAgent;if(/android/i.test(t)){e=!0;var n=t.toString().match(/android ([0-9]\.[0-9])/i);n&&n[1]&&(e=parseFloat(n[1]))}return e}function o(e,t){for(var n=1,a=s(e),i=0,r=p.length;i<=r;i++){var o=0;switch(t){case l.L:o=p[i][0];break;case l.M:o=p[i][1];break;case l.Q:o=p[i][2];break;case l.H:o=p[i][3]}if(a<=o)break;n++}if(n>p.length)throw new Error("Too long data");return n}function s(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}e.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,n=this.parsedData.length;t<n;t++)e.put(this.parsedData[t],8)}},t.prototype={addData:function(t){var n=new e(t);this.dataList.push(n),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++){this.modules[a]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[a][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,n),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var a=-1;a<=7;a++)t+a<=-1||this.moduleCount<=t+a||(0<=n&&n<=6&&(0==a||6==a)||0<=a&&a<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=a&&a<=4?this.modules[e+n][t+a]=!0:this.modules[e+n][t+a]=!1)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var a=d.getLostPoint(this);(0==n||e>a)&&(e=a,t=n)}return t},createMovieClip:function(e,t,n){var a=e.createEmptyMovieClip(t,n),i=1;this.make();for(var r=0;r<this.modules.length;r++)for(var o=r*i,s=0;s<this.modules[r].length;s++){var c=s*i,l=this.modules[r][s];l&&(a.beginFill(0,100),a.moveTo(c,o),a.lineTo(c+i,o),a.lineTo(c+i,o+i),a.lineTo(c,o+i),a.endFill())}return a},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=d.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var a=e[t],i=e[n];if(null==this.modules[a][i])for(var r=-2;r<=2;r++)for(var o=-2;o<=2;o++)r==-2||2==r||o==-2||2==o||0==r&&0==o?this.modules[a+r][i+o]=!0:this.modules[a+r][i+o]=!1}},setupTypeNumber:function(e){for(var t=d.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var a=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=a}for(var n=0;n<18;n++){var a=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=a}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,a=d.getBCHTypeInfo(n),i=0;i<15;i++){var r=!e&&1==(a>>i&1);i<6?this.modules[i][8]=r:i<8?this.modules[i+1][8]=r:this.modules[this.moduleCount-15+i][8]=r}for(var i=0;i<15;i++){var r=!e&&1==(a>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=r:i<9?this.modules[8][15-i-1+1]=r:this.modules[8][15-i-1]=r}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,a=this.moduleCount-1,i=7,r=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var s=0;s<2;s++)if(null==this.modules[a][o-s]){var c=!1;r<e.length&&(c=1==(e[r]>>>i&1));var l=d.getMask(t,a,o-s);l&&(c=!c),this.modules[a][o-s]=c,i--,i==-1&&(r++,i=7)}if(a+=n,a<0||this.moduleCount<=a){a-=n,n=-n;break}}}},t.PAD0=236,t.PAD1=17,t.createData=function(e,n,r){for(var o=a.getRSBlocks(e,n),s=new i,c=0;c<r.length;c++){var l=r[c];s.put(l.mode,4),s.put(l.getLength(),d.getLengthInBits(l.mode,e)),l.write(s)}for(var u=0,c=0;c<o.length;c++)u+=o[c].dataCount;if(s.getLengthInBits()>8*u)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*u+")");for(s.getLengthInBits()+4<=8*u&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;;){if(s.getLengthInBits()>=8*u)break;if(s.put(t.PAD0,8),s.getLengthInBits()>=8*u)break;s.put(t.PAD1,8)}return t.createBytes(s,o)},t.createBytes=function(e,t){for(var a=0,i=0,r=0,o=new Array(t.length),s=new Array(t.length),c=0;c<t.length;c++){var l=t[c].dataCount,u=t[c].totalCount-l;i=Math.max(i,l),r=Math.max(r,u),o[c]=new Array(l);for(var h=0;h<o[c].length;h++)o[c][h]=255&e.buffer[h+a];a+=l;var f=d.getErrorCorrectPolynomial(u),p=new n(o[c],f.getLength()-1),g=p.mod(f);s[c]=new Array(f.getLength()-1);for(var h=0;h<s[c].length;h++){var m=h+g.getLength()-s[c].length;s[c][h]=m>=0?g.get(m):0}}for(var v=0,h=0;h<t.length;h++)v+=t[h].totalCount;for(var y=new Array(v),C=0,h=0;h<i;h++)for(var c=0;c<t.length;c++)h<o[c].length&&(y[C++]=o[c][h]);for(var h=0;h<r;h++)for(var c=0;c<t.length;c++)h<s[c].length&&(y[C++]=s[c][h]);return y};for(var c={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},l={L:1,M:0,Q:3,H:2},u={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},d={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;d.getBCHDigit(t)-d.getBCHDigit(d.G15)>=0;)t^=d.G15<<d.getBCHDigit(t)-d.getBCHDigit(d.G15);return(e<<10|t)^d.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;d.getBCHDigit(t)-d.getBCHDigit(d.G18)>=0;)t^=d.G18<<d.getBCHDigit(t)-d.getBCHDigit(d.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return d.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case u.PATTERN000:return(t+n)%2==0;case u.PATTERN001:return t%2==0;case u.PATTERN010:return n%3==0;case u.PATTERN011:return(t+n)%3==0;case u.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case u.PATTERN101:return t*n%2+t*n%3==0;case u.PATTERN110:return(t*n%2+t*n%3)%2==0;case u.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new n([1],0),a=0;a<e;a++)t=t.multiply(new n([1,h.gexp(a)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case c.MODE_NUMBER:return 10;case c.MODE_ALPHA_NUM:return 9;case c.MODE_8BIT_BYTE:return 8;case c.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case c.MODE_NUMBER:return 12;case c.MODE_ALPHA_NUM:return 11;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case c.MODE_NUMBER:return 14;case c.MODE_ALPHA_NUM:return 13;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,a=0;a<t;a++)for(var i=0;i<t;i++){for(var r=0,o=e.isDark(a,i),s=-1;s<=1;s++)if(!(a+s<0||t<=a+s))for(var c=-1;c<=1;c++)i+c<0||t<=i+c||0==s&&0==c||o==e.isDark(a+s,i+c)&&r++;r>5&&(n+=3+r-5)}for(var a=0;a<t-1;a++)for(var i=0;i<t-1;i++){var l=0;e.isDark(a,i)&&l++,e.isDark(a+1,i)&&l++,e.isDark(a,i+1)&&l++,e.isDark(a+1,i+1)&&l++,0!=l&&4!=l||(n+=3)}for(var a=0;a<t;a++)for(var i=0;i<t-6;i++)e.isDark(a,i)&&!e.isDark(a,i+1)&&e.isDark(a,i+2)&&e.isDark(a,i+3)&&e.isDark(a,i+4)&&!e.isDark(a,i+5)&&e.isDark(a,i+6)&&(n+=40);for(var i=0;i<t;i++)for(var a=0;a<t-6;a++)e.isDark(a,i)&&!e.isDark(a+1,i)&&e.isDark(a+2,i)&&e.isDark(a+3,i)&&e.isDark(a+4,i)&&!e.isDark(a+5,i)&&e.isDark(a+6,i)&&(n+=40);for(var u=0,i=0;i<t;i++)for(var a=0;a<t;a++)e.isDark(a,i)&&u++;var d=Math.abs(100*u/t/t-50)/5;return n+=10*d}},h={glog:function(e){if(e<1)throw new Error("glog("+e+")");return h.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return h.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},f=0;f<8;f++)h.EXP_TABLE[f]=1<<f;for(var f=8;f<256;f++)h.EXP_TABLE[f]=h.EXP_TABLE[f-4]^h.EXP_TABLE[f-5]^h.EXP_TABLE[f-6]^h.EXP_TABLE[f-8];for(var f=0;f<255;f++)h.LOG_TABLE[h.EXP_TABLE[f]]=f;n.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),a=0;a<this.getLength();a++)for(var i=0;i<e.getLength();i++)t[a+i]^=h.gexp(h.glog(this.get(a))+h.glog(e.get(i)));return new n(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=h.glog(this.get(0))-h.glog(e.get(0)),a=new Array(this.getLength()),i=0;i<this.getLength();i++)a[i]=this.get(i);for(var i=0;i<e.getLength();i++)a[i]^=h.gexp(h.glog(e.get(i))+t);return new n(a,0).mod(e)}},a.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],a.getRSBlocks=function(e,t){var n=a.getRsBlockTable(e,t);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var i=n.length/3,r=[],o=0;o<i;o++)for(var s=n[3*o+0],c=n[3*o+1],l=n[3*o+2],u=0;u<s;u++)r.push(new a(c,l));return r},a.getRsBlockTable=function(e,t){switch(t){case l.L:return a.RS_BLOCK_TABLE[4*(e-1)+0];case l.M:return a.RS_BLOCK_TABLE[4*(e-1)+1];case l.Q:return a.RS_BLOCK_TABLE[4*(e-1)+2];case l.H:return a.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},i.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var p=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],g=function(){function e(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function t(e,t){var n=this;if(n._fFail=t,n._fSuccess=e,null===n._bSupportDataURI){var a=document.createElement("img"),i=function(){n._bSupportDataURI=!1,n._fFail&&n._fFail.call(n)},r=function(){n._bSupportDataURI=!0,n._fSuccess&&n._fSuccess.call(n)};return a.onabort=i,a.onerror=i,a.onload=r,void(a.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}n._bSupportDataURI===!0&&n._fSuccess?n._fSuccess.call(n):n._bSupportDataURI===!1&&n._fFail&&n._fFail.call(n)}if(this._android&&this._android<=2.1){var n=1/window.devicePixelRatio,a=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(e,t,i,r,o,s,c,l,u){if("nodeName"in e&&/img/i.test(e.nodeName))for(var d=arguments.length-1;d>=1;d--)arguments[d]=arguments[d]*n;else"undefined"==typeof l&&(arguments[1]*=n,arguments[2]*=n,arguments[3]*=n,arguments[4]*=n);a.apply(this,arguments)}}var i=function(e,t){this._bIsPainted=!1,this._android=r(),this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,e.appendChild(this._elCanvas),this._el=e,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return i.prototype.draw=function(e){var t=this._elImage,n=this._oContext,a=this._htOption,i=e.getModuleCount(),r=a.width/i,o=a.height/i,s=Math.round(r),c=Math.round(o);t.style.display="none",this.clear();for(var l=0;l<i;l++)for(var u=0;u<i;u++){var d=e.isDark(l,u),h=u*r,f=l*o;n.strokeStyle=d?a.colorDark:a.colorLight,n.lineWidth=1,n.fillStyle=d?a.colorDark:a.colorLight,n.fillRect(h,f,r,o),n.strokeRect(Math.floor(h)+.5,Math.floor(f)+.5,s,c),n.strokeRect(Math.ceil(h)-.5,Math.ceil(f)-.5,s,c)}this._bIsPainted=!0},i.prototype.makeImage=function(){this._bIsPainted&&t.call(this,e)},i.prototype.isPainted=function(){return this._bIsPainted},i.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},i.prototype.round=function(e){return e?Math.floor(1e3*e)/1e3:e},i}();QRCode=function(e,t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:l.H},"string"==typeof t&&(t={text:t}),t)for(var n in t)this._htOption[n]=t[n];"string"==typeof e&&(e=document.getElementById(e)),this._android=r(),this._el=e,this._oQRCode=null,this._oDrawing=new g(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},QRCode.prototype.makeCode=function(e){this._oQRCode=new t(o(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this._el.title=e,this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=l}(),function(e,t,n){function a(){function a(e,t,n){return e=(n||o)+e,t?void localStorage.setItem(e,t):localStorage.getItem(e)}function l(e,t){e&&localStorage.removeItem((t||o)+e)}function u(e,t,n,a){return e=(a||o)+e,t?(sessionStorage.setItem(e,t),void("number"==typeof n&&n>0&&(X[e]&&clearTimeout(X[e]),X[e]=setTimeout(function(){g.sessionStorageClear(e),delete X[e]},n)))):sessionStorage.getItem(e)}function d(e,t){e&&sessionStorage.removeItem((t||o)+e)}function h(e,n,a){if(e){e=o+e;var i,r=new RegExp("(^| )"+e+"=([^;]*)(;|$)");if(null==n)return(i=t.cookie.match(r))?decodeURIComponent(i[2]):null;a||(a=10);var s=new Date;s.setTime(s.getTime()+24*a*60*60*1e3),t.cookie=e+"="+encodeURIComponent(n)+";expires="+s.toGMTString()}}function f(e){e=o+e;var n,a,i=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),r=new Date;r.setTime(r.getTime()-1),(n=t.cookie.match(i))&&(a=decodeURIComponent(n[2])),a&&(t.cookie=e+"="+a+";expires="+r.toGMTString())}function p(n){var a,i=[],r=0;if("string"==typeof n){try{i=t.querySelectorAll(n)}catch(o){}r=i.length,this.selector=n}else"object"==typeof n&&(n!=e&&null!=n.length||(n=[n]),i=n,r=i.length);for(this.length=r,a=0;a<r;a++)this[a]=i[a]}function g(e,t){return"string"==typeof e&&(e=(t?"":"#_content>div#"+Y+" ")+e),new p(e)}function m(){var e,i=n.search.substring(1).split("&"),r=i.length,o={},s=navigator.userAgent.toLowerCase(),l=/mqqbrowser/.test(s),d=/qq/.test(s)&&!l,f=/micromessenger/.test(s),p=/ucbrowser/.test(s),m=/dolphinbrowsercn/.test(s),v=/360 aphone browser/.test(s),y=/baidubrowser/.test(s),C=/opera|opr/.test(s),I=/safari/.test(s),T=/firefox/.test(s),b=/netscape/.test(s),w=/chrome/.test(s),S=/iPhone/i.test(s),_=/oresto/.test(s),k=/webkit/.test(s),x=/trident/.test(s),L=/gecko/.test(s),E=n.hash;E=E.replace(/^\/?#+!?/,"").replace(/\/+/g,"/").replace(/\/$/,""),""==E?E="home":/^&/.test(E)&&(E="home"+E),c&&history.replaceState(null,t.title,n.search+"#"+E);for(var M=0;M<r;M++)i[M]=i[M].split("="),i[M][1]=decodeURIComponent(i[M][1]),o[i[M][0]]=i[M][1]?i[M][1].split("/")[0]:"";for(n.hash.indexOf("?")>=0?(i=n.hash.split("?")[1],i&&(i=i.split("&"))):i=n.hash.split("&"),r=i.length,M=0;M<r;M++)i[M]=i[M].split("="),i[M][1]=decodeURIComponent(i[M][1]),o[i[M][0]]=i[M][1]?i[M][1].split("/")[0]:"";e=o.code&&/9358/.test(o.state)||o.openId?"9358":u("sessionType")||"web";var D="img/header_default.jpg";g.$={winWidth:0,scale:0,loginUrl:a("loginUrl")||"",ua:{value:s,isWX:f,isX5:d||f,isFirefox:T,isiPhone:S,isSafari:I&&S&&k&&!_&&!x&&L&&!b&&!w&&!p&&!C&&!l&&!f&&!m&&!v&&!y},clubID:(o.club||"").substring(0,18),clubName:"",clubLogo:"",userToken:"",userID:a("userID")||h("userID")||"",userTel:a("userTel")||h("userTel")||"",userName:a("userName")||h("userName")||"游客",userHeader:a("userHeader")||D,userAvatar:a("userAvatar")||"",userLoginName:a("userLoginName")||h("userLoginName")||"",sessionType:e,nickName:a("nickName"),headerImgUrl:a("headerImgUrl"),authCode:o.code,loginChanel:u("loginChanel"),openId:a("openId")||h("openId"),sessionId:a("sessionId"),clubInviteCode:u("clubInviteCode"),techSerialNo:u("techSerialNo")||o.techCode,techInviteCode:u("techInviteCode")||o.techInviteCode,currLngx:u("currLngx")||"",currLaty:u("currLaty")||"",isLogin:u("isLogin")||"N",prePayId:a("prePayId"),payAuthCode:null,payOpenId:a("openId"),paySessionId:a("paySessionId"),afterReward:!1,afterRewardInfo:null,visitChannel:o.visitChannel||(!o.club&&o.code&&(/9358/.test(o.state)||o.openId)?"9358":""),showGetCouponInfo:!1,easemob:{userId:a("easemobUserId"),secondUserId:a("easemobSecondUserId"),appKey:/spa.93wifi.com/.test(n.hostname)?"xiaomodo#spa":"xiaomodo#spatest",conn:null,secondConn:null,reConnTimer:null,currChatTech:{chatId:null,name:null,header:null,avatar:null,no:null,techId:null,clubId:null},sessionList:null,msgList:{}},scanimg:null,lastScanImgParent:null,defaultHeader:D,defaultUserName:"匿名用户",defaultTechName:"小摩豆技师",defaultClubLogo:"img/logo_default.jpg",defaultClubName:"小摩豆",defaultClubAddress:"(暂无地址)",defaultBanner:"img/banner_default.jpg",defaultService:"img/serviceItem_default.jpg",
is_telphone_user:a("is_telphone_user")||h("is_telphone_user")||!1,viewClubType:a("viewClubType")||h("viewClubType")||"all_club",accessMenus:null},g.$.visitChannel.indexOf("/")!=-1&&(g.$.visitChannel=g.$.visitChannel.substring(0,g.$.visitChannel.indexOf("/"))),g.$.__userToken=null,Object.defineProperty(g.$,"userToken",{set:function(e){e&&g.$.clubID&&(e!=this.__userToken&&g._ajax({url:"../api/v2/log/add",type:"post",data:{clubId:g.$.clubID,timestamp:Date.now(),sessionType:g.$.sessionType,token:e,module:"LOGIN",remark:g.$.ua.value},success:function(e){}}),(g.$.ua.isWX&&g.$.loginChanel||!g.$.ua.isWX)&&setTimeout(function(){g._ajax({url:"../api/v2/log/user_bind_club_tech",type:"post",data:{clubId:g.$.clubID,timestamp:Date.now(),token:e,techId:$("techId")||"",techCode:g.$.techInviteCode?g.$.techInviteCode.split("/")[0]:"",openId:g.$.openId||"",source:/scan/.test(g.$.loginChanel)?"qrCode":"web"},success:function(e){}})},350)),this.__userToken=e},get:function(){return this.__userToken}}),g.$.__loginUrl=null,Object.defineProperty(g.$,"loginUrl",{set:function(e){this.__loginUrl=e,a("loginUrl",e)},get:function(){return this.__loginUrl}}),g.$.userToken=a("userToken_"+e)||a("userToken")||h("userToken"),g.$.loginUrl=a("loginUrl")||"",u("sessionType",g.$.sessionType),h("userToken",g.$.userToken),h("userID",g.$.userID),h("userTel",g.$.userTel),h("userName",g.$.userName),h("userLoginName",g.$.userLoginName),"游客"==g.$.userName&&g.$.nickName&&(g.$.userName=g.$.nickName),g.$.userHeader==D&&g.$.headerImgUrl&&(g.$.userHeader=g.$.headerImgUrl)}function v(){if(z=n.hash.substring(1),G=z.split("/"),G=G[G.length-1],Y=G.split("&"),K={},1!=Y.length)for(var e=1;e<Y.length;e++)Y[e]=Y[e].split("="),Y[e][1]=decodeURIComponent(Y[e][1]),K[Y[e][0]]=Y[e][1]?Y[e][1].split("/")[0]:"";Y=Y[0]||"home"}function y(){e.baseWidth||(e.baseWidth=t.body.clientWidth||320),g.$.winWidth=H=t.documentElement.clientWidth||e.innerWidth||t.body.clientWidth,g.$.winHeight=t.documentElement.clientHeight||e.innerHeight,g.$.scale=j=H/e.baseWidth,se.style.fontSize=t.documentElement.style.fontSize=16*j+"px";var n=t.querySelectorAll("#_content>div");if(g.$.ua.isiPhone&&n)for(var a=0;a<n.length;a++)n[a].style.position="fixed",n[a].style.top=0,n[a].style.bottom=0,n[a].style.left=0,n[a].style.right=0}function C(e,t){if(!g.$.clubID)return!0;if(e=e||"",""==e)return!0;if(!g.$.accessMenus)return!0;return e=e.split("/"),e=e[e.length-1].split("&")[0],!g.$.accessMenus[e]||g.$.accessMenus[e].isPass}function I(e,a){e=e||"clubList",g.checkAccessMenu(e)||(e="home");var i=n.hash;i=i.replace(/^\/?#+!?/,"").replace(/\/+/g,"/").replace(/\/$/,"").replace(/\?/,"&"),""==i||"home"==i||a===!0?i=e:/^&/.test(i)&&(i=e+i),c&&history.replaceState(null,t.title,(n.search||"?")+"#"+i),T()}function T(){var e=n.hash.substring(1).split("/");if(e=e[e.length-1],!g.checkAccessMenu(e))return!1;g.loadingShow(!0),g.eventMaskShow(!0),V=!0;var t,a=g("#_content>div#"+Y,!0);a&&(a=a[0]),v(),g.pageSwitch=function(e){/9358.manager/.test(g.$.ua.value)?g("#backBtn,div#title>div:nth-of-type(2)").Click(function(){history.back()}):(g("#backBtn").Page(),g("div#title>div:nth-of-type(2)").Page()),W==-1?(a&&(a.style.zIndex=4,F?(g(a).TransitionDelay(0),g(a).Translate("100%")):Q&&a.classList.add("ready")),t.style.zIndex=3,Q?setTimeout(function(){g.eventMaskShow(!1),a&&a.parentNode==ce&&ce.removeChild(a)},500):(g.eventMaskShow(!1),a&&a.parentNode==ce&&ce.removeChild(a))):0==W?g.eventMaskShow(!1):1==W&&(F?(g(t).TransitionDelay(0),g(t).Translate()):Q?t.className="normal":(g(t).TransitionDelay(0),g(t).Translate(),t.className=""),Q?setTimeout(function(){g.eventMaskShow(!1),a&&a.parentNode==ce&&ce.removeChild(a)},550):(g.eventMaskShow(!1),a&&a.parentNode==ce&&ce.removeChild(a))),setTimeout(function(){if(g("#_content",!0).Children().length>1){g("#confirmLogin",!0);g("#_content",!0)[0].removeChild(g("#_content",!0).Children()[0])}},500),F=!1,g.loadingShow(!1),V=!1,g.$.ua.isWX&&e!==!1&&g.globalShareConfig(),"9358"!=g.$.visitChannel||$("club")?re[Y]?("none"==he.style.display&&g.showOrderMenu(),g("#_clubMenu>div.active",!0).ClassHave(Y)||g.setOrderMenuActive(Y)):g.hideOrderMenu():oe[Y]?("none"==fe.style.display&&g.showOrderMenu(),g("#_publicMenu>div.active",!0).ClassHave(Y)||g.setNavMenuActive(Y)):g.hideOrderMenu()},b(Y,function(e){t=e})}function b(e,t){var n=g("#_content>div#"+Y,!0)[0];null!=n&&ce.removeChild(n),w(ae[e],function(){delete ae[e],g.BDPV(z.replace(/&.*\//g,"/").replace(/&.*$/g,"")),S(e,t)})}function w(e,t){function n(a){var i=e[a];if(a--,ie[i]){var r=document.createElement("script");r.type="text/javascript",r.onload=function(){delete ie[i],a>=0?n(a):t()},r.src=ie[i],document.getElementsByTagName("head")[0].appendChild(r)}else a<0?t():n(a)}e?("string"==typeof e&&(e=[e]),n(e.length-1)):t()}function S(e,n){function a(){s--,0==s&&o()}function i(e){var t=0;try{e.sheet&&e.sheet.cssRules.length>0?t=1:e.styleSheet&&e.styleSheet.cssText.length>0?t=1:e.innerHTML&&e.innerHTML.length>0&&(t=1)}catch(n){}t?a():setTimeout(function(){i(e)},50)}function o(){void 0!==ge[pe]&&(ge[pe]=!0,_(e,c[0],c[1],n))}delete ge[ge],pe=(+new Date).toString(32),ge[pe]=!1;var s=2,c=[];if(e.indexOf("?")!=-1&&(e=e.substring(0,e.indexOf("?"))),!t.querySelector("#"+e+"-css")){s=3;var l=document.createElement("link");l.setAttribute("id",e+"-css"),l.setAttribute("rel","stylesheet"),l.setAttribute("href","COMPRESSED/css/page/"+e+".css?v="+r),t.querySelector("head").appendChild(l),!g.$.ua.isWX&&/m[a-z\d]* build/i.test(g.$.ua.value)?i(l):l.onload=l.onreadystatechange=a}g._ajax({url:e+".html?v="+r,type:"get",success:function(e){s--,c[0]=e,0==s&&o()}}),g._ajax({url:"COMPRESSED/js/page/"+e+".js?v="+r,type:"get",success:function(e){s--,c[1]=e,0==s&&o()}}),g.$.afterReward&&(g("#_afterReward>div>div:nth-of-type(1)>div>i",!0).CSS("background-image","url("+(g.$.afterRewardInfo.avatarUrl||g.$.defaultHeader)+")"),g("#_afterReward>div>div:nth-of-type(1)>div>div>div:first-child",!0).Text(g.$.afterRewardInfo.name||g.$.defaultTechName),g("#_afterReward>div>div:nth-of-type(1)>div>div>div:last-child",!0).Text(g.$.clubName||g.$.afterRewardInfo.clubName),g("#_afterReward",!0).Class("active"),g.$.afterReward=!1)}function _(e,t,n,a){var i=document.createElement("div");i.id=e,i.innerHTML=t;var r=document.createElement("script");r.type="text/javascript",r.id="_pageJS",r.innerHTML=n,i.appendChild(r),W==-1?(i.style.zIndex=2,i.classList.add("normal")):0==W?(i.style.zIndex=3,i.classList.add("normal")):1==W&&(i.style.zIndex=3,i.classList.add("newPage")),a(i),ce.appendChild(i),g("[data-tip-auth]").Click(function(e,t){t.dataset.tipAuth&&!C(t.dataset.tipAuth)&&(e.stopImmediatePropagation(),g.tipShow("会所未开通该功能"))}),g("[data-hide-auth]").Each(function(e){C(e.dataset.hideAuth)||(e.style.display="none")}),g("[data-show-auth]").Each(function(e){C(e.dataset.showAuth)&&(e.style.display=e.dataset.showAuth.split(":")[1]||"block")}),y()}function k(t){var a=ee;g._ajax({url:"../api/v1/wx/sign",isReplaceUrl:!0,data:{url:encodeURIComponent(a),refresh:Date.now(),sessionType:"9358"},type:"get",dataType:"json",success:function(i){try{i=JSON.parse(i),e.wx.config({debug:!1,appId:i.appId,timestamp:i.timestamp,nonceStr:i.nonceStr,signature:i.signature,jsApiList:["onMenuShareAppMessage","onMenuShareTimeline","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","hideMenuItems"]}),e.wxError||(e.wxError=!0,e.wx.error(function(r){e.wx.signReady=!1,e.requestSignCount--,0!=e.requestSignCount?k():t.proxyDom&&t.proxyDom.Click(function(e){e.stopImmediatePropagation(),g.tipShow("分享出错，请刷新页面后再试")}),g.ajax({url:"../api/v2/user/share/info",isReplaceUrl:!0,type:"post",data:{url:encodeURIComponent(n.href),browser:"signUrl："+encodeURIComponent(a),message:encodeURIComponent(JSON.stringify(i))},error:function(){}})})),e.wxReady||(e.wxReady=!0,e.wx.ready(function(){e.wx.signReady=!0,g.X5Config(t)}))}catch(r){g.tipShow("微信签名返回数据转换成json失败！")}}})}function x(e,t){var a,i=new RegExp("(^|&)?([da-zA-Z_]+)=([^&\\?#/\\\\]*)(\\?|#|/|\\\\|&|$)","ig"),r=[n.search.substring(1),n.hash.substring(1)],o={},s="";return t&&(r=n.hash.substring(1).split("/"),r=[r[r.length-1]]),r.forEach(function(e){for(s=i.exec(e);s;)a=o[s[2]]||[],a.push(s[3]),o[s[2]]=a,s=i.exec(e)}),e?o[e]||[]:o}function $(e,t){var n=x(e,t);return!e||n.length>1?n:Array.isArray(n)&&n.length<2?n[0]||"":n}function L(e){var t,n,a,i,r,o,s,c,l,u=function(e,t){return e<<t|e>>>32-t},d=function(e,t){var n,a,i,r,o;return i=2147483648&e,r=2147483648&t,n=1073741824&e,a=1073741824&t,o=(1073741823&e)+(1073741823&t),n&a?2147483648^o^i^r:n|a?1073741824&o?3221225472^o^i^r:1073741824^o^i^r:o^i^r},h=function(e,t,n){return e&t|~e&n},f=function(e,t,n){return e&n|t&~n},p=function(e,t,n){return e^t^n},g=function(e,t,n){return t^(e|~n)},m=function(e,t,n,a,i,r,o){return e=d(e,d(d(h(t,n,a),i),o)),d(u(e,r),t)},v=function(e,t,n,a,i,r,o){return e=d(e,d(d(f(t,n,a),i),o)),d(u(e,r),t)},y=function(e,t,n,a,i,r,o){return e=d(e,d(d(p(t,n,a),i),o)),d(u(e,r),t)},C=function(e,t,n,a,i,r,o){return e=d(e,d(d(g(t,n,a),i),o)),d(u(e,r),t)},I=function(e){for(var t,n=e.length,a=n+8,i=(a-a%64)/64,r=16*(i+1),o=Array(r-1),s=0,c=0;n>c;)t=(c-c%4)/4,s=c%4*8,o[t]=o[t]|e.charCodeAt(c)<<s,c++;return t=(c-c%4)/4,s=c%4*8,o[t]=o[t]|128<<s,o[r-2]=n<<3,o[r-1]=n>>>29,o},T=function(e){var t,n,a="",i="";for(n=0;3>=n;n++)t=e>>>8*n&255,i="0"+t.toString(16),a+=i.substr(i.length-2,2);return a},b=function(e){e=e.replace(/\x0d\x0a/g,"\n");for(var t="",n=0;n<e.length;n++){var a=e.charCodeAt(n);128>a?t+=String.fromCharCode(a):a>127&&2048>a?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t},w=Array(),S=7,_=12,k=17,x=22,$=5,L=9,E=14,M=20,D=4,N=11,A=16,P=23,R=6,U=10,O=15,B=21;for(e=b(e),w=I(e),o=1732584193,s=4023233417,c=2562383102,l=271733878,t=0;t<w.length;t+=16)n=o,a=s,i=c,r=l,o=m(o,s,c,l,w[t+0],S,3614090360),l=m(l,o,s,c,w[t+1],_,3905402710),c=m(c,l,o,s,w[t+2],k,606105819),s=m(s,c,l,o,w[t+3],x,3250441966),o=m(o,s,c,l,w[t+4],S,4118548399),l=m(l,o,s,c,w[t+5],_,1200080426),c=m(c,l,o,s,w[t+6],k,2821735955),s=m(s,c,l,o,w[t+7],x,4249261313),o=m(o,s,c,l,w[t+8],S,1770035416),l=m(l,o,s,c,w[t+9],_,2336552879),c=m(c,l,o,s,w[t+10],k,4294925233),s=m(s,c,l,o,w[t+11],x,2304563134),o=m(o,s,c,l,w[t+12],S,1804603682),l=m(l,o,s,c,w[t+13],_,4254626195),c=m(c,l,o,s,w[t+14],k,2792965006),s=m(s,c,l,o,w[t+15],x,1236535329),o=v(o,s,c,l,w[t+1],$,4129170786),l=v(l,o,s,c,w[t+6],L,3225465664),c=v(c,l,o,s,w[t+11],E,643717713),s=v(s,c,l,o,w[t+0],M,3921069994),o=v(o,s,c,l,w[t+5],$,3593408605),l=v(l,o,s,c,w[t+10],L,38016083),c=v(c,l,o,s,w[t+15],E,3634488961),s=v(s,c,l,o,w[t+4],M,3889429448),o=v(o,s,c,l,w[t+9],$,568446438),l=v(l,o,s,c,w[t+14],L,3275163606),c=v(c,l,o,s,w[t+3],E,4107603335),s=v(s,c,l,o,w[t+8],M,1163531501),o=v(o,s,c,l,w[t+13],$,2850285829),l=v(l,o,s,c,w[t+2],L,4243563512),c=v(c,l,o,s,w[t+7],E,1735328473),s=v(s,c,l,o,w[t+12],M,2368359562),o=y(o,s,c,l,w[t+5],D,4294588738),l=y(l,o,s,c,w[t+8],N,2272392833),c=y(c,l,o,s,w[t+11],A,1839030562),s=y(s,c,l,o,w[t+14],P,4259657740),o=y(o,s,c,l,w[t+1],D,2763975236),l=y(l,o,s,c,w[t+4],N,1272893353),c=y(c,l,o,s,w[t+7],A,4139469664),s=y(s,c,l,o,w[t+10],P,3200236656),o=y(o,s,c,l,w[t+13],D,681279174),l=y(l,o,s,c,w[t+0],N,3936430074),c=y(c,l,o,s,w[t+3],A,3572445317),s=y(s,c,l,o,w[t+6],P,76029189),o=y(o,s,c,l,w[t+9],D,3654602809),l=y(l,o,s,c,w[t+12],N,3873151461),c=y(c,l,o,s,w[t+15],A,530742520),s=y(s,c,l,o,w[t+2],P,3299628645),o=C(o,s,c,l,w[t+0],R,4096336452),l=C(l,o,s,c,w[t+7],U,1126891415),c=C(c,l,o,s,w[t+14],O,2878612391),s=C(s,c,l,o,w[t+5],B,4237533241),o=C(o,s,c,l,w[t+12],R,1700485571),l=C(l,o,s,c,w[t+3],U,2399980690),c=C(c,l,o,s,w[t+10],O,4293915773),s=C(s,c,l,o,w[t+1],B,2240044497),o=C(o,s,c,l,w[t+8],R,1873313359),l=C(l,o,s,c,w[t+15],U,4264355552),c=C(c,l,o,s,w[t+6],O,2734768916),s=C(s,c,l,o,w[t+13],B,1309151649),o=C(o,s,c,l,w[t+4],R,4149444226),l=C(l,o,s,c,w[t+11],U,3174756917),c=C(c,l,o,s,w[t+2],O,718787259),s=C(s,c,l,o,w[t+9],B,3951481745),o=d(o,n),s=d(s,a),c=d(c,i),l=d(l,r);var H=T(o)+T(s)+T(c)+T(l);return H.toLowerCase()}function E(e){g.addToMsgList(e,"text"),t.querySelector("#chat")?g.$.easemob.currChatTech.chatId==e.from&&g.addMsgDiv?(g.updateSessionList(e,"text",!1),g.addMsgDiv(e,"text")):g.updateSessionList(e,"text"):(g.updateSessionList(e,"text"),!t.querySelector("#message")||"9358"!=g.$.visitChannel&&e.ext.clubId!=g.$.clubID||g.refreshMessageList&&g.refreshMessageList(e.from),("9358"==g.$.visitChannel||"9358"!=g.$.visitChannel&&e.ext.clubId==g.$.clubID)&&g.showMsgNum(1))}function M(){e.URL=e.URL||e.webkitURL,g.$.easemob.conn||(N(0),g.$.easemob.secondUserId&&N(1))}function D(e,n){g.addToMsgList(n,"pic"),t.querySelector("#chat")?e.currChatTech.chatId==n.from&&g.addMsgDiv?(g.updateSessionList(n,"pic",!1),g.addMsgDiv(n,"pic")):g.updateSessionList(n,"pic"):(g.updateSessionList(n,"pic"),!t.querySelector("#message")||"9358"!=g.$.visitChannel&&n.ext.clubId!=g.$.clubID||g.refreshMessageList&&g.refreshMessageList(n.from),("9358"==g.$.visitChannel||"9358"!=g.$.visitChannel&&n.ext.clubId==g.$.clubID)&&g.showMsgNum(1))}function N(n){var i=g.$.easemob,r=new Easemob.im.Connection;r.listen({onOpened:function(){r==i.conn&&i.reConnTimer&&e.clearInterval(i.reConnTimer),r.setPresence(),r.heartBeat(r),g.getSessionList();var t=0;for(var n in i.sessionList)("9358"==g.$.visitChannel||"9358"!=g.$.visitChannel&&i.sessionList[n].clubId==g.$.clubID)&&(t+=i.sessionList[n]["new"]);g.showMsgNum(t)},onTextMessage:function(e){if(e.ext&&!e.ext.techId&&(e.ext.name=e.ext.clubName),"debug"==e.data.toLowerCase()){var t=i.conn.context,n={debug:"true",context:{accessToken:t.accessToken,accessTokenExpires:t.accessTokenExpires,appKey:t.appKey,appName:t.appName,jid:t.jid},msgList:i.msgList,sessionList:i.sessionList};g.ajax({url:"../api/v2/user/chat/info",isReplaceUrl:!0,type:"post",data:{debugInfo:encodeURIComponent(JSON.stringify(n))},success:function(){}})}e.time=parseInt(e.ext.time),E(e),r==i.secondConn&&i.conn.send({to:e.from,msg:"",type:"chat",ext:{msgType:"changeAccount",oldChatId:i.secondUserId,newChatId:i.userId}})},onPictureMessage:function(e){if(e.ext&&!e.ext.techId&&(e.ext.name=e.ext.clubName),e.time=parseInt(e.ext.time),0==e.width&&0==e.height){var t=new Image;t.onload=function(){e.width=this.width,e.height=this.height,D(i,e)},t.src=e.url}else D(i,e);r==i.secondConn&&i.conn.send({to:e.from,msg:"",type:"chat",ext:{msgType:"changeAccount",oldChatId:i.secondUserId,newChatId:i.userId}})},onError:function(e){var t={type:"easemob error",userID:g.$.userID,chatID:g.$.easemob.userId,detail:e};g.ajax({url:"../api/v2/user/chat/info",isReplaceUrl:!0,type:"post",data:{debugInfo:encodeURIComponent(JSON.stringify(t))},success:function(){}});var n=e.msg;("conflict"==n||3==e.type||/连接还未建立/.test(n))&&(r.isClosed()||(r.stopHeartBeat(r),r.close()),"conflict"!=n&&r==i.conn&&(i.reConnTimer||(i.reConnTimer=setInterval(function(){i.userId&&i.conn.open({user:i.userId,appKey:i.appKey,pwd:i.userId}),i.secondUserId&&i.secondConn.open({user:i.secondUserId,appKey:i.appKey,pwd:i.secondUserId})},5e3)))),"conflict"==n||!/登录失败/.test(n)&&7!=e.type},onClosed:function(){}}),0==n?i.conn=r:i.secondConn=r,i.conn==r?(g.$.scanimg||(g.$.scanimg=new ImgScan,g.$.scanimg.init({imgWrap:t.querySelector("#_scanImgWrap"),closeCallback:function(e,t){g.paramClear("imgScan"),g.$.lastScanImgParent&&(e.style.cssText=t,g.$.lastScanImgParent.appendChild(e))}})),i.conn.isOpened()||(i.userId&&i.userId!=L("")||(g.$.userID?(i.userId=L(g.$.userID),a("easemobUserId",i.userId)):l("easemobUserId")),i.userId&&r.open({user:i.userId,appKey:i.appKey,pwd:i.userId,success:function(e){},error:function(e,t){g.ajax({url:"../api/v2/user/chat/info",isReplaceUrl:!0,type:"post",data:{debugInfo:encodeURIComponent("easemob-login-error-res："+JSON.stringify(e)+"easemob-login-error-msg："+JSON.stringify(t))}})}}))):r.open({user:i.secondUserId,appKey:i.appKey,pwd:i.secondUserId})}function A(e,t,n,a,i){if(e){var r="",o=null;t=t===!0,n=Math.abs(n||4),a=Math.abs(a||1),i=i||" ",o=new RegExp("(\\S{"+n+"})","g"),t&&(o=new RegExp("(\\S)(?=(\\S{"+n+"})+$)","g"));for(var s=a;s>0;s--)r+=i;return e.replace(o,"$1"+r)}}function P(e){t.title=e;var n=document.querySelector("body");if(n.appendChild){var a=document.createElement("iframe");a.setAttribute("src","/favicon.ico"),g(a).Event("load",function(){setTimeout(function(){n.removeChild(a)},0)}),n.appendChild(a)}}function R(){Se[0]&&Se[1]?_e.ClassClear("disabled"):_e.Class("disabled")}function U(e,t,n,a){var i=g.$.userID;g.ajax({url:"../api/v2/wx/bind_phone/save",isReplaceUrl:!0,type:"post",data:{appVersion:"",clubCode:g.$.clubInviteCode||"",techInviteCode:g.$.techInviteCode||"",clubId:g.$.clubID||"",code:t,phoneNum:e},success:function(e){var t=e;if(200==e.statusCode){e=e.respData,g.$.userToken=e.token,g.$.userID=e.userId,g.$.userHeader=e.avatarUrl||"img/header_default.jpg",g.$.userTel=e.phoneNum,g.$.userName=e.name,g.$.userLoginName=e.loginName,g.cookie("userToken",g.$.userToken,30),g.cookie("userID",g.$.userID,30),g.cookie("userHeader",g.$.userHeader,30),g.cookie("userTel",g.$.userTel,30),g.cookie("userName",g.$.userName,30),g.cookie("userLoginName",g.$.userLoginName,30),g.localStorage("userToken",g.$.userToken),g.localStorage("web"==g.$.sessionType?"userToken_web":"userToken_9358",g.$.userToken),g.localStorage("userID",g.$.userID),g.localStorage("userHeader",g.$.userHeader),g.localStorage("userTel",g.$.userTel),g.localStorage("userName",g.$.userName),g.localStorage("userLoginName",g.$.userLoginName),g.$.is_telphone_user=!0,g.localStorage("is_telphone_user",!0),g.cookie("is_telphone_user",!0);var r=g.$.easemob;r.userId=e.emchatId,g.localStorage("easemobUserId",r.userId),i&&i!=g.$.userID&&(g.localStorage("easemobSecondUserId",i),r.secondUserId=i,g.switchUserChatInfo(i,g.$.userID)),O(a)}"function"==typeof n&&n(t)}})}function O(e){var t=g.$.easemob,n=!1;e=e!==!1,t.conn.isClosed()||(n=!0,t.conn.stopHeartBeat(t.conn),t.conn.close(),t.currChatTech={},t.sessionList=null,t.msgList={}),setTimeout(function(){t.conn.open({user:t.userId,pwd:t.userId,appKey:t.appKey}),t.secondUserId&&g.createEasemobConn(1),e&&(!g.$.loginUrl||g.$.loginUrl.indexOf("techReward&")==-1&&g.$.loginUrl.indexOf("comment&")==-1||g.localStorage("backIndex",3),g.$.loginUrl&&$e!==!1&&(g.$.loginUrl==G||$e?location.reload():g.$.loginUrl?g.page(g.$.loginUrl,1,!0):g.page("home",-1,!0)),$e=0,g.$.loginUrl="",g.eventMaskShow(!1))},n?500:1)}FastClick.attach(document.body);try{localStorage.setItem("testKey","testValue"),localStorage.getItem("testKey"),localStorage.removeItem("testKey")}catch(B){a=function(){return!1},l=function(){return!1}}try{sessionStorage.setItem("testKey","testValue"),sessionStorage.getItem("testKey"),sessionStorage.removeItem("testKey")}catch(B){u=function(){return!1},d=function(){return!1}}p.prototype={Each:function(e){for(var t=this.length,n=0;n<t;)e(this[n],n++);return this},Index:function(e){return new p(this[e])},Last:function(){return new p(this[this.length-1])},Children:function(){var e=[];return this.Each(function(t){for(var n=t.children,a=n.length,i=0;i<a;)e.push(n[i++])}),new p(e)},Add:function(e){for(var t=this.length,n=0,a=t+e.length;t<a;)this[t++]=e[n++];return this.length=a,this},Remove:function(e){for(var t=this[e],n=this.length-1,a=e;a<n;)this[a]=this[a++ +1];return delete this[n],this.length--,new p(t)},Event:function(e,t,n,a){return addEventListener?(n=1==n,this.Each(function(i,r){var o=function(e){t(e,i,r)};i.addEventListener(e,o,n),a&&(i[e+"_"+a]=o)})):(e="on"+e,this.Each(function(n,i){var r=function(e){t(e,n,i)};n.attachEvent(e,r),a&&(n[e+"_"+a]=r)})),this},EventRemove:function(e,t,n,a){return removeEventListener?(n=1==n,this.Each(function(i){a?i.removeEventListener(e,i[e+"_"+a],n):i.removeEventListener(e,t,n)})):(e="on"+e,this.Each(function(n){a?n.detachEvent(e,n[e+"_"+a]):n.detachEvent(e,t)})),this},Delegate:function(e,t,n,a,i){function r(e,t,n){e=Array.isArray(e)?e:[e];for(var a=!1;!a;){if(!t)return;if(a=e.some(function(e){return e==t&&t!=n.parentNode}))return t;t=t.parentNode}}var o=this,s=this.selector.substring(this.selector.indexOf(" ")),c=t.split(","),l=[];return c.forEach(function(e){l.push(s+" "+e)}),addEventListener?(a=1==a,this.Each(function(t,s){var c=function(e){var t=r(Array.prototype.slice.call(g(l.join())),e.target||e.srcElement,o[s]);t&&n(e,t,s)};t.addEventListener(e,c,a),i&&(t[e+"_"+i]=c)})):(e="on"+e,this.Each(function(t,a){var s=function(e){var t=r(Array.prototype.slice.call(g(l.join())),e.target||e.srcElement,o[a]);t&&n(e,t,a)};t.attachEvent(e,s),i&&(t[e+"_"+i]=s)})),this},Click:function(e,t){return this.Event("click",e,!1,t),this},Attr:function(e,t){return t?(this.Each(function(n){n.setAttribute(e,t)}),this):this.length>0?this[0].getAttribute(e):null},AttrRemove:function(e){return this.Each(function(t){t.removeAttribute(e)}),this},Html:function(e,t){if(null!=e){t=1==t;var n,a=this;return this.Each(function(i,r){n=i.cloneNode(!1),n.innerHTML=(t?i.innerHTML:"")+e,i.parentNode.replaceChild(n,i),a[r]=n}),this}return this.length>0?this[0].innerHTML:null},Text:function(e,t){return null!=e?(t=1==t,this.Each(function(n){null!=n.innerText?n.innerText=(t?n.innerText:"")+e:n.textContent=(t?n.textContent:"")+e}),this):this.length>0?this[0].innerText||this[0].textContent:null},Value:function(e){return null!=e?(this.Each(function(t){t.value+=e}),this):this.length>0?this[0].value:null},Class:function(e){return this.Each(function(t){t.classList.add(e)}),this},ClassHave:function(e){return this.length>0&&new RegExp("( |^)"+e+"( |$)").test(this[0].className)},ClassClear:function(e){return e?this.Each(function(t){t.classList.remove(e)}):this.Each(function(e){e.className=""}),this},CSS:function(e,t){return"string"==typeof e?null!=t?(this.Each(function(n){n.style[e]=t}),this):this.length>0?this[0].style[e]:null:(this.Each(function(t){for(var n in e)t.style[n]=e[n]}),this)},Show:function(){return this.CSS("display","block"),this},Hide:function(){return this.CSS("display","none"),this},TransitionDelay:function(e){this.Each(function(t){t.style.webkitTransition=t.style.transition=e+"ms"})},Translate:function(e,t,n){e=e||0,t=t||0,n=n||0,this.Each(function(a){a.style.webkitTransform=a.style.transform="translate("+e+","+t+") translateZ("+n+")"})},TranslateX:function(e){e=e||0,this.Each(function(t){t.style.webkitTransform=t.style.transform="translateX("+e+")"})},Page:function(e,t,n){this.Click(function(){g.page(e,t,n)})},Login:function(e,t,n,a){this.Click(function(){g.login(e,t,n,a)})},DivBackgroundCacheBack:function(){this.Each(function(e){e.getAttribute("imageCache")&&(e.style.backgroundImage='url("'+e.getAttribute("imageCache")+'")',e.removeAttribute("imageCache"))})},ImgSrcCacheBack:function(){this.Each(function(e){var t=e.getAttribute("imageCache");t&&(/^http/.test(t)||(t="/"+t),e.src=t,e.removeAttribute("imageCache"))})},Verify:function(e,t,n){e&&("*"==e?this.Event("change",function(e,a,i){var r=a.value;null!=n&&(r=r.substring(0,n)),a.value=r,t&&t(""!=r,i)}):"tel"==e?this.Event("input",function(e,n,a){/\D/.test(n.value)&&(n.value=n.value.replace(/\D/g,"")),1==n.value.length&&1!=n.value&&(n.value=""),2!=n.value.length||/^1[34578]$/.test(n.value)||(n.value=1),n.value.length>11&&(n.value=n.value.substring(0,11)),t&&t(/^1[34578]\d{9}$/.test(n.value))}):"authcode"==e?this.Event("input",function(e,n,a){var i=n.value.replace(/\D/g,"").substring(0,4);n.value=i,t&&t(/^\d{4}$/.test(i),a)}):"password"==e?this.Event("input",function(e,n,a){var i=n.value.replace(/\W/g,"").substring(0,20);n.value=i,t&&t(/^\w{6,20}$/.test(i),a)}):"num"==e?this.Event("input",function(e,a,i){var r=a.value.replace(/\D/g,"");null!=n&&(r=r.substring(0,n)),a.value=r,t&&t(/^\d*$/.test(r),i)}):"word"==e?this.Event("input",function(e,a,i){var r=a.value.replace(/[^a-zA-Z]/g,"");null!=n&&(r=r.substring(0,n)),a.value=r,t&&t(/^\d*$/.test(r),i)}):"wordnum"==e&&this.Event("input",function(e,a,i){var r=a.value.replace(/[^a-zA-Z\d]/g,"");null!=n&&(r=r.substring(0,n)),a.value=r,t&&t(/^[a-zA-Z\d]*$/.test(r),i)}))}},g._ajax=function(e,t,n,a){var i;if("string"==typeof e)i={url:e,data:t,success:n,error:a};else{if("object"!=typeof e)return!1;i=e}if(i.type="get"==i.type?"get":"post",i.async=0!=i.async,null==i.contentType&&(i.contentType="application/x-www-form-urlencoded;charset=UTF-8"),"object"==typeof i.data){var r="";for(var o in i.data)r+="&"+o+"="+i.data[o];i.data=r.substring(1)}else if(!i.type&&"string"!=typeof i.data)return!1;"get"==i.type&&(i.data&&""!=i.data?i.url+="?"+i.data:i.data=null);var s=!1;return window.XMLHttpRequest?(s=new XMLHttpRequest,s.overrideMimeType&&s.overrideMimeType("text/xml")):window.ActiveXObject&&(s=new ActiveXObject("Microsoft.XMLHTTP")),!!s&&(s.onreadystatechange=function(){4==s.readyState&&(/^(200|204)$/.test(s.status)?i.success&&i.success(s.responseText):0==s.status?V&&g.pageCancel():i.error&&i.error(s.responseText,s.status))},s.open(i.type,i.url,i.async),s.setRequestHeader("Content-Type",i.contentType),void s.send(i.data))},g.ajax=function(e){var t=i();e=e||{},null==e.data?e.data={timestamp:Date.now(),sessionType:g.$.sessionType,token:g.$.userToken||""}:"object"==typeof e.data?(e.data.timestamp=Date.now(),e.data.sessionType||(e.data.sessionType=g.$.sessionType),e.data.token=e.data.token||g.$.userToken||"",e.data.tokenId=e.data.tokenId||t):"string"==typeof e.data&&(/(&|\?)token=/.test(e.data)||(e.data+="&token="+(g.$.userToken||"")+"&timestamp="+Date.now()+"&sessionType="+g.$.sessionType),/(&|\?)tokenId=/.test(e.data)||(e.data+="&tokenId="+t)),g._ajax({url:e.isReplaceUrl===!0?e.url:te+e.url,data:e.data,type:"post"==e.type?"post":"get",async:e.async,success:function(t){if(t=t.trim(),e.success){try{t=JSON.parse(t)}catch(n){}e.success(t)}},error:function(t,n){if(t=t.trim(),0==n);else if(!/user\/info\/view/.test(e.url))if(401==n)g.$.loginUrl=z,g.page("login",1,!0);else if(e.error){try{t=JSON.parse(t)}catch(a){}e.error(t,n)}else t&&g.tipShow(t)}})},m(),e.$=g;var H,j,X={},V=!1,W=0,J=!1,q=!0,F=!1,Q=!0,K={},Y="",G="",z="",Z="",ee=n.origin+n.pathname+n.search,te="../api/v2/club/"+(g.$.clubID?g.$.clubID+"/":""),ne=location.pathname+"/",ae={map:"map",clubList:["map","customSwiper"],picture:"ic",home:"customSwiper",robProjectSuccess:"customSwiper",activities:"customSwiper"},ie={map:"http://webapi.amap.com/maps?v=1.3&key=ff9e41d1f7fcaed686817ad278502750",ic:"COMPRESSED/js/kit/ic.js",customSwiper:"COMPRESSED/js/kit/customSwiper.js"},re={home:!0,message:!0,order:!0,personal:!0,technicianList:!0},oe={clubList:!0,message:!0,personal:!0},se=t.querySelector("html"),ce=t.querySelector("#_content"),le=t.querySelector("#_loading"),ue=t.querySelector("#_tip"),de=t.querySelector("#_eventMask"),he=t.querySelector("#_clubMenu"),fe=t.querySelector("#_publicMenu"),pe="",ge={};if(g.$.clubID&&g.ajax({url:"../api/v2/club/menu/all",isReplaceUrl:!0,async:!1,data:{clubId:g.$.clubID},success:function(e){function t(n,a){n=n||[],a=a||{};for(var i=0,r=n.length;i<r;i++)a[n[i].code]=n[i],n[i].isPass=e.respData.enabledResourcesIds.some(function(e){return e==n[i].id}),n[i].isOff=e.respData.switchOffResourcesIds.some(function(e){return e==n[i].id}),n[i].children&&n[i].children.length>0&&t(n[i].children,a)}200==e.statusCode&&(g.$.accessMenus={},e.respData.enabledResourcesIds=e.respData.enabledResourcesIds||[],t(e.respData.menuList,g.$.accessMenus))}}),g.localStorage=a,g.localStorageClear=l,g.sessionStorage=u,g.sessionStorageClear=d,g.cookie=h,g.cookieClear=f,g.BDPV=function(t){e._hmt&&e._hmt.push(["_trackPageview",ne+t])},g.BD=function(t,n,a,i){e._hmt&&e._hmt.push(["_setCustomVar",t,n,a,i])},g.param=function(e,a){if(null==a)return e?K[e]:K;var i=new RegExp("&"+e+"=.*?&|&"+e+"=.*?$"),r=n.search+"#";r+=i.test(G)?z.replace("/"+G,"/"+G.replace(i,"&"+e+"="+a+"&").replace(/&$/,"")):z+"&"+e+"="+a,J=!0,c&&history.replaceState(null,t.title,r),v()},g.paramClear=function(e){g.param(e)&&(c&&(z==G?history.replaceState(null,t.title,n.search+"#"+(e?G.replace(new RegExp("&"+e+"=.*?&|&"+e+"=.*?$"),"&").replace(/&$/,""):G.split("&")[0])):history.replaceState(null,t.title,n.search+"#"+(e?z.replace("/"+G,"/"+G.replace(new RegExp("&"+e+"=.*?&|&"+e+"=.*?$"),"&").replace(/&$/,"")):z.replace("/"+G,"/"+Y)))),v())},g.loadingShow=function(e){e=e?"add":"remove",le.classList[e]("active"),le.children[0].classList[e]("active"),le.children[1].classList[e]("active"),ce.scrollIntoView()},g.eventMaskShow=function(e){de.style.display=e?"block":"none"},g.tipShow=function(e,t,n){(!n||s&&n===!0)&&(ue.children[0].innerHTML=e,ue.classList.add("active"),setTimeout(function(){ue.classList.remove("active")},t||2500))},g.pageSwitch=function(){},g.checkAccessMenu=function(e,t){var n=C(e,"url");return n||t===!1||g.tipShow("会所未开通该功能"),n},g.login=function(e,t,n,a){if(e=e||"",g.$.userToken){if(e){if(a&&!g.$.userTel)return g.localStorage("pop_bind_phone_dialog",!0),g.eventMaskShow(!0),g.$.loginUrl=(z+"/"+e).replace(/^\//,"").replace(/\/$/,""),g("#_bindPhone",!0).Class("active"),!0;t===!0?g.page(e,-1,!0,n):g.page(e)}return!1}return!!g.checkAccessMenu(e)&&(g.$.loginUrl=(z+"/"+e).replace(/^\//,"").replace(/\/$/,""),g.page(g.$.loginUrl.replace(/\/[^\/]*$/,"/login"),1,!0,n),!0)},g.page=function(a,i,r,o){g.checkAccessMenu(a)&&(i||0===i||(i=1),W=i,r=1==r,a&&""!=a||(W=-1),J=!0,Q=o!==!1,r?n.hash=a:W==-1?(Z=z,n.hash=n.hash.replace(new RegExp("(/|#)"+G+"$"),"")||"home"):0==W?c&&history.replaceState(null,t.title,n.search+"#"+n.hash.replace(new RegExp("(/|#)"+G+"$"),"/"+a)):1==W&&(e.top!=e?e.top.loc=n.origin+n.pathname+n.search+"#"+a:(Z=z,n.hash+="/"+a)))},g.pageCancel=function(){q=!1;var e=g("#_content>div#"+Y,!0)[0];e&&ce.removeChild(e),c&&history.replaceState(null,t.title,n.search+"#"+Z),v(),g.loadingShow(!1),g.eventMaskShow(!1),q=!0},g.$.ua.isSafari&&g(ce).Event("touchstart",function(e){var t=e.touches[0].clientX,n=t<25,a=H-t<25;(n||a)&&(F=!0)}),g(e).Event("hashchange",function(e){if("true"==g.param("imgScan"))return void g.$.scanimg.close();if(q){if(J)J=!1;else{var t=e.oldURL,n=e.newURL;if(0!=t.indexOf(ee))return;if(W=0==t.indexOf(n)?-1:1,V)return 1==W?history.back():history.forward(),void(J=!0);t=t.replace(ee,"").substring(1).split("/"),n=n.replace(ee,"").substring(1).split("/"),t=t[t.length-1].split("&")[0],n=n[n.length-1].split("&")[0]}T()}}),g.scroll=function(e){function n(e){B+=e,E||(B>0?B=0:B<-X&&(B=-X)),k.Translate(B+"px")}function a(){n(u-c),c=u}function i(e){var t=e.changedTouches[0].clientY-l+Q[A];t>0||C>=0?t=0:t<C&&(t=C),y.Translate(0,t+"px")}function r(){v||(v=setInterval(function(){if(n(-U),j=B=j-U,E)B>-U?j-=X:B<-X&&(j+=X);else{if(B>0)return j=0,clearInterval(v),void(v=null);if(B<-X)return j=-X,clearInterval(v),void(v=null);B=j}L&&L.children[A]&&L.children[A].classList.remove("active");var e=A;A++,A<0?A=$-1:A>=$&&(A=0),k.TransitionDelay(300),k.Translate(B+"px"),setTimeout(function(){k.TransitionDelay(0),B=j,k.Translate(B+"px"),Z&&setTimeout(function(){k.TranslateX(B+"px")},10),J&&(Q[A]=F,y=g(J[e]),y.TransitionDelay(0),y.Translate(Q[A]+"px"))},300),L&&L.children[A]&&L.children[A].classList.add("active")},D))}function o(n){u=n.changedTouches[0].clientX,d=n.changedTouches[0].clientY;var o=Date.now();if(m=o-m,p=o-p,m||(m=1),1==b){n.preventDefault();var s=u-c,v=s/m,T=u-h,S=T/p,_=!0;if(a(),I=Math.abs(v)>.2?v>0?1:-1:Math.abs(S)>.2?S>0?1:-1:s>U/2?1:s<-U/2?-1:0,R>1&&(I=R<x.length&&0!=I?Math.round(T/U):0),j=B=j+I*U,E?B>-U?j-=X:B<-X&&(j+=X):(B>0?(j=0,_=!1):B<-X&&(j=-X,_=!1),B=j),_){L&&L.children[A]&&L.children[A].classList.remove("active");var M=A;A-=I,A<0?A=$-1:A>=$&&(A=0)}k.TransitionDelay(300),k.Translate(B+"px"),setTimeout(function(){k.TransitionDelay(0),B=j,k.Translate(B+"px"),Z&&setTimeout(function(){k.TranslateX(B+"px")},10),_&&J&&(Q[A]=F,y=g(J[M]),y.TransitionDelay(0),y.Translate(Q[A]+"px"))},300),_&&L&&L.children[A]&&L.children[A].classList.add("active"),V&&V(A),N&&r()}else if(2==b){n.preventDefault();var s=d-l,v=s/m,T=d-f,S=T/p,_=!1,D=d-f+Q[A];i(n),Math.abs(v)>30||Math.abs(S)>.5?(D+=3*v,_=!0):(Math.abs(v)>30||Math.abs(S)>.5)&&(D+=3*S,_=!0),_&&(y.TransitionDelay(K),D>0?D=0:C>=0?(D=0,q&&q()):D<C&&(D=C,q&&q()),m<200&&y.Translate(0,D+"px")),
Q[A]=D}else if(c==u&&l==d&&m<250)if(n.preventDefault(),n.stopPropagation(),e.click)if(G)e.click(G,A);else{var P=parseInt(-j/U)+parseInt(c/U,10);e.click(w.children[0].children[P],P)}else if(n.target.click)n.target.click();else{var O=t.createEvent("Event");O.initEvent("click",!0,!0),n.target.dispatchEvent(O)}else 0==b&&N&&r();b=0}function s(){}if(e=e||{},e.contentX||e.contentY){var c,l,u,d,h,f,p,m,v,y,C,I,T,b=0,w=e.content,S=g(w),_=e.contentX,k=g(_),x=_?_.children:[],$=x.length,L=e.flagX,E=e.loopX&&$>1||!1,M=e.autoX||!1,D=e.autoXDelay||3e3,N=e.autoXTouched||!1,A=e.indexX||0,P=e.widthX||H,R=e.numsX||1,U=e.perX||P/R,O=U*($-1),B=-U*A,j=B,X=O,V=e.endX,W="",J=e.contentY,q=e.endY,F=parseFloat(e.topY||0),Q=[F],K=e.delayY||300,Y=!0,G=null,z=null,Z=e.onlyX||!1;if(R>1&&x.length<=R&&(M=!1,E=!1,Y=!1),E&&$>0){for(T=x.length-R;T<x.length;T++)W+=x[T].outerHTML;for(W+=_.innerHTML,T=0;T<R;T++)W+=x[T].outerHTML;k.Html(W),j=B=-((e.perX||U)*R*(A+1)),Z?k.TranslateX(j+"px"):k.Translate(j+"px"),X=U*$}for(T=0;T<$;T++)Q[T]=F;if(0!=A&&(k.TransitionDelay(0),Z?k.TranslateX(-U*A+"px"):k.Translate(-U*A+"px")),L&&L.children[A]&&L.children[A].classList.add("active"),e.click){var ee=w.children[0].children;for(T=0;T<ee.length;T++)Y?g(ee[T]).Event("touchend",function(e,t){G=t}):g(ee[T]).Event("click",function(t,n){e.click(n)})}return Y&&(S.Event("touchstart",function(e){null!=v&&(clearInterval(v),v=null),c=h=e.touches[0].clientX,l=f=e.touches[0].clientY,b=0,p=m=Date.now()}),S.Event("touchmove",function(e){if(u=e.changedTouches[0].clientX,d=e.changedTouches[0].clientY,1==b)e.preventDefault(),a();else if(2==b)e.preventDefault(),i(e);else if(0==b){var t=Math.abs(u-h),n=Math.abs(d-f),r=t>2||n>2?t>n?1:2:0;1==r&&_?(e.preventDefault(),b=1,k.TransitionDelay(0),a()):2==r&&J&&(e.preventDefault(),b=2,y=g(J[A]),y.TransitionDelay(0),C=-J[A].scrollHeight+w.clientHeight,i(e))}m=Date.now()}),S.Event("touchend",function(e){z&&clearTimeout(z),o(e)})),M&&(k.TransitionDelay(300),r()),s.prototype={IndexX:function(e){return null==e?A:(L&&L.children[A]&&L.children[A].classList.remove("active"),A=e,k.TransitionDelay(0),B=j=-P*(A+(E?1:0)),k.Translate(B+"px"),L&&L.children[A]&&L.children[A].classList.add("active"),void 0)}},new s}},g.X5Config=function(t){e.wx&&(t=t||{},e.wx.signReady?t.title?(wx.hideMenuItems({menuList:["menuItem:copyUrl"]}),wx.showAllNonBaseMenuItem(),wx.onMenuShareAppMessage(t),wx.onMenuShareTimeline(t),wx.onMenuShareQQ(t),wx.onMenuShareWeibo(t),wx.onMenuShareQZone(t)):wx.hideAllNonBaseMenuItem():(e.requestSignCount=2,k(t)))},g.globalShareConfig=function(){g.$.clubID&&g.$.clubName?g.X5Config({title:g.$.clubName+"欢迎您",desc:"选个技师，选个项目，给身体放个假，这里太合适不过了。",link:n.href.split("?")[0]+"?club="+g.$.clubID+"#home&visitChannel=9358&isNeedFollow=true",imgUrl:g.$.clubLogo}):g.X5Config()},g.clearUserInfo=function(){g.$.userToken="",g.$.userID="",g.$.userHeader=g.$.defaultHeader,g.$.userTel="",g.$.userName=g.$.defaultUserName,g.$.userToken="",g.$.userLoginName="",g.cookieClear("userToken"),g.cookieClear("userID"),g.cookieClear("userTel"),g.cookieClear("userName"),g.cookieClear("userLoginName"),g.localStorageClear("userToken"),g.localStorageClear("userToken_9358"),g.localStorageClear("userToken_web"),g.localStorageClear("userID"),g.localStorageClear("userHeader"),g.localStorageClear("userTel"),g.localStorageClear("userName"),g.localStorageClear("userLoginName"),g.localStorageClear("easemobUserId"),g.localStorageClear("easemobSecondUserId"),g.localStorageClear("easemobAccessToken");var e=g.$.easemob;e.currChatTech={},e.sessionList=null,e.msgList={},e.userId=null,e.secondUserId=null,e.conn&&(e.conn.stopHeartBeat(e.conn),e.conn.close()),e.secondConn&&(e.secondConn.stopHeartBeat(e.secondConn),e.secondConn.close())},g.formatDate=function(e,t,n){return n||(n="—"),e||(e=""),t||(t=""),e&&t?e+n+t:t?"截止至"+t:"长期有效"},g.commonDateFormat=function(e,t){t||(t="yyyy-MM-dd hh:mm:ss");var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in n)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return t},g.formatPrice=function(e,t,n){return e&&t?e+"元/"+t+(n||"分钟"):""},g.hideOrderMenu=function(){"9358"!=g.$.visitChannel||$("club")?he.style.display="none":fe.style.display="none",g("#content",!0).Class("noneMenu")},g.showOrderMenu=function(){"9358"!=g.$.visitChannel||$("club")?he.style.display="block":fe.style.display="block",g("#content",!0).ClassClear("noneMenu")},g.setOrderMenuActive=function(e){g("#_clubMenu>div",!0).ClassClear("active"),g("#_clubMenu>div."+e,!0).Class("active")},g.setNavMenuActive=function(e){g("#_publicMenu>div",!0).ClassClear("active"),g("#_publicMenu>div."+e,!0).Class("active")},g("#_clubMenu>div",!0).Click(function(e,t,n){var a=g(t);if(!a.ClassHave("active"))switch(g("#_clubMenu>div",!0).ClassClear("active"),a.Class("active"),n){case 0:g.page("home",-1,!0,!1);break;case 1:g.page("message",-1,!0,!1);break;case 2:g.page("technicianList",-1,!0,!1);break;case 3:g.login("order",!1,!1,!0);break;case 4:g.page("personal",-1,!0,!1)}}),g("#_publicMenu>div",!0).Click(function(e,t,n){var a=g(t);if(!a.ClassHave("active"))switch(g("#_publicMenu>div",!0).ClassClear("active"),a.Class("active"),n){case 0:g.page("clubList",-1,!0,!1);break;case 1:g.page("message",-1,!0,!1);break;case 2:g.page("personal",-1,!0,!1)}}),g.updateUserNameAndHeader=function(e){g.ajax({url:(g.$.clubID?"../":"")+"../profile/user/info/view",data:{refresh:+new Date},async:e,login:!1,success:function(e){200==e.statusCode&&(e=e.respData,g.$.userAvatar=e.avatar||"",g.$.userName=e.name||g.$.defaultUserName,g.$.userHeader=e.avatarUrl||g.$.defaultHeader,a("userAvatar",e.avatar),a("userName",e.name),a("userHeader",e.avatarUrl))}})},g.showMsgNum=function(e){var t=g(("9358"==g.$.visitChannel?"#_publicMenu":"#_clubMenu")+">div.message>div:nth-of-type(1)>i",!0);"message"!==Y&&(e=parseInt(t[0].innerHTML)+e),e<=0?(t[0].innerHTML=0,t.CSS("visibility","hidden")):(t[0].innerHTML=e,t.CSS("visibility","visible"))},g.formatMsgTime=function(e,t){var n=e instanceof Date?e:new Date(e),a=n.getMonth(),i=n.getDate(),r=n.getHours(),o=n.getMinutes(),s=n.getSeconds();r=r>9?r:"0"+r,o=o>9?o:"0"+o,s=s<10?"0"+s:s;var c=r+":"+o+":"+s,l=new Date,u=864e5;if(n.getFullYear()==l.getFullYear()){if(a==l.getMonth()){if(i==l.getDate())return t?c:r+":"+o;if(l.setTime(l.getTime()-u),i==l.getDate())return t?"昨天 "+c:"昨天";if(l.setTime(l.getTime()-u),i==l.getDate())return t?"前天 "+c:"前天"}return a+=1,(a<9?"0"+a:a)+"-"+(i<9?"0"+i:i)+(t?" "+c:"")}return a+=1,n.getFullYear()+"-"+(a<9?"0"+a:a)+"-"+(i<9?"0"+i:i)+(t?" "+c:"")},g.switchUserChatInfo=function(e,t){var n,i,r=g.$.easemob,o=a(e+"_SessionList"),s=a(t+"_SessionList")||"{}";if(o){var c=JSON.parse(o);if(s){var u=JSON.parse(s);for(i in c)(!u[i]||u[i].time-0<c[i].time-0)&&(u[i]=c[i]);a(t+"_SessionList",JSON.stringify(u)),n=u}else a(t+"_SessionList",o),n=c;l(e+"_SessionList")}else n=JSON.parse(s);r.sessionList=null,g.getSessionList();var d,h,f,p,m,v=r.secondUserId,y=r.userId;for(i in n)if(d=a(t+"_MsgList_"+i),h=a(e+"_MsgList_"+i)){if(h=h.replace(new RegExp(v,"g"),y),d){for(p=JSON.parse(h),m=JSON.parse(d),f=0;f<p.list.length;f++)m.list.push(p.list[f]);0!=f&&m.list.sort(function(e,t){return e.time<t.time?-1:1}),a(t+"_MsgList_"+i,JSON.stringify(m))}else a(t+"_MsgList_"+i,h);l(e+"_MsgList_"+i)}r.msgList=null},g.getSessionList=function(e,t){var n=g.$.easemob;if(!n.sessionList||1==t){var i=a(g.$.userID+"_SessionList");if(g.$.userID&&i){n.sessionList=JSON.parse(i);var r,o,s=[];for(r in n.sessionList)o=n.sessionList[r].avatar,o&&o.length>0&&s.push(n.sessionList[r].avatar);g.ajax({url:"../api/v1/emchat/tech/avatars",isReplaceUrl:!0,data:{avatarIds:s.join(",")},async:!(e===!1),success:function(e){if(200==e.statusCode){e=e.respData;var t,a,i=0;for(r in n.sessionList)a=n.sessionList[r],t=a.avatar,t&&t.length>0?(a.header=e[i]||g.$.defaultHeader,i++):a.header||(a.header=g.$.defaultHeader)}}})}else n.sessionList={}}return n.sessionList},g.getMsgList=function(e){var t=g.$.easemob;if(!t.msgList[e]){var n=a(g.$.userID+"_MsgList_"+e);n?(t.msgList[e]=JSON.parse(n),t.msgList[e].list.length>300&&(t.msgList[e].list.splice(0,t.msgList[e].list.length-10),a(g.$.userID+"_MsgList_"+e,JSON.stringify(t.msgList[e]))),t.sessionList[e]&&(t.msgList[e].header=t.sessionList[e].header)):t.msgList[e]={}}return t.msgList[e]},g.updateSessionList=function(e,t,n){var i=e.from==g.$.easemob.userId||e.from==g.$.easemob.secondUserId?e.to:e.from,r=g.getSessionList();r[i]?(r[i].name=e.ext.name,r[i].header=e.ext.header,r[i].avatar=e.ext.avatar,r[i].no=e.ext.no):r[i]={name:e.ext.name,header:e.ext.header,avatar:e.ext.avatar||"",techId:e.ext.techId||"",no:e.ext.no||"",clubId:e.ext.clubId,"new":0};var o={id:e.id||"",type:t,data:"pic"==t?"[图片]":e.data,time:Date.now()};e.ext&&e.ext.msgType&&(o.msgType=e.ext.msgType,"order"==o.msgType?o.orderId=e.ext.orderId:"diceGame"==o.msgType&&(o.data="[骰子游戏]")),"pic"==t&&(o.url=e.url,o.width=e.width,o.height=e.height),r[i].msg=o,0!=n&&r[i]["new"]++,r[i].time=e.time||Date.now(),a(g.$.userID+"_SessionList",JSON.stringify(r))},g.addToMsgList=function(e,t){var n=e.from==g.$.easemob.userId||e.from==g.$.easemob.secondUserId?e.to:e.from,i=g.getMsgList(n);i.name?e.ext&&(e.ext.name&&(i.name=e.ext.name),e.ext.header&&(i.header=e.ext.header),e.ext.avatar&&(i.avatar=e.ext.avatar),e.ext.techId&&(i.techId=e.ext.techId),e.ext.no&&(i.no=e.ext.no),e.ext.clubId&&(i.clubId=e.ext.clubId)):(i.name=e.ext.name,i.header=e.ext.header,i.avatar=e.ext.avatar||"",i.techId=e.ext.techId||"",i.no=e.ext.no||"",i.clubId=e.ext.clubId,i.list=[]);var r={from:e.from,to:e.to,id:e.id||"",type:t,data:"pic"==t?"[图片]":e.data,time:e.time||Date.now(),status:e.status||1};e.ext&&e.ext.msgType&&(r.msgType=e.ext.msgType,"order"==r.msgType?r.orderId=e.ext.orderId:"paidCoupon"==r.msgType?(r.actId=e.ext.actId,r.techCode=e.ext.techCode):"ordinaryCoupon"==r.msgType?(r.userActId=e.userActId||e.ext.userActId,r.actId=e.ext.actId,r.techCode=e.ext.techCode,r.groupmessageId=e.ext.groupmessageId):"diceGame"==r.msgType?(r.gameStatus=e.ext.gameStatus,r.gameId=e.ext.gameId,r.gameInvite=e.ext.gameInvite,r.gameResult=e.ext.gameResult):"gift"==r.msgType?(r.giftId=e.ext.giftId,r.giftValue=e.ext.giftValue,r.giftName=e.ext.giftName):"oneYuan"!=r.msgType&&"plumFlower"!=r.msgType&&"timeLimit"!=r.msgType&&"luckyWheel"!=r.msgType&&"journal"!=r.msgType||(r.actId=e.ext.actId,r.clubName=e.ext.clubName,r.techCode=e.ext.techCode)),"pic"==t&&(r.url=e.url,r.width=e.width,r.height=e.height),i.list||(i.list=[]),i.list.push(r),a(g.$.userID+"_MsgList_"+n,JSON.stringify(i))},g.getUrlParams=x,g.getUrlParam=$,g.getOauthCode=function(e,t,a,i,r,o,s){i={base:"snsapi_base",userInfo:"snsapi_userinfo"}["base"===i?"base":"userInfo"];var c=n.search;if(s){var l=l||webkitURL;e=new l(e),c=e.search}/_t=(\d*)/g.test(c)?c=c.replace(/_t=(\d*)/g,function(){return"_t="+Date.now()}):c+=c?"&_t="+Date.now():"?_t="+Date.now(),e=s!==!0?n.origin+n.pathname+c+n.hash+(n.hash?0==e.indexOf("&")?e:e?"/"+e:"":e):e.origin+e.pathname+c+e.hash,/_offline_notice/.test(e)||(e=e.replace(/(&|\?)code=[\da-zA-Z]+(&?)/g,function(e,t,n){return"?"==t?n?"?":"":n?"&":""})),e=e.replace(/(&|\?)state=[\da-zA-Z_\-]+(&?)/g,function(e,t,n){return"?"==t?n?"?":"":n?"&":""}),g.ajax({url:(g.$.clubID?"../":"")+"../wx/oauth2/code",data:{wxmp:t,state:a,pageUrl:encodeURIComponent(e),scope:i},success:function(e){200==e.statusCode?n.href=e.respData:o?o(e):g.tipShow(r||e.msg||"请求微信授权失败！")}})},g.sendFriend=function(e,t,n,a,i){e&&(t=t||"text",n=n||"tech",a=a||g.$.easemob.userId,i=i||"user",g.ajax({url:"../api/v1/emchat/markchattouser",isReplaceUrl:!0,type:"post",data:{currentChatId:a,currentUserType:i,friendChatId:e,friendUserType:n,msgType:t},success:function(e){}}))},g.createEasemobConn=N,g.spaceStr=A,y(),g(e).Event("resize",y),g.$.ua.isiPhone&&(g("#_clubMenu",!0).CSS("position","fixed"),g("#_publicMenu",!0).CSS("position","fixed")),g.$.clubID){for(var me,ve=n.href.split("&"),ye={},Ce=0;Ce<ve.length;Ce++)me=ve[Ce].split("="),2==me.length&&(ye[me[0]]=me[1]);g.ajax({url:"clubName",data:{openId:g.$.openId,techNo:ye.techNo||"",clubCode:ye.clubCode||""},success:function(e){g.$.clubName=e.name||g.$.defaultClubName,g.$.clubLogo=e.logo||g.$.defaultClubLogo,g.$.showGetCouponInfo=e.couponCount&&e.couponCount>0,P(g.$.clubName)}})}else"9358"==g.$.visitChannel&&P("9358 ");if(g.$.userToken&&g.updateUserNameAndHeader(),g.$.ua.isWX){var Ie=g.cookie("isNeedIndex"),Te="true"===g.getUrlParam("isNeedFollow");if(g.$.loginChanel&&1!=Ie)M(),T();else{if(g.cookieClear("isNeedIndex"),!g.$.authCode)return 1==Ie&&g.cookie("isNeedIndex",1,3e-4),g.sessionStorage("currInitHash",location.hash),void g.getOauthCode("","9358","9358","userInfo");g._ajax({url:"../api/v2/wx/9358/index",type:"post",data:{openid:g.$.openId||"",code:g.$.authCode,scope:"cgibin_userinfo",state:"clubList",sessionId:g.$.sessionId||"",headimgurl:g.$.headerImgUrl||"",nickname:g.$.nickName||"",token:g.$.userToken,timestamp:Date.now(),sessionType:g.$.sessionType},success:function(e){if(e=JSON.parse(e),"200"==e.statusCode){var n="1"==$("force",!0);e=e.respData;var a=e.wxUserInfo,i=e.loginChanelData;g.$.openId=a.openid,g.localStorage("_indianas_user_open_id",g.$.openId),g.$.sessionId=a.sessionId,g.$.nickName=a.nickname,g.$.headerImgUrl=a.headimgurl,g.localStorage("openId",g.$.openId),g.localStorage("sessionId",g.$.sessionId),g.localStorage("nickName",g.$.nickName),g.localStorage("headerImgUrl",g.$.headerImgUrl),g.$.loginChannelClubID=i.clubId,g.$.loginChanel=i.loginChannel,g.$.clubInviteCode=i.clubInviteCode,i.clubInviteCode&&!n&&(g.$.clubID=i.clubId),g.$.techSerialNo=i.techSerialNo,g.$.techInviteCode=i.techInviteCode,g.$.currLngx=i.lngx,g.$.currLaty=i.laty,g.$.isLogin=i.isLogin,g.sessionStorage("loginChannelClubID",g.$.loginChannelClubID),g.sessionStorage("loginChanel",g.$.loginChanel),g.sessionStorage("clubInviteCode",g.$.clubInviteCode),g.sessionStorage("techSerialNo",g.$.techSerialNo),g.sessionStorage("techInviteCode",g.$.techInviteCode),g.sessionStorage("currLngx",g.$.currLngx),g.sessionStorage("currLaty",g.$.currLaty),g.sessionStorage("isLogin",g.$.isLogin),g.$.viewClubType="all_club"==i.viewClubType?1:4,g.localStorage("viewClubType",g.$.viewClubType),g.$.userToken=i.token,i.userId&&(g.$.userID=i.userId,g.localStorage("userID",g.$.userID),g.$.easemob.userId=i.emchatId,g.localStorage("easemobUserId",g.$.easemob.userId),i.orginEmchatId&&i.orginEmchatId!=i.emchatId&&(g.$.easemob.secondUserId=i.orginEmchatId)),i.userName&&(g.$.userName=i.userName,g.localStorage("userName",g.$.userName)),i.telephone?(g.$.userTel=i.telephone,g.localStorage("userTel",g.$.userTel)):(g.$.userTel=null,g.localStorageClear("userTel"),g.cookieClear("userTel"),g.$.userHeader=g.$.headerImgUrl||g.$.defaultHeader,g.localStorage("userHeader",g.$.userHeader)),g.$.userLoginName=i.loginName,g.localStorage("userToken",g.$.userToken),g.localStorage("userToken_9358",g.$.userToken),g.localStorage("userLoginName",g.$.userLoginName),M();var r=1==a.subscribe;if(g.$.isFollowed=r,g.localStorage("spa_user_isFollowed",Number(r)+""),Te&&g.paramClear("isNeedFollow"),!r&&Te){g.paramClear("visitChannel"),g.$.tmpHash=g.sessionStorage("currInitHash")||location.hash,g.$.tmpHash=g.$.tmpHash?g.$.tmpHash.substring(1):"";var o=g.$.tmpHash.match(/id=(\d+)$/);o=o?o[1]:"",I("follow9358&techId="+o,!0)}else if(1==Ie)I("personal",!0);else{var s,l=g.sessionStorage("currInitHash")||location.hash;g.sessionStorageClear("currInitHash"),s="#home"==l&&g.$.clubID?l.substr(1):l&&"#home"!=l||"#home"==l&&g.$.clubID?l.substr(1):"clubList"+(g.getUrlParam("search_text")?"&search_text="+g.getUrlParam("search_text"):""),I(s,!0)}}else"935801"==e.statusCode?(1==Ie&&g.cookie("isNeedIndex",1,3e-4),g.getOauthCode("","9358","9358","userInfo")):"404"==e.statusCode?(g.clearUserInfo(),c&&history.replaceState(null,t.title,location.search+"#login")):g.tipShow(e.msg||"确定用户的访问渠道请求失败！")},error:function(e,t){}})}}else g.$.userToken?g.ajax({url:"../api/v1/check_login/"+g.$.sessionType+"/"+g.$.userToken,isReplaceUrl:!0,success:function(e){"Y"!=e.msg&&g.clearUserInfo(),M(),T()},error:function(){M(),T()}}):(M(),T());var be=g.localStorage("prev_save_time")||"";if(g.$.clubID&&(""==be||!g.getUrlParam("_t")&&be==g.getUrlParam("_t"))){""!=be&&be!=g.getUrlParam("_t")||g.localStorage("prev_save_time",be);var we=g.getUrlParam("clubsource")||"link";we&&/wifi/.test(we)&&(we="wifi"),g.$.clubSource=we,g.ajax({url:"../api/v2/log/club/visit",isReplaceUrl:!0,data:{clubId:g.$.clubID,clubName:g.$.clubName,source:we,techCode:g.$.techInviteCode||"",url:encodeURIComponent(location.href)}})}g("#_afterReward>div>div:nth-of-type(4)",!0).Click(function(){g("#_afterReward",!0).ClassClear("active")}),g("#_afterReward>div>div:nth-of-type(3)>div",!0).Click(function(){g("#_shareMask",!0).Class("active"),g.X5Config({title:(g.$.afterRewardInfo.name||g.$.defaultTechName)+"欢迎您",desc:"点我聊聊，更多优惠，更好服务！",link:location.href.split("?")[0]+"?club="+g.$.afterRewardInfo.clubId+"#technicianDetail&id="+g.$.afterRewardInfo.id,imgUrl:g.$.afterRewardInfo.avatarUrl||g.$.defaultHeader,proxyDom:g("#_afterReward>div>div:nth-of-type(3)>div",!0)}),g.$.afterRewardInfo=null}),g("#_shareMask",!0).Click(function(e,t){g(t).ClassClear("active")});var Se=[0,0],_e=g("#_bindPhone>div>div:first-child>div:nth-of-type(4)",!0),ke=g("#_bindPhone>div>div:first-child>div:nth-of-type(3)>div",!0),xe=0,$e=0;g("#_bindPhone>div>div:last-child",!0).Click(function(){$e=0,g.eventMaskShow(!1),g("#_bindPhone",!0).ClassClear("active")}),g("#_bindPhoneNumber",!0).Verify("tel",function(e){e?ke.ClassClear("notel"):ke.Class("notel"),Se[0]=e,R()}),g("#_bindPhoneCode",!0).Verify("authcode",function(e){Se[1]=e,R()}),ke.Click(function(){if(!ke.ClassHave("disabled")&&!ke.ClassHave("notel")){var e=60;ke.Class("disabled"),ke.Text("重发("+--e+"s)"),xe=setInterval(function(){ke.Text("重发("+--e+"s)"),0==e&&(ke.ClassClear("disabled"),ke.Text("获取验证码"),clearInterval(xe))},1e3),g.ajax({url:"../api/v1/icode",isReplaceUrl:!0,type:"get",data:{mobile:g("#_bindPhoneNumber",!0).Value()}})}}),_e.Click(function(){g.$.userID;if(!_e.ClassHave("disabled")){if(_e.ClassHave("processing"))return g.tipShow("绑定中，请稍候...");_e.Class("processing").Text("绑定中..."),U(g("#_bindPhoneNumber",!0).Value(),g("#_bindPhoneCode",!0).Value(),function(e){200==e.statusCode?(e=e.respData,e.message&&g.tipShow(e.message),g("#_bindPhone",!0).ClassClear("active")):(g.eventMaskShow(!1),"HAS_BOUND"!=e.msg?(e.msg=e.msg?0==e.msg.indexOf("绑定失败")?e.msg:"绑定失败："+e.msg:"绑定失败",g.tipShow(e.msg)):g("#_bindPhone",!0).ClassClear("active")),_e.ClassClear("processing").Text("确认")})}}),g.execBindPhone=U,g.bindPhone=function(e){$e=e,g.eventMaskShow(!0),g.localStorage("pop_bind_phone_dialog",!0),g("#_bindPhone",!0).Class("active")};var Le=g("#_clubMenu>div,#_publicMenu>div",!0);if(g("#_loading>span",!0).Event("click",function(){var e,t=ge[pe];delete ge[pe],1==t?g.page():g.pageCancel(),Le.ClassClear("active");for(var n=0,a=Le.length;n<a;n++)if(e=Le.Index(n),e.ClassHave(Y)){e.Class("active");break}}),/spa.93wifi.com/.test(n.hostname)){var Ee=t.createElement("script");Ee.onload=function(){e._hmt=e._hmt||[]},Ee.src="http://hm.baidu.com/h.js?2b7f463ac6f2cf5b303005839e722cdc",t.querySelector("head").appendChild(Ee)}}function i(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)});return t}var r="2017022405c",o="spa_",s=!1,c=!!history.replaceState;addEventListener?e.addEventListener("load",a,!1):e.attachEvent("onload",a)}(window,document,location),function(){"use strict";function e(t,a){function i(e,t){return function(){return e.apply(t,arguments)}}var r;if(a=a||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=a.touchBoundary||10,this.layer=t,this.tapDelay=a.tapDelay||200,this.tapTimeout=a.tapTimeout||700,!e.notNeeded(t)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],s=this,c=0,l=o.length;c<l;c++)s[o[c]]=i(s[o[c]],s);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,a){var i=Node.prototype.removeEventListener;"click"===e?i.call(t,e,n.hijacked||n,a):i.call(t,e,n,a)},t.addEventListener=function(e,n,a){var i=Node.prototype.addEventListener;"click"===e?i.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),a):i.call(t,e,n,a)}),"function"==typeof t.onclick&&(r=t.onclick,t.addEventListener("click",function(e){r(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,a=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,i=a&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r=a&&/OS [6-7]_\d/.test(navigator.userAgent),o=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(a&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,a;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),a=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;a&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,r;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],a){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!i){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,o,s,c,l,u=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,o=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(l=e.changedTouches[0],u=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),s=u.tagName.toLowerCase(),"label"===s){if(t=this.findControl(u)){if(this.focus(u),n)return!1;u=t}}else if(this.needsFocus(u))return e.timeStamp-o>100||a&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,e),a&&"select"===s||(this.targetElement=null,e.preventDefault()),!1);return!(!a||i||(c=u.fastClickScrollParent,!c||c.fastClickLastScrollTop===c.scrollTop))||(this.needsClick(u)||(e.preventDefault(),this.sendClick(u,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,a,i,r;if("undefined"==typeof window.ontouchstart)return!0;if(a=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(a>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(o&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),i[1]>=10&&i[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(r=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],!!(r>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))||("none"===e.style.touchAction||"manipulation"===e.style.touchAction))},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}();