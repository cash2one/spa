!function(){function e(e,o){n||(n=!0,c=e||c+1,d.ClassClear("none"),u.Class("none"),g=!1,$.ajax({url:"../api/v2/user/luckyWheel/userPrizeRecordList",isReplaceUrl:!0,data:{token:$.$.userToken,clubId:"9358"==$.$.visitChannel?"":$.$.clubID,page:c,pageSize:h},success:function(e){if("200"!=e.statusCode)return $.tipShow(e.msg||"数据请求失败！");for(e=null==e.respData.recordList?[]:e.respData.recordList,l="",i=0,a=e.length;i<a;i++)l+=t(e[i]);1==c?(r.Html(l),l?r.ClassClear("nullData"):(r.Class("nullData"),g=!0),S=p[0].scrollHeight):(r.Html(l,!0),""==l&&(g=!0,u.ClassClear("none"))),s(),n=!1,d.Class("none"),o&&o()}}))}function t(e){e.tags&&0!=e.tags.length||(e.tags=[{tagName:"(无)"}]);var t=e.createTime.substr(5,6),s=e.verifyCode;return s&&(s=$.spaceStr(s,!1,4)),'<div  class="list" clubId="'+e.clubId+'" actId="'+e.activityId+'" cardId="'+e.prizeContent+'" prizeType="'+e.prizeType+'" recordId="'+e.recordId+'">                           <div class="title">                                <div class="img" style="background-image: url(\''+(e.clubLogo||$.$.defaultClubLogo)+'\')"></div>                                <div class="name">'+(e.clubName||$.$.defaultClubName)+" </div>"+(1==e.prizeType||2==e.prizeType||3==e.prizeType?'<div class="run"></div>':"")+'                          </div>                          <div class="info">                                <div class="name">'+(e.prizeName.length>15?e.prizeName.substr(0,15)+"...":e.prizeName)+' </div>                                <div class="state '+("1"==e.status?"have ":"not")+'">'+("0"==e.status?"未核销":"1"==e.status?"已核销":"2"==e.status?"过期":"3"==e.status?"未中奖":"-")+' </div>                           </div>                          <div class="number">                                <div class="num '+(s?"have":"none")+'">兑换码：'+s+' </div>                                <div class="time">'+t+"</div>                          </div>                    </div>"}function s(){$("div#lucky #content>div>div:nth-of-type(2)>div>div>div.list",!0).Event("click",function(e,t){/(1|2|3)/.test(t.getAttribute("prizeType"))&&($.sessionStorage("lucky_data",p.Html()),$.sessionStorage("lucky_page",c),$.sessionStorage("lucky_page_height",S),$.sessionStorage("lucky_end",g),$.sessionStorage("lucky_ID",JSON.stringify(o)),$.sessionStorage("lucky_top",v[0].scrollTop),$.$.clubID?$.page("luckyDetail&actId="+t.getAttribute("actId")+"&cardId="+t.getAttribute("cardId")+"&prizeType="+t.getAttribute("prizeType")+"&recordId="+t.getAttribute("recordId")):location.href=location.origin+location.pathname+"?club="+t.getAttribute("clubId")+"#luckyDetail&actId="+t.getAttribute("actId")+"&cardId="+t.getAttribute("cardId")+"&prizeType="+t.getAttribute("prizeType")+"&recordId="+t.getAttribute("recordId"))},!0)}var i,a,r,l="",o=JSON.parse($.sessionStorage("lucky_ID")||"{}"),n=!1,c=1,d=$("#loadTip"),u=$("#finishTip"),g="true"==($.sessionStorage("lucky_end")||"false"),p=$("#content>div>div:nth-of-type(2)>div"),v=$("#content"),y=$.sessionStorage("lucky_top"),k=$.sessionStorage("lucky_page"),I=$.sessionStorage("lucky_data"),b=-.5,S=$.sessionStorage("lucky_page_height"),h=10;return $.$.userToken?(p.Html("<div></div>"),r=$("#content>div>div:nth-of-type(2)>div>div"),v.Event("scroll",function(t){!g&&v[0].scrollTop+v[0].clientHeight-(c+b-1)*S>=0&&e()}),I?(c=parseInt(k),p.Html(I),setTimeout(function(){v[0].scrollTop=y},1),s(),g&&u.ClassClear("none"),$.pageSwitch()):e(1,$.pageSwitch()),$.sessionStorageClear("lucky_ID"),$.sessionStorageClear("lucky_data"),$.sessionStorageClear("lucky_end"),$.sessionStorageClear("lucky_top"),$.sessionStorageClear("lucky_page"),void $.sessionStorageClear("lucky_page_height")):($.$.loginUrl="lucky",void $.page("login"))}();