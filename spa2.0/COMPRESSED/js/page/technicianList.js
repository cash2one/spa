!function(){$.ajax({url:"service/select",success:function(e){function t(e,t){if(!m){m=!0,g=e||g+1;var a,c,l;C.ClassHave("active")?(a="free",$.param("onlyFree",1)):(a="all",$.paramClear("onlyFree")),p.ClassHave("order_comment")?(c=1,$.param("scoreUp",1)):(c=-1,$.paramClear("scoreUp")),o?(l=o.getAttribute("hh"),$.param("sid",l)):(l=-1,$.paramClear("sid")),y.ClassClear("none"),L.Class("none"),_=!1,S.ClassClear("nullData"),$.ajax({url:"technician",data:{page:g,pageSize:w,stateActiveId:a,scoreActiveId:c,itemActiveId:l,techName:O.ClassHave("active")?encodeURIComponent(x[0].value):""},success:function(e){for(e=e.list,1==g&&(d={}),s=0,r="",n=e.length;s<n;s++)d[e[s].id]||(d[e[s].id]=1,e[s].techTags&&0!=e[s].techTags.length||(e[s].techTags=[]),o&&o.parentNode&&e[s].techTags.length>1&&e[s].techTags.sort(function(e,t){return e.tagName==o.parentNode.getAttribute("hh")?-1:t.tagName==o.parentNode.getAttribute("hh")?1:0}),r+='<div class="tech-item" hh="'+e[s].id+'">                                      <div class="'+e[s].status+'"  style="background-image: url(\''+(e[s].avatarUrl||$.$.defaultHeader)+"')\"></div>                                      <div><div>                                        <div>                                          <div>"+(e[s].name||$.$.defaultTechName)+"</div>                                          <div "+(e[s].serialNo?"":'style="display:none;"')+">"+(e[s].serialNo||"")+"</div>                                        </div>                                        <div>                                          <div>"+((e[s].star-0)/20).toFixed(1)+"</div>                                          <div>"+e[s].commentCount+"</div>                                          <div>"+function(e){var t=[];return e=e||[],e.forEach(function(e){e&&t.push("#"+e)}),t.join(" ")}(e[s].impressions)+"</div>                                        </div>                                        <div>                                          <div>"+(e[s].description||"&nbsp;")+"</div>                                        </div>                                      </div>                                      <div></div></div>                                    </div>");1==g?(S.Html(r),r?S.ClassClear("nullData"):(l!=-1||$.param("sid")||$.param("scoreUp")||O.ClassHave("active")?S.Class("nullData"):($("#content>div>div:nth-of-type(3)").Hide(),$("#content>div>div:nth-of-type(4)").Hide(),$("#content>div>div:nth-of-type(5)").Hide(),$("#content>div>div:nth-of-type(6)").Show(),$("#content>div>div:nth-of-type(6)>div:nth-of-type(2)").Click(function(){$.page("serviceList")})),_=!0),N=S[0].scrollHeight):(S.Html(r,!0),n<w&&(_=!0,L.ClassClear("none"))),i(),m=!1,y.Class("none"),t&&t()}})}}function i(){$("div#technicianList #content>div>div:nth-of-type(3)>div:nth-of-type(2)>div",!0).Event("click",function(e,t){$.sessionStorage("technicianList_data",S.Html()),$.sessionStorage("technicianList_page",g),$.sessionStorage("technicianList_page_height",N),$.sessionStorage("technicianList_end",_),$.sessionStorage("technicianList_ID",JSON.stringify(d)),$.sessionStorage("technicianList_top",H[0].scrollTop),$.page("technicianDetail&id="+t.getAttribute("hh"))},!0)}var s,a,n,c,l,o,r="",v="",d=JSON.parse($.sessionStorage("technicianList_ID")||"{}"),h=$("#techListPop"),C=$(".tech-list>#menu>div:nth-of-type(1)>div"),p=$(".tech-list>#menu>div:nth-of-type(2)>div"),f=$(".tech-list>#menu>div:nth-of-type(3)>div"),u=($("#selectArea"),$("#selectArea>div:nth-of-type(1)>div:nth-of-type(1)>.select-item")),m=!1,g=1,y=$("#loadTip"),L=$("#finishTip"),_="true"==($.sessionStorage("technicianList_end")||"false"),S=$("#content>div>div:nth-of-type(3)>div:nth-of-type(2)"),H=$("#content"),T=$.sessionStorage("technicianList_top"),A=$.sessionStorage("technicianList_page"),k=$.sessionStorage("technicianList_data"),I=.4,N=$.sessionStorage("technicianList_page_height"),w=10,M=$(".tech-list>#menu>div:nth-of-type(4)"),O=$("#content>div>div.search"),x=$("#content>div>div.search>input"),b=$("#content>div>div.search>div");for(s=0,n=e.length;s<n;s++){for(a=0,v="",c=e[s].serviceItems.length;a<c;a++)v+='<div hh="'+e[s].serviceItems[a].id+'" class="select-item">'+e[s].serviceItems[a].name+"</div>";r+="<div>                        <div>"+e[s].name+'</div>                        <div hh="'+e[s].name+'">'+v+"</div>                    </div>"}$("#selectArea>div:nth-of-type(1)>div:nth-of-type(2)").Html(r),$("#content>div>div:nth-of-type(3)>div:nth-of-type(1)>div:nth-of-type(1)").Click(function(){C.ClassHave("active")?C.ClassClear("active"):C.Class("active"),t(1)}),1==$.param("onlyFree")&&C.Class("active"),$(".tech-list>#menu>div:nth-of-type(2)").Click(function(e,t){f.ClassClear("active"),p.ClassHave("active")?(h.ClassClear("active"),p.ClassClear("active"),H.ClassClear("no-scroll"),$.showOrderMenu()):($.hideOrderMenu(),h.Class("active").ClassClear("show-items"),H.Class("no-scroll"),p.Class("active"))});var D=$("#commentPop>div");if(D.Click(function(e,i){h.ClassClear("active"),H.ClassClear("no-scroll");var s=i.dataset.type,a=$(i),n=a.Text();"score"==s?(p.Class("order_score"),p.ClassClear("order_comment")):(p.ClassClear("order_score"),p.Class("order_comment")),D.ClassClear("active"),a.Class("active"),p.ClassClear("active"),p.Text(n),$.showOrderMenu(),t(1)}),$(".tech-list>#menu>div:nth-of-type(3)").Click(function(){p.ClassClear("active"),f.ClassHave("active")?(h.ClassClear("active"),H.ClassClear("no-scroll"),f.ClassClear("active"),$.showOrderMenu()):($.hideOrderMenu(),h.Class("active").Class("show-items"),H.Class("no-scroll"),f.Class("active"))}),u.Click(function(){o&&(o.classList.remove("active"),o=null),u.Class("active")}),$("#selectArea>div:nth-of-type(1)>div:nth-of-type(2) .select-item").Click(function(e,t){o&&o.classList.remove("active"),u.ClassClear("active"),o==t?o=null:(o=t,o.classList.add("active"))}),$("#selectArea>div:nth-of-type(2)>div:nth-of-type(1)").Click(function(){o&&o.classList.remove("active"),o=l,o?(o.classList.add("active"),u.ClassClear("active")):u.Class("active"),f.ClassClear("active"),h.ClassClear("active"),H.ClassClear("no-scroll"),$.showOrderMenu()}),$("#selectArea>div:nth-of-type(2)>div:nth-of-type(2)").Click(function(){o?(f.Class("active"),f.Text(o.innerHTML)):(f.ClassClear("active"),f.Text("项目筛选")),f.ClassClear("active"),h.ClassClear("active"),H.ClassClear("no-scroll"),l=o,$.showOrderMenu(),t(1)}),$.param("sid")){var U=$.param("sid");$("#selectArea>div:nth-of-type(1)>div:nth-of-type(2) .select-item").Each(function(e){e.getAttribute("hh")==U&&(o=e)}),o&&(l=o,o.classList.add("active"),u.ClassClear("active"),f.Text(o.innerHTML))}H.Event("scroll",function(e){!_&&H[0].scrollTop+H[0].clientHeight-(g+I-1)*N>=0&&t()}),M.Click(function(){O.ClassHave("active")?(h.ClassClear("has-search"),O.ClassClear("active")):(h.Class("has-search"),O.Class("active"))}),b.Click(function(){t(1)}),k?(g=parseInt(A),S.Html(k),setTimeout(function(){H[0].scrollTop=T},1),i(),_&&L.ClassClear("none"),$.pageSwitch()):t(1,$.pageSwitch()),$.sessionStorageClear("technicianList_ID"),$.sessionStorageClear("technicianList_data"),$.sessionStorageClear("technicianList_end"),$.sessionStorageClear("technicianList_top"),$.sessionStorageClear("technicianList_page"),$.sessionStorageClear("technicianList_page_height")}})}();